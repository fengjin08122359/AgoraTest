!function(){var e="undefined"!=typeof window?window:self;e.Ice=e.Ice||{},Ice.Slice=Ice.Slice||{},e.IceMX=e.IceMX||{},e.IceSSL=e.IceSSL||{};var t,i,n,r,o,s,c,a,l,d,u,h,p,f,_,C,m,g,y,v,I,S,R,E,w,b,x,P,O,T,A,M,k,N,D,V,L,U,F,j,B,H,q,z,W,G,Q,X,K,Y,J,Z,$,ee,te,ie,ne,re,oe,se,ce,ae,le,de,ue,he,pe,fe,_e,Ce,me,ge,ye,ve,Ie,Se,Re,Ee,we,be,xe,Pe,Oe,Te,Ae,Me,ke,Ne,De,Ve,Le,Ue,Fe,je,Be,He,qe,ze,We,Ge,Qe,Xe,Ke,Ye,Je,Ze,$e,et,tt,it,nt,rt,ot,st,ct,at,lt,dt,ut,ht,pt,ft,_t,Ct,mt,gt,yt,vt,It,St,Rt,Et,wt,bt,xt,Pt,Ot,Tt,At,Mt,kt,Nt,Dt,Vt,Lt,Ut,Ft,jt,Bt,Ht,qt,zt,Wt,Gt,Qt,Xt,Kt,Yt,Jt,Zt,$t,ei,ti,ii,ni,ri,oi,si,ci,ai,li,di,ui,hi,pi,fi,_i,Ci,mi,gi,yi,vi,Ii=Ice.Slice;t="undefined"!=typeof window?window:self,i={module:function(e){var i=t[e];return void 0===i&&(i={},t[e]=i),i},require:function(e){return t},type:function(e){if(void 0!==e){for(var i=e.split("."),n=t,r=0,o=i.length;r<o;++r)if(void 0===(n=n[i[r]]))return;return n}}},Ice.__require=function(){return t},Ice.Slice=Ice.Slice||{},Ice.__M=i,n=Ice.__M,r=Ice.Slice,o=function(e,t){return e===t||null!==e&&void 0!==e&&null!==t&&void 0!==t&&(e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):e instanceof Array&&s.equals(e,t,o)))},(s={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,i){if(e.length!=t.length)return!1;var n,r,s=i||o;for(n=0,r=e.length;n<r;++n)if(!s.call(s,e[n],t[n]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var i=e[t-1],n=Math.floor(Math.random()*t);e[t-1]=e[n],e[n]=i}},indexOf:function(e,t,i){if(void 0===i||null===i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(i.call(i,e[n],t))return n;return-1},filter:function(e,t,i){i=void 0===i?t:i;for(var n=[],r=0;r<e.length;++r)t.call(i,e[r],r,e)&&n.push(e[r]);return n}}).eq=o,r.defineSequence=function(e,t,i,r,o){var s=null;Object.defineProperty(e,t,{get:function(){return null===s&&(s=Ice.StreamHelpers.generateSeqHelper(n.type(i),r,n.type(o))),s}})},Ice.ArrayUtil=s,Ice.Class=function(){var e,t,i;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(i=t.__init__)&&delete t.__init__;var n=i||function(){};if(void 0!==e&&(n.prototype=new e,n.prototype.constructor=n),void 0!==t)for(var r in t)n.prototype[r]=t[r];return n},function(){var e=Ice.Class,t=function(e,i,n,r){if(r+="  ",null===i)return"\n"+r+e+": (null)";if(void 0===i)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof i)return"";if("object"!=typeof i)return"\n"+r+e+': "'+i+'"';if(-1!=n.indexOf(i))return"\n"+r+e+": (recursive)";n.push(i);var o="\n"+r+e+":";for(var s in i)0!==e.indexOf("_")&&"function"!=typeof i[s]&&(o+=r+t(s,i[s],n,r));return o},i=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var i in this)"_inToStringAlready"!=i&&(e+=t(i,this[i],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});i.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=i;var n=e(i,{__init__:function(e){i.call(this,e),i.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=n;var r=Ice.Slice;r.defineLocalException=function(e,t,i){var n=e;return n.prototype=new t,n.prototype.constructor=n,n.prototype.ice_name=function(){return i},n};var o=e(i,{__init__:function(e){i.call(this,e),i.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),s(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),c(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var s=function(e,t,i){void 0!==i&&i!==o&&(t.startWriteSlice(i.__id,-1,i.__parent===o),i.prototype.__writeMemberImpl&&i.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),s(e,t,i.__parent))},c=function(e,t,i){void 0!==i&&i!==o&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),c(e,t,i.__parent))},a=function(e){e.startWriteException(this.__slicedData),s(this,e,this.__mostDerivedType()),e.endWriteException()},l=function(e){e.startReadException(),c(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,i,n,r,o,s){var c=e;return c.__parent=t,c.prototype=new t,c.__id="::"+i,c.prototype.ice_name=function(){return i},c.prototype.constructor=c,c.prototype.__mostDerivedType=function(){return c},o&&(c.prototype.__write=a,c.prototype.__read=l),c.prototype.__writeMemberImpl=n,c.prototype.__readMemberImpl=r,s&&(c.prototype.__usesClasses=function(){return!0}),c}}(),Ice.AsyncStatus={Queued:0,Sent:1},(c=Ice.Class({__init__:function(e,t){if(t<0||t>c.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>c.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=t},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof c&&(this.high===e.high&&this.low===e.low)},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!=(this.high&c.SIGN_MASK)){if(this.high===c.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>c.HIGH_MAX?Number.NEGATIVE_INFINITY:e*c.HIGH_MASK*-1+this.low}return this.high>c.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*c.HIGH_MASK+this.low}})).MAX_UINT32=4294967295,c.SIGN_MASK=2147483648,c.HIGH_MASK=4294967296,c.HIGH_MAX=2097151,Ice.Long=c,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw Cr.Utils.log(void 0===t?"assertion failed":t),Cr.Utils.log(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;try{Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var i=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,i){this._enumType.__writeOpt(e,t,i)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=i,Ice.Slice.defineEnum=function(t){var n=function(t,i){e.call(this,t,i)};(n.prototype=new e).constructor=n;var r=[],o=0,s=null;for(var c in t){var a=t[c][0],l=t[c][1],d=new n(a,l);r[l]=d,s||(s=d),Object.defineProperty(n,a,{enumerable:!0,value:d}),l>o&&(o=l)}return Object.defineProperty(n,"minWireSize",{get:function(){return 1}}),n.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(s)},n.__read=function(e){return e.readEnum(n)},n.__writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,Ice.OptionalFormat.Size)&&n.__write(e,i)},n.__readOpt=function(e,t){return e.readOptEnum(t,n)},n.__helper=new i(n),Object.defineProperty(n,"valueOf",{value:function(e){return void 0===e?n:r[e]}}),Object.defineProperty(n,"maxValue",{value:o}),Object.defineProperty(n.prototype,"maxValue",{value:o}),n}}(),function(){Ice.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:7&i|8).toString(16)})}}(),Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),function(){var e=Ice.Debug;function t(e,t,i){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&e<=126){var n=String.fromCharCode(e);null!==i&&-1!==i.indexOf(n)?(t.push("\\"),t.push(n)):t.push(n)}else{t.push("\\");for(var r=e.toString(8),o=r.length;o<3;o++)t.push("0");t.push(r)}}}function i(e,t){var i,n=e.charCodeAt(t);if(!(n>=32&&n<=126))throw i=t>0?"character after `"+e.substring(0,t)+"'":"first character",i+=" is not a printable ASCII character (ordinal "+n+")",new Error(i);return n}function n(t,n,r,o){if(e.assert(n>=0),e.assert(r<=t.length),n>=r)throw new Error("EOF while decoding string");var s;if("\\"!=t.charAt(n))s=i(t,n++);else{if(n+1==r)throw new Error("trailing backslash");switch(t.charAt(++n)){case"\\":case"'":case'"':s=t.charCodeAt(n++);break;case"b":++n,s="\b".charCodeAt(0);break;case"f":++n,s="\f".charCodeAt(0);break;case"n":++n,s="\n".charCodeAt(0);break;case"r":++n,s="\r".charCodeAt(0);break;case"t":++n,s="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var c=0,a=0;a<3&&n<r;++a){var l=t.charAt(n++);if(-1=="01234567".indexOf(l)){--n;break}c=8*c+parseInt(l)}if(c>255){var d="octal value \\"+c.toString(8)+" ("+c+") is out of range";throw new Error(d)}s=c;break;default:s=i(t,n++)}}return o.value=n,s}Ice.StringUtil={findFirstOf:function(e,t,i){i=void 0===i?0:i;for(var n=e.length,r=i;r<n;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,i){i=void 0===i?0:i;for(var n=e.length,r=i;r<n;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(e,i){var n,r;if(null!==(i=void 0===i?null:i))for(n=0,r=i.length;n<r;++n)if(i.charCodeAt(n)<32||i.charCodeAt(n)>126)throw new Error("special characters must be in ASCII range 32-126");var o,s=[];for(n=0,r=e.length;n<r;++n)(o=e.charCodeAt(n))<128?t(o,s,i):o>127&&o<2048?(t(o>>6|192,s,i),t(63&o|128,s,i)):(t(o>>12|224,s,i),t(o>>6&63|128,s,i),t(63&o|128,s,i));return s.join("")},unescapeString:function(t,i,r){i=void 0===i?0:i,r=void 0===r?t.length:r,e.assert(i>=0&&i<=r&&r<=t.length);var o=[];return function(e,t,i,r){var o,s,c,a={value:0};for(;t<i;)o=n(e,t,i,a),t=a.value,o<128?r.push(String.fromCharCode(o)):o>191&&o<224?(s=n(e,t,i,a),t=a.value,r.push(String.fromCharCode((31&o)<<6|63&s))):(s=n(e,t,i,a),c=n(e,t=a.value,i,a),t=a.value,r.push(String.fromCharCode((15&o)<<12|(63&s)<<6|63&c)))}(t,i,r,o),o.join("")},splitString:function(e,t){for(var i=[],n="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,n.length>0&&(i.push(n),n="");continue}}r<e.length&&(n+=e.charAt(r++))}else o=e.charAt(r++);return n.length>0&&i.push(n),null!==o?null:i},checkQuote:function(e,t){t=void 0===t?0:t;var i=e.charAt(t);if('"'==i||"'"==i){t++;for(var n,r=e.length;t<r&&-1!=(n=e.indexOf(i,t));){if("\\"!=e.charAt(n-1))return n;t=n+1}return-1}return 0},hashCode:function(e){for(var t=0,i=e.length,n=0;n<i;n++)t=31*t+e.charCodeAt(n);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var e=Ice.__M,t=Ice.StringUtil;function i(e,t,i,n,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===n&&e.keysEqual(t,o._key))return void(o._value=i);e.add(t,i,n,r)}function n(e,t){return e===t}var r=Ice.Class({__init__:function(e,t){var i,o,s,c,a;if("function"==typeof e?(o=e,s=t):e instanceof r&&(o=(i=e).keyComparator,s=i.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof o?o:n,this._valueComparator="function"==typeof s?s:n,i instanceof r&&i._size>0){for(this._threshold=i._threshold,a=i._table.length,this._table.length=a,c=0;c<a;c++)this._table[c]=null;this.merge(i)}else for(this._threshold=this._initialCapacity*this._loadFactor,c=0;c<this._initialCapacity;c++)this._table[c]=null},set:function(e,t){var n=this.computeHash(e),r=this.hashIndex(n.hash,this._table.length);return i(this,n.key,t,n.hash,r)},get:function(e){var t=this.computeHash(e),i=this.findEntry(t.key,t.hash);return void 0!==i?i._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),i=this.hashIndex(t.hash,this._table.length),n=null,r=this._table[i];null!==r;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key))return this._size--,null!==n?n._nextInBucket=r._nextInBucket:this._table[i]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;n=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var i=this._head;null!==i;i=i._next)e.call(t,i._key,i._value)},keys:function(){for(var e=[],t=0,i=this._head;null!==i;i=i._next)e[t++]=i._key;return e},values:function(){for(var e=[],t=0,i=this._head;null!==i;i=i._next)e[t++]=i._value;return e},equals:function(e,t){if(null===e||!(e instanceof r)||this._size!==e._size)return!1;for(var i=this,n=t||function(e,t){return i._valueComparator.call(i._valueComparator,e,t)},o=this._head;null!==o;o=o._next){var s=e.findEntry(o._key,o._hash);if(void 0===s||!n(o._value,s._value))return!1}return!0},clone:function(){return new r(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)i(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,i,n){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:i}});r._nextInBucket=this._table[n],this._table[n]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],i=0;i<e;i++)t[i]=null;for(var n=this._head;null!==n;n=n._next){var r=this.hashIndex(n._hash,e);n._nextInBucket=t[r],t[r]=n}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var i=this.hashIndex(t,this._table.length),n=this._table[i];null!==n;n=n._nextInBucket)if(n._hash===t&&this.keysEqual(e,n._key))return n},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var i;if(0===e||-0===e)return{key:0,hash:0};if(null===e)return null===r._null&&(i=Ice.generateUUID(),r._null={key:i,hash:t.hashCode(i)}),r._null;if(void 0===e)throw new Error("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};var n=typeof e;if("string"===n||e instanceof String)return{key:e,hash:t.hashCode(e)};if("number"===n||e instanceof Number)return isNaN(e)?(null===r._nan&&(i=Ice.generateUUID(),r._nan={key:i,hash:t.hashCode(i)}),r._nan):{key:e,hash:e.toFixed(0)};if("boolean"===n||e instanceof Boolean)return{key:e,hash:e?1:0};throw new Error("cannot compute hash for value of type "+n)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=r,r.compareEquals=function(e,t){return e===t||void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.equals(t)},r.compareIdentity=n,r._null=null,r._nan=null;var o=r.prototype;Object.defineProperty(o,"size",{get:function(){return this._size}}),Object.defineProperty(o,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(t,i,n,o,s,c,a,l,d){t[i]=void 0!==a||void 0!==d?function(e){return new r(e||a,d)}:r;var u=null;Object.defineProperty(t,n,{get:function(){return null===u&&(u=Ice.StreamHelpers.generateDictHelper(e.type(o),e.type(s),c,e.type(l),t[i])),u}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,t=Object.defineProperty,i=(Ice.HashMap,Ice.OptionalFormat),n={FSizeOptHelper:function(){this.writeOpt=function(e,t,n){if(void 0!==n&&e.writeOpt(t,i.FSize)){var r=e.startSize();this.write(e,n),e.endSize(r)}},this.readOpt=function(e,t){var n;return e.readOpt(t,i.FSize)&&(e.skip(4),n=this.read(e)),n}},VSizeOptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,i.VSize)&&(e.writeSize(this.minWireSize),this.write(e,n))},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainerOptHelper:function(e){this.writeOpt=function(t,n,r){if(void 0!==r&&t.writeOpt(n,i.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,i.VSize)&&this.write(e,n)},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(n=this.read(e)),n}}},r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var i=this.elementHelper;e.writeSize(t.length);for(var n=0;n<t.length;++n)i.write(e,t[n])}},read:function(e){var t=this.elementHelper,i=e.readAndCheckSeqSize(t.minWireSize),n=[];n.length=i;for(var r=0;r<i;++r)n[r]=t.read(e);return n},size:function(e){return null===e||void 0===e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),n.VSizeContainer1OptHelper.call(o);var s=function(e){var t=e.readAndCheckSeqSize(1),i=[];i.length=t;for(var n=this.elementType,r=function(t){e.readObject(function(e){i[t]=e},n)},o=0;o<t;++o)r(o);return i};n.generateSeqHelper=function(e,i,c){if(e===Ice.ByteHelper)return o;var a=new r;return i?1===e.minWireSize?n.VSizeContainer1OptHelper.call(a):n.VSizeContainerOptHelper.call(a,e.minWireSize):n.FSizeOptHelper.call(a),t(a,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(a,"elementType",{get:function(){return c}}),a.read=s),a};var c=e({write:function(e,t){if(null===t||void 0===t||0===t.size)e.writeSize(0);else{var i=this.keyHelper,n=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)i.write(e,r.key),n.write(e,r.value)}},read:function(e){for(var t=new(0,this.mapType),i=e.readSize(),n=this.keyHelper,r=this.valueHelper,o=0;o<i;++o)t.set(n.read(e),r.read(e));return t},size:function(e){return null===e||void 0===e?0:e.size}});Object.defineProperty(c.prototype,"minWireSize",{get:function(){return 1}});var a=function(e){for(var t=e.readSize(),i=new(0,this.mapType),n=this.valueType,r=function(t){e.readObject(function(e){i.set(t,e)},n)},o=this.keyHelper,s=0;s<t;++s)r(o.read(e));return i};n.generateDictHelper=function(e,i,r,o,s){var l=new c;return r?n.VSizeContainerOptHelper.call(l,e.minWireSize+i.minWireSize):n.FSizeOptHelper.call(l),t(l,"mapType",{get:function(){return s}}),t(l,"keyHelper",{get:function(){return e}}),t(l,"valueHelper",{get:function(){return i}}),i==Ice.ObjectHelper&&(t(l,"valueType",{get:function(){return o}}),l.read=a),l},Ice.StreamHelpers=n}(),function(){var e,t=Ice.HashMap,i=Number.MAX_SAFE_INTEGER||9007199254740991,n=new t,r={},o=0,s=function(){return o==i&&(o=0),o++};r.setTimeout=function(t,i){var r=s();return n.set(r,t),e.postMessage({type:0,id:r,ms:i}),r},r.clearTimeout=function(t){n.del(t),e.postMessage({type:3,id:t})},r.setInterval=function(t,i){var r=s();return n.set(r,t),e.postMessage({type:1,id:r,ms:i}),r},r.clearInterval=function(t){n.del(t),e.postMessage({type:4,id:t})},r.setImmediate=function(t){var i=s();return n.set(i,t),e.postMessage({type:2,id:i}),i},r.onmessage=function(e){var t;void 0!==(t=1===e.data.type?n.get(e.data.id):n.del(e.data.id))&&t.call()};var c,a;if(void 0===e)try{c=URL.createObjectURL(new Blob(["("+function(){var e={};self.onmessage=function(t){0==t.data.type?e[t.data.id]=setTimeout(function(){self.postMessage(t.data)},t.data.ms):1==t.data.type?e[t.data.id]=setInterval(function(){self.postMessage(t.data)},t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"],{type:"text/javascript"})),(e=new Worker(c)).onmessage=r.onmessage,Ice.Timer=r}catch(e){URL.revokeObjectURL(c),Ice.Timer=((a={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}}).setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},a)}}(),function(){var e=0,t=(0,Ice.Class)({__init__:function(){this.__address=e++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),i(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),n(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return t},equals:function(e){return this===e}});t.write=function(e,t){e.writeObject(t)},t.writeOpt=function(e,t,i){e.writeOptObject(t,i)},t.read=function(e){var i={value:null};return e.readObject(function(e){i.value=e},t),i},t.readOpt=function(e,i){var n={value:void 0};return e.readOptObject(i,function(e){n.value=e},t),n},t.ice_staticId=function(){return t.__id},t.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},t.__ids=["::Ice::Object"],t.__id=t.__ids[0],t.__compactId=-1,t.__preserved=!1;var i=function(e,n,r){void 0!==r&&r!==t&&(n.startWriteSlice(r.__id,r.__compactId,r.__parent===t),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,n),n.endWriteSlice(),i(e,n,r.__parent))},n=function(e,i,r){void 0!==r&&r!==t&&(i.startReadSlice(),r.prototype.__readMemberImpl&&r.prototype.__readMemberImpl.call(e,i),i.endReadSlice(),n(e,i,r.__parent))},r=function(e){e.startWriteObject(this.__slicedData),i(this,e,this.__mostDerivedType()),e.endWriteObject()},o=function(e){e.startReadObject(),n(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=t;var s=Ice.Slice;s.defineLocalObject=function(e,t){var i=e||function(){};return void 0!==t&&(i.prototype=new t,i.__parent=t,i.prototype.constructor=e),i},s.defineObject=function(e,i,n,s,c,a,l,d,u){var h=e||function(){};return h.prototype=new i,h.__parent=i,h.__ids=c,h.__id=c[s],h.__compactId=a,h.__instanceof=t.__instanceof,h.__implements=n,h.write=function(e,t){e.writeObject(t)},h.writeOpt=function(e,t,i){e.writeOptObject(t,i)},h.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},h),t},h.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,function(e){i.value=e},h),i},h.ice_staticId=function(){return c[s]},h.prototype.constructor=h,h.prototype.__mostDerivedType=function(){return h},u&&(h.prototype.__write=r,h.prototype.__read=o),h.prototype.__writeMemberImpl=l,h.prototype.__readMemberImpl=d,h}}(),a=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return void 0!==t&&null!==t&&(e=(e<<5)+e^a.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return void 0!==t&&null!==t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,i){if(void 0!==t&&null!==t)for(var n=0;n<t.length;++n)e=i(e,t[n]);return e}},l=Ice.ArrayUtil,d=l.eq,u=function(e){if(this===e)return!0;if(null===e||void 0===e)return!1;if(this.prototype!==e.prototype)return!1;var t,i;for(var n in this)if(t=this[n],i=e[n],"function"!=typeof t&&!d(t,i))return!1;return!0},h=function(){var e,t=new this.constructor;for(var i in this)if(void 0===(e=this[i])||null===e)t[i]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[i]=e.clone():e instanceof Array?t[i]=l.clone(e):t[i]=e}return t},p=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,p);var i=typeof t;return t instanceof String||"string"==i?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==i?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==i?Ice.HashUtil.addBoolean(e,t):void 0},f=function(){var e,t=5381;for(var i in this)void 0!==(e=this[i])&&null!==e&&"function"!=typeof e&&(t=p(t,e));return t},Ice.Slice.defineStruct=function(e,t,i,n,r,o){var s=e;return s.prototype.clone=h,s.prototype.equals=u,t&&(s.prototype.hashCode=f),n&&i&&(s.prototype.__write=i,s.prototype.__read=n,s.write=function(e,t){t||(s.prototype._nullMarshalValue||(s.prototype._nullMarshalValue=new this),t=s.prototype._nullMarshalValue),t.__write(e)},s.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(s,"minWireSize",{get:function(){return r}}),o?Ice.StreamHelpers.VSizeOptHelper.call(s):Ice.StreamHelpers.FSizeOptHelper.call(s)),s},Ice.CompactIdRegistry=new Ice.HashMap,Ii.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),Ii.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),Ii.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),Ii.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),Ii.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),Ii.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),Ii.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),Ii.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),Ii.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),Ii.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var i=new Uint8Array(this);t=void 0===t?i.length:t;for(var n=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=n.length;r<o;r++)n[r]=i[r+e];return n.buffer});var t="BufferOverflowException",i="BufferUnderflowException",n="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var i=new Uint8Array(t);i.set(new Uint8Array(this.b)),this.b=i.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(n);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(n);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var i=unescape(encodeURIComponent(t));e.writeSize(i.length),e.expand(i.length),this.putString(i,i.length)},putString:function(e,i){if(this._position+i>this._limit)throw new Error(t);for(var n=0;n<i;++n)this.v.setUint8(this._position,e.charCodeAt(n)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(i);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(n);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(i);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(i);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(i);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(i);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(i);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(i);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(i);var t=new e;return t.low=this.v.getUint32(this._position,!0),this._position+=4,t.high=this.v.getUint32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(i);for(var t=new DataView(this.b,this._position,e),n="",r=0;r<e;++r)n+=String.fromCharCode(t.getUint8(r));return this._position+=e,n=decodeURIComponent(escape(n))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=r}(),function(){var e=Ice.Buffer,t={},i="A".charCodeAt(0),n="a".charCodeAt(0),r="0".charCodeAt(0);function o(e){return e<26?String.fromCharCode(i+e):e<52?String.fromCharCode(n+(e-26)):e<62?String.fromCharCode(r+(e-52)):62==e?"+":"/"}function s(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-i:e>="a"&&e<="z"?e.charCodeAt(0)-n+26:e>="0"&&e<="9"?e.charCodeAt(0)-r+52:"+"==e?62:63}t.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,i,n,r,s,c,a,l=[],d=0;d<e.length;d+=3)t=255&e[d],i=0,n=0,d+1<e.length&&(i=255&e[d+1]),d+2<e.length&&(n=255&e[d+2]),r=t>>2&255,s=255&((3&t)<<4|i>>4),c=255&((15&i)<<2|n>>6),a=63&n,l.push(o(r)),l.push(o(s)),d+1<e.length?l.push(o(c)):l.push("="),d+2<e.length?l.push(o(a)):l.push("=");for(var u=l.join(""),h=[],p=0;u.length-p>76;)h.push(u.substring(p,p+76)),h.push("\r\n"),p+=76;return h.push(u.substring(p)),h.join("")},t.decode=function(i){for(var n=[],r=0;r<i.length;r++){var o=i.charAt(r);t.isBase64(o)&&n.push(o)}if(0===n.length)return null;var c,a,l,d,u,h,p,f,_=3*n.length/4+1,C=new e;C.resize(_);for(var m=0;m<n.length;m+=4)u="A",h="A",p="A",f="A",u=n[m],m+1<n.length&&(h=n[m+1]),m+2<n.length&&(p=n[m+2]),m+3<n.length&&(f=n[m+3]),c=255&s(u),a=255&s(h),l=255&s(p),d=255&s(f),C.put(c<<2|a>>4),"="!=p&&C.put((15&a)<<4|l>>2),"="!=f&&C.put((3&l)<<6|d);return C.remaining>0?C.getArrayAt(0,C.position):C.getArrayAt(0)},t.isBase64=function(e){return e>="A"&&e<="Z"||(e>="a"&&e<="z"||(e>="0"&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=t}(),Ice.Identity=Ii.defineStruct(function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""},!0,function(e){e.writeString(this.name),e.writeString(this.category)},function(e){this.name=e.readString(),this.category=e.readString()},2,!1),Ii.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),Ii.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=Ii.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),Ice.EncodingVersion=Ii.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,t=Ice.Debug,i=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,i){if(0===t)return i.value=!1,null;var n=this._adapterEndpointsTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.endpoints):(i.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new n(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,i){if(0===t)return i.value=!1,null;var n=this._objectTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.reference):(i.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,i){return t.assert(0!==i),i<0||Date.now()-e<=1e3*i}});Ice.LocatorTable=i;var n=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),_=Ice.Timer,C=0,m=1,g=2,y=function(e,t){var i=e.__state===m?t.onResponse:t.onException;try{if("function"!=typeof i)t.promise.setState(e.__state,e._args);else{var n=i.apply(null,e._args);n&&"function"==typeof n.then?n.then(function(){var e=arguments;t.promise.succeed.apply(t.promise,e)},function(){var e=arguments;t.promise.fail.apply(t.promise,e)}):t.promise.succeed(n)}}catch(e){t.promise.fail.call(t.promise,e)}},(v=Ice.Class({__init__:function(){this.__state=C,this.__listeners=[]},then:function(e,t){var i=new v,n=this;return _.setImmediate(function(){n.__listeners.push({promise:i,onResponse:e,onException:t}),n.resolve()}),i},exception:function(e){return this.then(null,e)},finally2:function(e){var t=new v,i=this,n=function(i){return function(){var n=arguments;try{var r=e.apply(null,n);if(r&&"function"==typeof r.then){var o=function(){i.apply(t,n)};r.then(o).exception(o)}else i.apply(t,n)}catch(e){i.apply(t,n)}}};return _.setImmediate(function(){i.then(n(t.succeed),n(t.fail))}),t},delay:function(e){var t=new v,i=this,n=function(t,i){return function(){var n=arguments;_.setTimeout(function(){i.apply(t,n)},e)}};return _.setImmediate(function(){i.then(n(t,t.succeed),n(t,t.fail))}),t},resolve:function(){if(this.__state!==C)for(var e;e=this.__listeners.pop();)y(this,e)},setState:function(e,t){if(this.__state===C&&e!==C){this.__state=e,this._args=t;var i=this;_.setImmediate(function(){i.resolve()})}},succeed:function(){var e=arguments;return this.setState(m,e),this},fail:function(){var e=arguments;return this.setState(g,e),this},succeeded:function(){return this.__state===m},failed:function(){return this.__state===g},completed:function(){return this.__state!==C}})).all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return v.all.apply(this,arguments[0]);var e=new v,t=Array.prototype.slice.call(arguments),i=new Array(arguments.length),n=t.length;0===n&&e.succeed.apply(e,i);for(var r=0;r<t.length;++r)!function(r){t[r]&&"function"==typeof t[r].then?t[r].then(function(){i[r]=arguments,0==--n&&e.succeed.apply(e,i)},function(){e.fail.apply(e,arguments)}):(i[r]=t[r],0==--n&&e.succeed.apply(e,i))}(r);return e},v.try2=function(e){return(new v).succeed().then(e)},v.delay=function(e){if(arguments.length>1){var t=new v,i=Array.prototype.slice.call(arguments);return e=i.pop(),t.succeed.apply(t,i).delay(e)}return(new v).succeed().delay(e)},Ice.Promise=v,I=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var i=[];new Date;i.push("-- "),i.push(this.timestamp()),i.push(" "),i.push(this._prefix),i.push(e),i.push(": "),i.push(t),this.write(i.join(""),!0)},warning:function(e){var t=[];new Date;t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date;t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new I(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),Cr.Utils.log(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=I,Ice.InitializationException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=Ii.defineLocalException(function(e,t,i){Ice.LocalException.call(this,i),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""},Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=Ii.defineLocalException(function(e,t,i){Ice.LocalException.call(this,i),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""},Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""},Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""},Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=Ii.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=Ii.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""},Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""},Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""},Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity},Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=Ii.defineLocalException(function(e,t,i,n){Ice.LocalException.call(this,n),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==i?i:""},Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=Ii.defineLocalException(function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)},Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=Ii.defineLocalException(function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)},Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=Ii.defineLocalException(function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)},Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0},Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=Ii.defineLocalException(function(e,t){Ice.SyscallException.call(this,e,t)},Ice.SyscallException,"Ice::SocketException"),Ice.FileException=Ii.defineLocalException(function(e,t,i){Ice.SyscallException.call(this,e,i),this.path=void 0!==t?t:""},Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=Ii.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=Ii.defineLocalException(function(e,t){Ice.ConnectFailedException.call(this,e,t)},Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=Ii.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=Ii.defineLocalException(function(e,t,i){Ice.LocalException.call(this,i),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""},Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=Ii.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=Ii.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=Ii.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=Ii.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=Ii.defineLocalException(function(e,t,i){Ice.ProtocolException.call(this,e,i),this.badMagic=void 0!==t?t:null},Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=Ii.defineLocalException(function(e,t,i,n){Ice.ProtocolException.call(this,e,n),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==i?i:new Ice.ProtocolVersion},Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=Ii.defineLocalException(function(e,t,i,n){Ice.ProtocolException.call(this,e,n),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==i?i:new Ice.EncodingVersion},Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=Ii.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=Ii.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=Ii.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=Ii.defineLocalException(function(e,t,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:""},Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=Ii.defineLocalException(function(e,t,i,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:"",this.expectedType=void 0!==i?i:""},Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=Ii.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=Ii.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=Ii.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""},Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=Ii.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=Ii.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::ResponseSentException"),function(){var e=Ice.StringUtil,t={};function i(t){var i=t.indexOf(".");if(-1===i)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,r=t.substring(0,i);try{n=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<1||n>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function n(t){var i=t.indexOf(".");if(-1===i)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,r=t.substring(i+1);try{n=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<0||n>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function r(e,t){return e+"."+t}Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),t.headerSize=14,t.magic=Ice.Buffer.createNative([73,99,101,80]),t.protocolMajor=1,t.protocolMinor=0,t.protocolEncodingMajor=1,t.protocolEncodingMinor=0,t.encodingMajor=1,t.encodingMinor=1,t.requestMsg=0,t.requestBatchMsg=1,t.replyMsg=2,t.validateConnectionMsg=3,t.closeConnectionMsg=4,t.replyOK=0,t.replyUserException=1,t.replyObjectNotExist=2,t.replyFacetNotExist=3,t.replyOperationNotExist=4,t.replyUnknownLocalException=5,t.replyUnknownUserException=6,t.replyUnknownException=7,t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]),t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]),t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]),t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor),t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor),t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor),t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)},t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)},t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)},t.getCompatibleProtocol=function(e){return e.major!==t.currentProtocol.major?e:e.minor<t.currentProtocol.minor?e:t.currentProtocol},t.getCompatibleEncoding=function(e){return e.major!==t.currentEncoding.major?e:e.minor<t.currentEncoding.minor?e:t.currentEncoding},t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(i(e),n(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(i(e),n(e))},Ice.protocolVersionToString=function(e){return r(e.major,e.minor)},Ice.encodingVersionToString=function(e){return r(e.major,e.minor)},Ice.Protocol=t}(),S=function(e,t,i){this._pattern=e,this._deprecated=t,this._deprecatedBy=i},Object.defineProperty(S.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(S.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(S.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=S,R={},E=Ice.Property,R.IceProps=[new E("/^Ice.ACM.Client/",!0,null),new E("/^Ice.ACM.Server/",!0,null),new E("/^Ice.ACM.Timeout/",!1,null),new E("/^Ice.ACM.Heartbeat/",!1,null),new E("/^Ice.ACM.Close/",!1,null),new E("/^Ice.ACM/",!1,null),new E("/^Ice.ACM.Client.Timeout/",!1,null),new E("/^Ice.ACM.Client.Heartbeat/",!1,null),new E("/^Ice.ACM.Client.Close/",!1,null),new E("/^Ice.ACM.Client/",!1,null),new E("/^Ice.ACM.Server.Timeout/",!1,null),new E("/^Ice.ACM.Server.Heartbeat/",!1,null),new E("/^Ice.ACM.Server.Close/",!1,null),new E("/^Ice.ACM.Server/",!1,null),new E("/^Ice.Admin.ACM.Timeout/",!1,null),new E("/^Ice.Admin.ACM.Heartbeat/",!1,null),new E("/^Ice.Admin.ACM.Close/",!1,null),new E("/^Ice.Admin.ACM/",!1,null),new E("/^Ice.Admin.AdapterId/",!1,null),new E("/^Ice.Admin.Endpoints/",!1,null),new E("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new E("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new E("/^Ice.Admin.Locator.PreferSecure/",!1,null),new E("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new E("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new E("/^Ice.Admin.Locator.Locator/",!1,null),new E("/^Ice.Admin.Locator.Router/",!1,null),new E("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new E("/^Ice.Admin.Locator.Context../",!1,null),new E("/^Ice.Admin.Locator/",!1,null),new E("/^Ice.Admin.PublishedEndpoints/",!1,null),new E("/^Ice.Admin.ReplicaGroupId/",!1,null),new E("/^Ice.Admin.Router.EndpointSelection/",!1,null),new E("/^Ice.Admin.Router.ConnectionCached/",!1,null),new E("/^Ice.Admin.Router.PreferSecure/",!1,null),new E("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new E("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new E("/^Ice.Admin.Router.Locator/",!1,null),new E("/^Ice.Admin.Router.Router/",!1,null),new E("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new E("/^Ice.Admin.Router.Context../",!1,null),new E("/^Ice.Admin.Router/",!1,null),new E("/^Ice.Admin.ProxyOptions/",!1,null),new E("/^Ice.Admin.ThreadPool.Size/",!1,null),new E("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new E("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new E("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new E("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new E("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new E("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new E("/^Ice.Admin.MessageSizeMax/",!1,null),new E("/^Ice.Admin.DelayCreation/",!1,null),new E("/^Ice.Admin.Enabled/",!1,null),new E("/^Ice.Admin.Facets/",!1,null),new E("/^Ice.Admin.InstanceName/",!1,null),new E("/^Ice.Admin.Logger.KeepLogs/",!1,null),new E("/^Ice.Admin.Logger.KeepTraces/",!1,null),new E("/^Ice.Admin.Logger.Properties/",!1,null),new E("/^Ice.Admin.ServerId/",!1,null),new E("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new E("/^Ice.BatchAutoFlush/",!0,null),new E("/^Ice.BatchAutoFlushSize/",!1,null),new E("/^Ice.ChangeUser/",!1,null),new E("/^Ice.ClientAccessPolicyProtocol/",!1,null),new E("/^Ice.Compression.Level/",!1,null),new E("/^Ice.CollectObjects/",!1,null),new E("/^Ice.Config/",!1,null),new E("/^Ice.ConsoleListener/",!1,null),new E("/^Ice.Default.CollocationOptimized/",!1,null),new E("/^Ice.Default.EncodingVersion/",!1,null),new E("/^Ice.Default.EndpointSelection/",!1,null),new E("/^Ice.Default.Host/",!1,null),new E("/^Ice.Default.Locator.EndpointSelection/",!1,null),new E("/^Ice.Default.Locator.ConnectionCached/",!1,null),new E("/^Ice.Default.Locator.PreferSecure/",!1,null),new E("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new E("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new E("/^Ice.Default.Locator.Locator/",!1,null),new E("/^Ice.Default.Locator.Router/",!1,null),new E("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new E("/^Ice.Default.Locator.Context../",!1,null),new E("/^Ice.Default.Locator/",!1,null),new E("/^Ice.Default.LocatorCacheTimeout/",!1,null),new E("/^Ice.Default.InvocationTimeout/",!1,null),new E("/^Ice.Default.Package/",!1,null),new E("/^Ice.Default.PreferSecure/",!1,null),new E("/^Ice.Default.Protocol/",!1,null),new E("/^Ice.Default.Router.EndpointSelection/",!1,null),new E("/^Ice.Default.Router.ConnectionCached/",!1,null),new E("/^Ice.Default.Router.PreferSecure/",!1,null),new E("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new E("/^Ice.Default.Router.InvocationTimeout/",!1,null),new E("/^Ice.Default.Router.Locator/",!1,null),new E("/^Ice.Default.Router.Router/",!1,null),new E("/^Ice.Default.Router.CollocationOptimized/",!1,null),new E("/^Ice.Default.Router.Context../",!1,null),new E("/^Ice.Default.Router/",!1,null),new E("/^Ice.Default.SlicedFormat/",!1,null),new E("/^Ice.Default.SourceAddress/",!1,null),new E("/^Ice.Default.Timeout/",!1,null),new E("/^Ice.EventLog.Source/",!1,null),new E("/^Ice.FactoryAssemblies/",!1,null),new E("/^Ice.HTTPProxyHost/",!1,null),new E("/^Ice.HTTPProxyPort/",!1,null),new E("/^Ice.ImplicitContext/",!1,null),new E("/^Ice.InitPlugins/",!1,null),new E("/^Ice.IPv4/",!1,null),new E("/^Ice.IPv6/",!1,null),new E("/^Ice.LogFile/",!1,null),new E("/^Ice.LogStdErr.Convert/",!1,null),new E("/^Ice.MessageSizeMax/",!1,null),new E("/^Ice.Nohup/",!1,null),new E("/^Ice.NullHandleAbort/",!1,null),new E("/^Ice.Override.CloseTimeout/",!1,null),new E("/^Ice.Override.Compress/",!1,null),new E("/^Ice.Override.ConnectTimeout/",!1,null),new E("/^Ice.Override.Timeout/",!1,null),new E("/^Ice.Override.Secure/",!1,null),new E("/^Ice.Package../",!1,null),new E("/^Ice.Plugin../",!1,null),new E("/^Ice.PluginLoadOrder/",!1,null),new E("/^Ice.PreferIPv6Address/",!1,null),new E("/^Ice.PrintAdapterReady/",!1,null),new E("/^Ice.PrintProcessId/",!1,null),new E("/^Ice.PrintStackTraces/",!1,null),new E("/^Ice.ProgramName/",!1,null),new E("/^Ice.RetryIntervals/",!1,null),new E("/^Ice.ServerIdleTime/",!1,null),new E("/^Ice.SOCKSProxyHost/",!1,null),new E("/^Ice.SOCKSProxyPort/",!1,null),new E("/^Ice.StdErr/",!1,null),new E("/^Ice.StdOut/",!1,null),new E("/^Ice.SyslogFacility/",!1,null),new E("/^Ice.ThreadPool.Client.Size/",!1,null),new E("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new E("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new E("/^Ice.ThreadPool.Client.StackSize/",!1,null),new E("/^Ice.ThreadPool.Client.Serialize/",!1,null),new E("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new E("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new E("/^Ice.ThreadPool.Server.Size/",!1,null),new E("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new E("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new E("/^Ice.ThreadPool.Server.StackSize/",!1,null),new E("/^Ice.ThreadPool.Server.Serialize/",!1,null),new E("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new E("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new E("/^Ice.ThreadPriority/",!1,null),new E("/^Ice.Trace.Admin.Properties/",!1,null),new E("/^Ice.Trace.Admin.Logger/",!1,null),new E("/^Ice.Trace.Locator/",!1,null),new E("/^Ice.Trace.Network/",!1,null),new E("/^Ice.Trace.Protocol/",!1,null),new E("/^Ice.Trace.Retry/",!1,null),new E("/^Ice.Trace.Slicing/",!1,null),new E("/^Ice.Trace.ThreadPool/",!1,null),new E("/^Ice.UDP.RcvSize/",!1,null),new E("/^Ice.UDP.SndSize/",!1,null),new E("/^Ice.TCP.Backlog/",!1,null),new E("/^Ice.TCP.RcvSize/",!1,null),new E("/^Ice.TCP.SndSize/",!1,null),new E("/^Ice.UseApplicationClassLoader/",!1,null),new E("/^Ice.UseSyslog/",!1,null),new E("/^Ice.Warn.AMICallback/",!1,null),new E("/^Ice.Warn.Connections/",!1,null),new E("/^Ice.Warn.Datagrams/",!1,null),new E("/^Ice.Warn.Dispatch/",!1,null),new E("/^Ice.Warn.Endpoints/",!1,null),new E("/^Ice.Warn.UnknownProperties/",!1,null),new E("/^Ice.Warn.UnusedProperties/",!1,null),new E("/^Ice.CacheMessageBuffers/",!1,null),new E("/^Ice.ThreadInterruptSafe/",!1,null),new E("/^Ice.Voip/",!1,null)],R.validProps=[R.IceProps],R.clPropNames=["Ice"],Ice.PropertyNames=R,w=Ice.HashMap,b=Ice.AlreadyRegisteredException,x=Ice.NotRegisteredException,P=Ice.Class({__init__:function(){this._factoryMap=new w},add:function(e,t){var i;if(void 0!==this._factoryMap.get(t))throw(i=new b).id=t,i.kindOfObject="object factory",i;this._factoryMap.set(t,e)},remove:function(e){var t,i;if(void 0===(t=this._factoryMap.get(e)))throw(i=new x).id=e,i.kindOfObject="object factory",i;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new w;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=P,O=Ice.Promise,T=Ice.Class(O,{__init__:function(e,t,i,n,r){O.call(this),void 0!==e&&(this._communicator=e,this._instance=null!==e?e.instance:null,this._operation=t,this._connection=i,this._proxy=n,this._adapter=r)}}),A=T.prototype,(M=Object.defineProperty)(A,"communicator",{get:function(){return this._communicator}}),M(A,"connection",{get:function(){return this._connection}}),M(A,"proxy",{get:function(){return this._proxy}}),M(A,"adapter",{get:function(){return this._adapter}}),M(A,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=T,Ii.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=Ii.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=Ii.defineStruct(function(e,t,i,n,r,o,s,c,a){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==i?i:new Ice.Identity,this.facet=void 0!==n?n:"",this.operation=void 0!==r?r:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==s?s:null,this.requestId=void 0!==c?c:0,this.encoding=void 0!==a?a:new Ice.EncodingVersion},!1),Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),k=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof k),this._ex=e._ex)}}),N=k.prototype,Object.defineProperty(N,"inner",{get:function(){return this._ex}}),Ice.RetryException=k,Ice.EndpointSelectionType=Ii.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var e=Ice.ReferenceMode,t=Ice.Class({__init__:function(t,i,n){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=i,this._compress=n},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.Protocol,n=Ice.StringUtil,r=Ice.OperationMode,o=Ice.Identity,s={traceSend:function(e,t,i){if(i.protocol>=1){var n=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(i.protocolCat,"sending "+d(o)+" "+r.join("")),e.pos=n}},traceRecv:function(e,t,i){if(i.protocol>=1){var n=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(i.protocolCat,"received "+d(o)+" "+r.join("")),e.pos=n}},trace:function(e,t,i,n){if(n.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),l(o,t),i.trace(n.protocolCat,o.join("")),t.pos=r}}};new t;function c(e,t){var i=new o;i.__read(t),e.push("\nidentity = "+t.instance.identityToString(i));var r=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),r.length>0&&e.push(n.escapeString(r[0],""));var s=t.readString();e.push("\noperation = "+s)}function a(e,t){c(e,t);var i=t.readByte();switch(e.push("\nmode = "+i+" "),r.valueOf(i)){case r.Normal:e.push("(normal)");break;case r.Nonmutating:e.push("(nonmutating)");break;case r.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var n=t.readSize();for(e.push("\ncontext = ");n-- >0;){var o=t.readString(),s=t.readString();e.push(o+"/"+s),n>0&&e.push(", ")}var a=t.skipEncaps();a.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(a)))}function l(t,n){var r,o,s,l=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var i=t.readByte();e.push("\nmessage type = "+i+" ("+d(i)+")");var n=t.readByte();switch(e.push("\ncompression status = "+n+" "),n){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),i}(t,n);switch(l){case i.closeConnectionMsg:case i.validateConnectionMsg:break;case i.requestMsg:r=t,s=(o=n).readInt(),r.push("\nrequest id = "+s),0===s&&r.push(" (oneway)"),a(r,o);break;case i.requestBatchMsg:!function(e,t){var i=t.readInt();e.push("\nnumber of requests = "+i);for(var n=0;n<i;++n)e.push("\nrequest #"+n+":"),a(e,t)}(t,n);break;case i.replyMsg:!function(t,n){var r=n.readInt();t.push("\nrequest id = "+r);var o=n.readByte();switch(t.push("\nreply status = "+o+" "),o){case i.replyOK:t.push("(ok)");break;case i.replyUserException:t.push("(user exception)");break;case i.replyObjectNotExist:case i.replyFacetNotExist:case i.replyOperationNotExist:switch(o){case i.replyObjectNotExist:t.push("(object not exist)");break;case i.replyFacetNotExist:t.push("(facet not exist)");break;case i.replyOperationNotExist:t.push("(operation not exist)");break;default:e.assert(!1)}c(t,n);break;case i.replyUnknownException:case i.replyUnknownLocalException:case i.replyUnknownUserException:switch(o){case i.replyUnknownException:t.push("(unknown exception)");break;case i.replyUnknownLocalException:t.push("(unknown local exception)");break;case i.replyUnknownUserException:t.push("(unknown user exception)");break;default:e.assert(!1)}var s=n.readString();t.push("\nunknown = "+s);break;default:t.push("(unknown)")}if(o===i.replyOK||o===i.replyUserException){var a=n.skipEncaps();a.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(a)))}}(t,n)}return l}function d(e){switch(e){case i.requestMsg:return"request";case i.requestBatchMsg:return"batch request";case i.replyMsg:return"reply";case i.closeConnectionMsg:return"close connection";case i.validateConnectionMsg:return"validate connection";default:return"unknown"}}s.dumpStream=function(e){var t=e.pos;e.pos=0;var i=e.readBlob(e.size());s.dumpOctets(i),e.pos=t},s.dumpOctets=function(e){for(var t=[],i=0;i<e.length;i+=8){var n;for(n=i;n-i<8;n++)if(n<e.length){var r,o=e[n];o<0&&(o+=256),r=o<10?"  "+o:o<100?" "+o:""+o,t.push(r+" ")}else t.push("    ");for(t.push('"'),n=i;n<e.length&&n-i<8;n++)e[n]>=32&&e[n]<127?t.push(String.fromCharCode(e[n])):t.push(".");t.push('"\n')}Cr.Utils.log(t.join(""))},Ice.TraceUtil=s}(),D=Ice.Logger,V=null,Ice.getProcessLogger=function(){return null===V&&(V=new D("","")),V},Ice.setProcessLogger=function(e){V=e},L=Ice.UnexpectedObjectException,U=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var i=t.ice_id();throw new L("expected element of type `"+e+"' but received '"+i,i,e)},throwMemoryLimitException:function(e,t){throw new U("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},F=Ice.StringUtil,j=Ice.HashMap,Ice.Promise,B=Ice.PropertyNames,H=Ice.Debug,Ice.ProcessLogger,q=Ice.getProcessLogger,z=Ice.InitializationException,(W=Ice.Class({__init__:function(e,t){if(this._properties=new j,void 0!==t&&null!==t)for(var i=t._properties.entries;null!==i;i=i.next)this._properties.set(i.key,{value:i.value.value,used:!1});if(void 0!==e&&null!==e){var n=this.parseIceCommandLineOptions(e);e.length=0;for(var r=0;r<n.length;++r)e.push(n[r])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var i=this._properties.get(e);return void 0!==i?(i.used=!0,i.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var i=this._properties.get(e);return void 0!==i?(i.used=!0,parseInt(i.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(e,t){void 0!==t&&null!==t||(t=[]);var i=this._properties.get(e);if(void 0!==i){i.used=!0;var n=F.splitString(i.value,", \t\r\n");return null===n?(q().warning("mismatched quotes in property "+e+"'s value, returning default value"),t):(0===n.length&&(n=t),n)}return t},getPropertiesForPrefix:function(e){for(var t=new j,i=this._properties.entries;null!==i;i=i.next)void 0!==e&&null!==e&&0!==i.key.indexOf(e)||(i.value.used=!0,t.set(i.key,i.value.value));return t},setProperty:function(e,t){null!==e&&void 0!==e&&(e=e.trim());var i=q();if(null===e||void 0===e||0===e.length)throw new z("Attempt to set property with empty key");var n=e.indexOf(".");if(-1!==n)for(var r=e.substr(0,n),o=0;o<B.validProps.length;++o){var s=B.validProps[o][0].pattern;if(n=s.indexOf("."),H.assert(-1!=n),s.substring(0,n-1)==r){for(var c,a=!1,l=!1,d=0;d<B.validProps[o][d].length&&!a;++d){s=B.validProps[o][d].pattern();var u=new RegExp(s);if((a=u.test(e))&&B.validProps[o][d].deprecated&&(i.warning("deprecated property: "+e),null!==B.validProps[o][d].deprecatedBy&&(e=B.validProps[o][d].deprecatedBy)),a)break;if(a=(u=new RegExp(s.toUpperCase())).test(e.toUpperCase())){l=!0,c=(c=(c=s.substr(2)).substr(0,c.length-1)).replace(/\\/g,"");break}}a?l&&i.warning("unknown property: `"+e+"'; did you mean `"+c+"'"):i.warning("unknown property: "+e)}}if(void 0!==t&&null!==t&&t.length>0){var h=this._properties.get(e);void 0!==h?h.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var i=[],n=this;return t.forEach(function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),n.parseLine(t.substring(2))):i.push(t)}),i},parseIceCommandLineOptions:function(e){for(var t=e.slice(),i=0;i<B.clPropNames.length;++i)t=this.parseCommandLineOptions(B.clPropNames[i],t);return t},parse:function(e){for(var t,i=e.match(/[^\r\n]+/g);t=i.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",i="",n=0,r="",o="",s=!1,c=0;c<e.length;++c){var a=e.charAt(c);switch(n){case 0:switch(a){case"\\":if(c<e.length-1)switch(a=e.charAt(++c)){case"\\":case"#":case"=":t+=r,r="",t+=a;break;case" ":0!==t.length&&(r+=a);break;default:t+=r,r="",t+="\\",t+=a}else t+=r,t+=a;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(r+=a);break;case"=":r="",n=1;break;case"#":s=!0;break;default:t+=r,r="",t+=a}break;case 1:switch(a){case"\\":if(c<e.length-1)switch(a=e.charAt(++c)){case"\\":case"#":case"=":i+=0===i.length?o:r,r="",o="",i+=a;break;case" ":r+=a,o+=a;break;default:i+=0===i.length?o:r,r="",o="",i+="\\",i+=a}else i+=0===i.length?o:r,i+=a;break;case" ":case"\t":case"\r":case"\n":0!==i.length&&(r+=a);break;case"#":s=!0;break;default:i+=0===i.length?o:r,r="",o="",i+=a}}if(s)break}i+=o,0===n&&0!==t.length||1==n&&0===t.length?q().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,i)},clone:function(){return new W(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}})).createProperties=function(e,t){return new W(e,t)},Ice.Properties=W,G=Ice.Debug,Q=Ice.HashMap,X=Ice.StringUtil,K=Ice.Class({__init__:function(e,t){this._instance=e,this._adapterName=t,this._servantMapMap=new Q(Q.compareEquals),this._defaultServantMap=new Q,this._locatorMap=new Q},addServant:function(e,t,i){G.assert(null!==this._instance),null===i&&(i="");var n=this._servantMapMap.get(t);if(void 0===n)n=new Q,this._servantMapMap.set(t,n);else if(n.has(i)){var r=new Ice.AlreadyRegisteredException;throw r.id=this._instance.identityToString(t),r.kindOfObject="servant",i.length>0&&(r.id+=" -f "+X.escapeString(i,"")),r}n.set(i,e)},addDefaultServant:function(e,t){if(G.assert(null!==this._instance),void 0!==this._defaultServantMap.get(t)){var i=new Ice.AlreadyRegisteredException;throw i.kindOfObject="default servant",i.id=t,i}this._defaultServantMap.set(t,e)},removeServant:function(e,t){G.assert(null!==this._instance),null===t&&(t="");var i=this._servantMapMap.get(e);if(void 0===i||!i.has(t)){var n=new Ice.NotRegisteredException;throw n.id=this._instance.identityToString(e),n.kindOfObject="servant",t.length>0&&(n.id+=" -f "+X.escapeString(t,"")),n}var r=i.get(t);return i.del(t),0===i.size&&this._servantMapMap.del(e),r},removeDefaultServant:function(e){G.assert(null!==this._instance);var t=this._defaultServantMap.get(e);if(void 0===t){var i=new Ice.NotRegisteredException;throw i.kindOfObject="default servant",i.id=e,i}return this._defaultServantMap.del(e),t},removeAllFacets:function(e){G.assert(null!==this._instance);var t=this._servantMapMap.get(e);if(void 0===t){var i=new Ice.NotRegisteredException;throw i.id=this._instance.identityToString(e),i.kindOfObject="servant",i}return this._servantMapMap.del(e),t},findServant:function(e,t){null===t&&(t="");var i=this._servantMapMap.get(e),n=null;return void 0===i?void 0===(n=this._defaultServantMap.get(e.category))&&(n=this._defaultServantMap.get("")):n=i.get(t),void 0===n?null:n},findDefaultServant:function(e){G.assert(null!==this._instance);var t=this._defaultServantMap.get(e);return void 0===t?null:t},findAllFacets:function(e){G.assert(null!==this._instance);var t=this._servantMapMap.get(e);return void 0!==t?t.clone():new Q},hasServant:function(e){var t=this._servantMapMap.get(e);return void 0!==t&&(G.assert(t.size>0),!0)},addServantLocator:function(e,t){if(G.assert(null!==this._instance),void 0!==this._locatorMap.get(t)){var i=new Ice.AlreadyRegisteredException;throw i.id=X.escapeString(t,""),i.kindOfObject="servant locator",i}this._locatorMap.set(t,e)},removeServantLocator:function(e){G.assert(null!==this._instance);var t=this._locatorMap.get(e);if(void 0===t){var i=new Ice.NotRegisteredException;throw i.id=X.escapeString(e,""),i.kindOfObject="servant locator",i}return this._locatorMap.del(e),t},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){G.assert(null!==this._instance);var e=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var t=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var i=t.entries;null!==i;i=i.next){var n=i.value;try{n.deactivate(i.key)}catch(t){var r="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+i.key+"'\n"+t.toString();e.error(r)}}}}),Ice.ServantManager=K,function(){var e=Ice.__M,t=Ice.Debug,i=Ice.ExUtil,n=Ice.FormatType,r=Ice.HashMap,o=Ice.Object,s=Ice.OptionalFormat,c=Ice.Protocol,a=Ice.TraceUtil,l=Ice.ArrayUtil,d=Ice.SlicedData,u={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};var h=Ice.Class,p=h({__init__:function(e,t,i,n){this._stream=e,this._encaps=t,this._sliceObjects=i,this._servantFactoryManager=n,this._patchMap=null,this._unmarshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,i;if(null===this._typeIdMap&&(this._typeIdMap=new r),e){if(i=this._stream.readSize(),void 0===(t=this._typeIdMap.get(i)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),i=null;return void 0!==t&&(i=t.create(e)),null!==i&&void 0!==i||void 0!==(t=this._servantFactoryManager.find(""))&&(i=t.create(e)),null!==i&&void 0!==i||(i=this._stream.createObject(e)),i},addPatchEntry:function(e,i){t.assert(e>0);var n=this._unmarshaledMap.get(e);if(void 0===n||null===n){null===this._patchMap&&(this._patchMap=new r);var o=this._patchMap.get(e);void 0===o&&(o=[],this._patchMap.set(e,o)),o.push(i)}else i.call(null,n)},unmarshal:function(e,i){var n,r,o;if(this._unmarshaledMap.set(e,i),i.__read(this._stream),null!==this._patchMap&&void 0!==(o=this._patchMap.get(e))){for(t.assert(o.length>0),n=0,r=o.length;n<r;++n)o[n](i);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(i),null===this._patchMap||0===this._patchMap.size){for(n=0,r=this._objectList.length;n<r;n++)try{this._objectList[n].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{i.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),f=h(p,{__init__:function(e,t,i,n){p.call(this,e,t,i,n),this._sliceType=u.NoSlice},readObject:function(e){t.assert(null!==e);var i=this._stream.readInt();if(i>0)throw new Ice.MarshalException("invalid object id");0===(i=-i)?e.call(null,null):this.addPatchEntry(i,e)},throwException:function(){t.assert(this._sliceType===u.NoSlice);var e=this._stream.readBool();this._sliceType=u.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var i=this._typeId;;){var n=this._stream.createUserException(this._typeId);if(null!==n)throw n.__read(this._stream),e&&this.readPendingObjects(),n;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+i+"'"),e}}},startInstance:function(e){t.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===u.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=u.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===u.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===u.ObjectSlice?a.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):a.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}t.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();e>0;--e)this.readInstance()}while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),i=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=u.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==o.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(i=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,i)}}),_=h(p,{__init__:function(e,t,i,n){p.call(this,e,t,i,n),this._current=null,this._objectIdIndex=1},readObject:function(e){t.assert(void 0!==e);var i=this._stream.readSize();if(i<0)throw new Ice.MarshalException("invalid object id");if(0===i)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var n=new function(e,t){this.index=e,this.patcher=t};n.index=i-1,n.patcher=e,this._current.indirectPatchList.push(n)}}else this.readInstance(i,e)},throwException:function(){t.assert(null===this._current),this.push(u.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var i=this._stream.createUserException(this._current.typeId);if(null!==i)throw i.__read(this._stream),i;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(void 0!==e),t.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===u.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!=(3&this._current.sliceFlags)?(this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,i,n,r=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(n=this._stream.readAndCheckSeqSize(1),i=0;i<n;++i)r[i]=this.readInstance(this._stream.readSize(),null);if(0===r.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(i=0,n=this._current.indirectPatchList.length;i<n;++i){if(e=this._current.indirectPatchList[i],t.assert(e.index>=0),e.index>=r.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(r[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,i=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===u.ExceptionSlice?a.traceSlicing("exception",this._current.typeId,i,e):a.traceSlicing("object",this._current.typeId,i,e)}var n=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===u.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}t.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var r=new Ice.SliceInfo;r.typeId=this._current.typeId,r.compactId=this._current.compactId,r.hasOptionalMembers=0!=(4&this._current.sliceFlags),r.isLastSlice=0!=(32&this._current.sliceFlags);var o=this._stream._buf,s=o.position,c=s;if(r.hasOptionalMembers&&--c,o.position=n,r.bytes=o.getArray(c-n),o.position=s,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var l=this._stream.readAndCheckSeqSize(1),d=[],h=0;h<l;++h)d[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(d)}else this._current.indirectionTables.push(null);this._current.slices.push(r)},readOpt:function(e,t){return null===this._current?this._stream.readOptImpl(e,t):0!=(4&this._current.sliceFlags)&&this._stream.readOptImpl(e,t)},readInstance:function(e,i){t.assert(e>0);var n,r=null;if(e>1)return null!==i&&this.addPatchEntry(e,i),e;for(this.push(u.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),n=this._current.typeId;this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(this._current.typeId.length>0&&null!==(r=this.newInstance(this._current.typeId))&&void 0!==r);){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){r=new Ice.UnknownSlicedObject(n);break}this.startSlice()}if(this.unmarshal(e,r),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==i&&i.call(null,r),e},readSlicedData:function(){var e,i,n,r,s,c;if(null===this._current.slices)return null;for(t.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,i=this._current.slices.length;e<i;++e)for(n=this._current.indirectionTables[e],(r=this._current.slices[e]).objects=[],c=n?n.length:0,s=0;s<c;++s)this.addPatchEntry(n[s],C(r.objects,s,o));return new d(l.clone(this._current.slices))},push:function(e){null===this._current?this._current=new _.InstanceData(null):this._current=this._current.next?this._current.next:new _.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});_.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var C=function(e,t,n){return function(r){null===r||r instanceof n||i.throwUOE(n.ice_staticId(),r),e[t]=r}},m=h({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new r);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),g=h(m,{__init__:function(e,t){m.call(this,e,t),this._sliceType=u.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new r},writeObject:function(e){t.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){t.assert(null!==e&&void 0!==e);var i=e.__usesClasses();this._stream.writeBool(i),e.__write(this._stream),i&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===u.ObjectSlice&&(this.startSlice(o.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=u.NoSlice},startSlice:function(e){if(this._sliceType===u.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,i=function(e,i){t._stream.writeInt(i);try{e.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new r,this._stream.writeSize(e.size),e.forEach(i);this._stream.writeSize(0)},registerObject:function(e){t.assert(null!==e);var i=this._toBeMarshaledMap.get(e);return void 0!==i?i:void 0!==(i=this._marshaledMap.get(e))?i:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),y=h(m,{__init__:function(e,t){m.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var i,o;t.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===n.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),void 0===(i=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),o=this._current.indirectionTable.length,this._current.indirectionMap.set(e,o),this._stream.writeSize(o)):this._stream.writeSize(i)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){t.assert(null!==e&&void 0!==e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new y.InstanceData(null):this._current=null===this._current.next?new y.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!==t&&void 0!==t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,i,r){if(t.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===n.SlicedFormat&&(this._current.sliceFlags|=16),r&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===u.ObjectSlice){if(this._encaps.format===n.SlicedFormat||this._current.firstSlice)if(i>=0)this._current.sliceFlags|=3,this._stream.writeSize(i);else{var o=this.registerTypeId(e);o<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(o))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,i,r;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(t.assert(this._encaps.format===n.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),i=0,r=this._current.indirectionTable.length;i<r;++i)this.writeInstance(this._current.indirectionTable[i]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var i,o,s,c,a;if(t.assert(null!==e&&void 0!==e),this._encaps.format===n.SlicedFormat)for(i=0,o=e.slices.length;i<o;++i){if(s=e.slices[i],this.startSlice(s.typeId,s.compactId,s.isLastSlice),this._stream.writeBlob(s.bytes),s.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==s.objects&&s.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),c=0,a=s.objects.length;c<a;++c)this._current.indirectionTable.push(s.objects[c]);this.endSlice()}},writeInstance:function(e){t.assert(null!==e&&void 0!==e);var i=this._marshaledMap.get(e);if(void 0===i){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(i)}});y.InstanceData=function(e){t.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var v=h({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),I=h({__init__:function(){this.start=0,this.format=n.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),S=h({__init__:function(e,t,i){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==i?new Ice.Buffer(i):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(t.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(t.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var i,n,r,o,s;t.assert(this._instance===e._instance),i=e._buf,e._buf=this._buf,this._buf=i,n=e._closure,e._closure=this._closure,this._closure=n,this.resetEncaps(),e.resetEncaps(),r=e._startSeq,e._startSeq=this._startSeq,this._startSeq=r,o=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=o,s=e._sizePos,e._sizePos=this._sizePos,this._sizePos=s},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ObjectSlice,e)},endWriteObject:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ObjectSlice)},endReadObject:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ExceptionSlice,e)},endWriteException:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ExceptionSlice)},endReadException:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=n.DefaultFormat)),c.checkSupportedEncoding(e);var i=this._writeEncapsCache;null!==i?(i.reset(),this._writeEncapsCache=this._writeEncapsCache.next):i=new I,i.next=this._writeEncapsStack,this._writeEncapsStack=i,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,i=this._buf.limit-e;this._buf.putIntAt(e,i);var n=this._writeEncapsStack;this._writeEncapsStack=n.next,n.next=this._writeEncapsCache,this._writeEncapsCache=n,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){c.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new v,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var i=new Ice.EncodingVersion;return i.__read(this),c.checkSupportedEncoding(i),this._readEncapsStack.setEncoding(i),i},endReadEncaps:function(){if(t.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(t.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var i=this._buf.position;if(i+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=i+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){t.assert(void 0!==e);var i=this.readInt();if(i<6)throw new Ice.UnmarshalOutOfBoundsException;if(i-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(i)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return t.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,i,n){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,i,n)},endWriteSlice:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){t.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,i){return t.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,i):this.writeOptImpl(e,i)},readOpt:function(e,i){return t.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,i):this.readOptImpl(e,i)},writeOptValue:function(e,t,i,n){void 0!==n&&this.writeOpt(e,t)&&i.call(this,n)},readOptValue:function(e,t,i){return this.readOpt(e,t)?i.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null===e||void 0===e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,s.FSize)){var i=this.startSize();this.writeProxy(t),this.endSize(i)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,s.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var i=e.valueOf(t);if(void 0===i)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return i},readOptEnum:function(e,t){return this.readOpt(e,s.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,s.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,function(n){null===n||n.ice_instanceof(t)||i.throwUOE(t.ice_staticId(),n),e(n)})},readOptObject:function(e,t,i){this.readOpt(e,s.Class)?this.readObject(t,i):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var i,n,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(i=this.readByte()))return this._buf.position-=1,!1;if(n=s.valueOf(7&i),30===(r=i>>3)&&(r=this.readSize()),r>e)return o=r<30?1:r<255?2:6,this._buf.position-=o,!1;if(!(r<e)){if(n!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(n)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var i=t.value;return e<30?(i|=e<<3,this.writeByte(i)):(i|=240,this.writeByte(i),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case s.F1:this.skip(1);break;case s.F2:this.skip(2);break;case s.F4:this.skip(4);break;case s.F8:this.skip(8);break;case s.Size:this.skipSize();break;case s.VSize:this.skip(this.readSize());break;case s.FSize:this.skip(this.readInt());break;case s.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,i;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;i=s.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(i)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var i,n=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(i=e.type(r))&&(n=new i)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return n},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new v,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new f(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new _(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new I,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===n.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new g(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new y(this,this._writeEncapsStack))},createUserException:function(t){var i,n=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(i=e.type(r))&&(n=new i)}catch(e){throw new Ice.MarshalException(e)}return n}}),R=Object.defineProperty;R(S.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),R(S.prototype,"size",{get:function(){return this._buf.limit}}),R(S.prototype,"instance",{get:function(){return this._instance}}),R(S.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),R(S.prototype,"buffer",{get:function(){return this._buf}});var E=function(e,t,i,n,r,o){var s={write:function(t,i){return e.call(t,i)},read:function(e){return t.call(e)},writeOpt:function(t,i,r){t.writeOptValue(i,n,e,r)},readOpt:function(e,i){return e.readOptValue(i,n,t)}};return void 0!==r&&void 0!==o&&(s.validate=function(e){return e>=r&&e<=o}),R(s,"minWireSize",{get:function(){return i}}),s},w=S.prototype,b=4294967295,x=-3.4028234664e38,P=3.4028234664e38;Ice.ByteHelper=E(w.writeByte,w.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=E(w.writeShort,w.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=E(w.writeInt,w.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=E(w.writeFloat,w.readFloat,4,Ice.OptionalFormat.F4,x,P),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=x&&e<=P},Ice.DoubleHelper=E(w.writeDouble,w.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=E(w.writeBool,w.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=E(w.writeLong,w.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return e.low>=0&&e.low<=b&&e.high>=0&&e.high<=b},Ice.StringHelper=E(w.writeString,w.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject(function(e){t=e},Ice.Object),t},writeOpt:function(e,t,i){e.writeOptValue(t,Ice.OptionalFormat.Class,w.writeObject,i)},readOpt:function(e,t){var i;return e.readOptObject(t,function(e){i=e},Ice.Object),i}},R(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=S}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},Y=Ice.Class({__init__:function(e,t,i,n){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=i,this._secure=n},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=Y,Ii.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),J=Ice.AsyncResultBase,Z=Ice.Debug,Ice.Promise,$=Ice.Protocol,ee=Ice.UserException,te=Ice.BasicStream,(ie=Ice.Class(J,{__init__:function(e,t,i,n,r,o){J.call(this,e,t,i,n,r),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new te(this._instance,$.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&ie.Done)>0},isSent:function(){return(this._state&ie.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){Z.assert(0==(this._state&ie.Done)),this._state|=ie.Sent,e&&(this._state|=ie.Done|ie.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){Z.assert(0==(this._state&ie.Done)),this._state|=ie.Done,e&&(this._state|=ie.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){Z.assert(0==(this._state&ie.Done)),this._exception=e,this._state|=ie.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(Z.assert(0!=(this._state&ie.Done)),0==(this._state&ie.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof ee&&this._is.endReadEncaps(),e}}})).OK=1,ie.Done=2,ie.Sent=4,Ice.AsyncResult=ie,Ice.Address=function(e,t){this.host=e,this.port=t},ne=Ice.BasicStream,re=Ice.Debug,Ice.ExUtil,oe=Ice.Class,se=Ice.Protocol,ce=oe({__init__:function(e,t){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new ne(e,se.currentProtocolEncoding),this._batchStream.writeBlob(se.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=e.batchAutoFlushSize(),this._maxSize>0&&t){var i=e.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);i<this._maxSize&&(this._maxSize=i)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,t,i){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&t.ice_flushBatchRequests(),re.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var i=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(i),this._batchStream.resize(this._batchMarker)}var n=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(se.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),n},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===se.requestBatchHdr.length}}),Ice.BatchRequestQueue=ce,ae=Ice.HashMap,le=Ice.CommunicatorDestroyedException,(de=Ice.Class({__init__:function(e){this._logger=e,this._destroyed=!1,this._tokenId=0,this._tokens=new ae},destroy:function(){var e=this;this._tokens.forEach(function(t,i){e.cancel(t)}),this._destroyed=!0,this._tokens.clear()},schedule:function(e,t){if(this._destroyed)throw new le;var i=this._tokenId++,n=this,r=de.setTimeout(function(){n.handleTimeout(i)},t);return this._tokens.set(i,{callback:e,id:r,isInterval:!1}),i},scheduleRepeated:function(e,t){if(this._destroyed)throw new le;var i=this._tokenId++,n=this,r=de.setInterval(function(){n.handleInterval(i)},t);return this._tokens.set(i,{callback:e,id:r,isInterval:!0}),i},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?de.clearInterval(t.id):de.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}})).setTimeout=Ice.Timer.setTimeout,de.clearTimeout=Ice.Timer.clearTimeout,de.setInterval=Ice.Timer.setInterval,de.clearInterval=Ice.Timer.clearInterval,de.setImmediate=Ice.Timer.setImmediate,Ice.Timer=de,function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var n=new i(this._instance,this,e);e.__cancelable(n),n.token=this._instance.timer().schedule(function(){n.run()},t),this._requests.push(n)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var i=e({__init__:function(e,t,i,n){this._instance=e,this._queue=t,this._outAsync=i},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),ue=Ice.ArrayUtil,he=Ice.Debug,pe=Ice.HashMap,fe=Ice.Promise,_e=Ice.Class({__init__:function(e){this._router=e,he.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new pe(pe.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof _e&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new fe;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then(function(i){t.setClientEndpoints(i,e)}).exception(function(t){e.fail(t)})}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new fe).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then(function(t){return e.setServerEndpoints(t)})},addProxy:function(e){if(he.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new fe).succeed();var t=this;return this._router.addProxies([e]).then(function(i){t.addAndEvictProxies(e,i)})},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var i=this;this._router.ice_getConnection().then(function(n){var r=e.ice_timeout(n.timeout());i._clientEndpoints=r.__reference().getEndpoints(),t.succeed(i._clientEndpoints)}).exception(function(e){t.fail(e)})}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(e,t){var i=ue.indexOf(this._evictedIdentities,e.ice_getIdentity(),function(e,t){return e.equals(t)});i>=0?this._evictedIdentities.splice(i,1):this._identities.set(e.ice_getIdentity(),1);for(var n=0;n<t.length;++n)this._identities.del(t[n].ice_getIdentity())}}),Ice.RouterInfo=_e,function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,i=Ice.BasicStream,n=Ice.Debug,r=Ice.HashMap,o=Ice.RetryException,s=(Ice.OperationMode,Ice.Protocol),c=Ice.Identity,a=Ice.Class(t,{__init__:function(e,n,r,o,c){void 0!==e?(t.call(this,e,n,r,o,c),this._os=new i(this._instance,s.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),l=Ice.Class(a,{__init__:function(e,i){void 0!==e?(a.call(this,e.ice_getCommunicator(),i,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var i=this._proxy.__reference().getInvocationTimeout();if(i>0){var n=this;this._timeoutToken=this._instance.timer().schedule(function(){n.__cancel(new Ice.InvocationTimeoutException)},i)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void((this._handler.sendAsyncRequest(this)&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(e){if(e instanceof o)this._proxy.__updateRequestHandler(this._handler,null);else{var r=this.__handleException(e);if(r>0)return void this._instance.retryQueue().add(this,r)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),a.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),a.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),d=Ice.Class(l,{__init__:function(e,t,i){void 0!==e?(l.call(this,e,t),this._encoding=s.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=i):l.call(this)},__prepare:function(e,t,i){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===i&&(i=d._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(s.requestHdr);var n=this._proxy.__reference();n.getIdentity().__write(this._os);var o=n.getFacet();if(null===o||0===o.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[o]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==i){if(null!==i&&!(i instanceof r))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,i)}else{var c=n.getInstance().getImplicitContext(),a=n.getContext();null===c?Ice.ContextHelper.write(this._os,a):c.write(a,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,i){return e.sendAsyncRequest(this,t,i,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;n.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new i(this._instance,s.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case s.replyOK:case s.replyUserException:break;case s.replyObjectNotExist:case s.replyFacetNotExist:case s.replyOperationNotExist:var r=new c;r.__read(this._is);var o,a=Ice.StringSeqHelper.read(this._is);if(a.length>0){if(a.length>1)throw new Ice.MarshalException;o=a[0]}else o="";var l=this._is.readString(),d=null;switch(t){case s.replyObjectNotExist:d=new Ice.ObjectNotExistException;break;case s.replyFacetNotExist:d=new Ice.FacetNotExistException;break;case s.replyOperationNotExist:d=new Ice.OperationNotExistException;break;default:n.assert(!1)}throw d.id=r,d.facet=o,d.operation=l,d;case s.replyUnknownException:case s.replyUnknownLocalException:case s.replyUnknownUserException:var u=this._is.readString(),h=null;switch(t){case s.replyUnknownException:h=new Ice.UnknownException;break;case s.replyUnknownLocalException:h=new Ice.UnknownLocalException;break;case s.replyUnknownUserException:h=new Ice.UnknownUserException;break;default:n.assert(!1)}throw h.unknown=u,h;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==s.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(n.assert(0!=(this._state&t.Done)),0==(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});d._emptyContext=new r;var u=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,i,n){return 0===this._batchRequestNum?(this.__sent(),e.Sent):t.sendAsyncRequest(this,i,n,this._batchRequestNum)},__invoke:function(){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),h=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,i,n){return this.__markFinished(!0,function(e){e.succeed(t)}),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),p=Ice.Class(a,{__init__:function(e,t,i){a.call(this,t,i,e,null,null)},__invoke:function(){try{var t,i=this._connection.getBatchRequestQueue().swap(this._os);0===i?(this.__sent(),t=e.Sent):t=this._connection.sendAsyncRequest(this,!1,!1,i),(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=d,Ice.ProxyFlushBatch=u,Ice.ProxyGetConnection=h,Ice.ConnectionFlushBatch=p}(),Ce=Ice.ArrayUtil,me=Ice.AsyncResultBase,Ice.AsyncResult,ge=Ice.Debug,Ice.FormatType,ye=Ice.HashMap,ve=Ice.OutgoingAsync,Ie=Ice.ProxyFlushBatch,Se=Ice.ProxyGetConnection,Re=Ice.ReferenceMode,Ee=Ice.OperationMode,(we=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(void 0===e||null===e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new we;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new ye(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(void 0!==e&&null!==e||(e=""),e===this._reference.getFacet())return this;var t=new we;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return void 0!==e&&null!==e||(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return Ce.clone(this._reference.getEndpoints())},ice_endpoints:function(e){return void 0!==e&&null!==e||(e=[]),Ce.equals(e,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(e))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===Re.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===Re.ModeTwoway?this:this.__newInstance(this._reference.changeMode(Re.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===Re.ModeOneway},ice_oneway:function(){return this._reference.getMode()===Re.ModeOneway?this:this.__newInstance(this._reference.changeMode(Re.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===Re.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===Re.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(Re.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===Re.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===Re.ModeDatagram?this:this.__newInstance(this._reference.changeMode(Re.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===Re.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===Re.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(Re.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new Se(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new Ie(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e||e instanceof we&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){ge.assert(null===this._reference),ge.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,i,n,r,o){if(this.__updateRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!n||i==Ee.Nonmutating||i==Ee.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(t){throw t instanceof Ice.CommunicatorDestroyedException?e:t}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){ge.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}})).__invoke=function(e,t,i,n,r,o,s,c,a){(null!==s||c.length>0)&&e.__checkAsyncTwowayOnly(t);var l=new ve(e,t,function(e){we.__completed(e,s,c)});try{if(l.__prepare(t,i,r),null===o)l.__writeEmptyParams();else{var d=l.__startWriteParams(n);o.call(null,d,a),l.__endWriteParams()}l.__invoke()}catch(e){l.__abort(e)}return l},we.__completed=function(e,t,i){if(we.__check(e,i))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var n=t(e);e.succeed.apply(e,n)}}catch(t){return void we.__dispatchLocalException(e,t)}},we.__returns_bool=function(e,t){t.push(e.readBool())},we.__returns_byte=function(e,t){t.push(e.readByte())},we.__returns_short=function(e,t){t.push(e.readShort())},we.__returns_int=function(e,t){t.push(e.readInt())},we.__returns_long=function(e,t){t.push(e.readLong())},we.__returns_float=function(e,t){t.push(e.readFloat())},we.__returns_double=function(e,t){t.push(e.readDouble())},we.__returns_string=function(e,t){t.push(e.readString())},we.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},we.__returns_Object=function(e,t){e.readObject(function(e){t.push(e)},Ice.Object),e.readPendingObjects()},we.__check=function(e,t){try{e.__throwUserException()}catch(n){if(n instanceof Ice.UserException){if(null!==t)for(var i=0;i<t.length;++i)if(n instanceof t[i])return e.fail(n,e),!1;return e.fail(new Ice.UnknownUserException(n.ice_name()),e),!1}return e.fail(n,e),!1}return!0},we.__dispatchLocalException=function(e,t){e.fail(t,e)},we.ice_staticId=Ice.Object.ice_staticId,we.checkedCast=function(e,t,i){var n=null;if(void 0===e||null===e)(n=new me(null,"checkedCast",null,null,null)).succeed(null,n);else{void 0!==t&&(e=e.ice_facet(t));var r=this;n=new me(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then(function(t,i){if(i){var o=new r;o.__copyFrom(e),n.succeed(o,n)}else n.succeed(null,n)}).exception(function(e){e instanceof Ice.FacetNotExistException?n.succeed(null,n):n.fail(e,n)})}return n},we.uncheckedCast=function(e,t){var i=null;return void 0!==e&&null!==e&&(i=new this,void 0!==t&&(e=e.ice_facet(t)),i.__copyFrom(e)),i},Object.defineProperty(we,"minWireSize",{get:function(){return 2}}),we.write=function(e,t){e.writeProxy(t)},we.read=function(e){return e.readProxy(this)},we.writeOpt=function(e,t,i){e.writeOptProxy(t,i)},we.readOpt=function(e,t){return e.readOptProxy(t,this)},we.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,i){var n=function(){e.call(this)};return n.__parent=e,n.__implements=i,(n.prototype=new e).constructor=n,n.ice_staticId=t,n.checkedCast=we.checkedCast,n.uncheckedCast=we.uncheckedCast,n.write=we.write,n.writeOpt=we.writeOpt,n.read=we.read,n.readOpt=we.readOpt,n.__instanceof=we.__instanceof,Object.defineProperty(n,"minWireSize",{get:function(){return 2}}),n},Ice.ObjectPrx=we,Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=Ii.defineLocalObject(function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t}),Ice.Endpoint=Ii.defineLocalObject(),Ice.IPEndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==i?i:"",this.port=void 0!==n?n:0,this.sourceAddress=void 0!==r?r:""},Ice.EndpointInfo),Ice.TCPEndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r){Ice.IPEndpointInfo.call(this,e,t,i,n,r)},Ice.IPEndpointInfo),Ice.UDPEndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s){Ice.IPEndpointInfo.call(this,e,t,i,n,r),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==s?s:0},Ice.IPEndpointInfo),Ice.WSEndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r,o){Ice.TCPEndpointInfo.call(this,e,t,i,n,r),this.resource=void 0!==o?o:""},Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=Ii.defineLocalObject(function(e,t,i,n){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==i?i:new Ice.EncodingVersion,this.rawBytes=void 0!==n?n:null},Ice.EndpointInfo),be=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,i=[],n="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?n+=' "'+e[t]+'"':n+=" "+e[t];for(n+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))i.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,n)||(i.push(r),null!==o&&i.push(o))}}for(e.length=0,t=0;t<i.length;t++)e.push(i[t])},equals:function(e){return e instanceof be&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=be,function(){var e=Ice.__M,t=Ice.Class,i=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function n(t){var n=t[0],r=typeof n;return"number"===r?n=i[t[0]]:"string"===r&&(n=e.type(n)),{type:n,isObject:!0===t[1],tag:t[2]}}function r(e,t){var i,r,o,s={};s.name=e,s.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,s.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,s.amd=!!t[3],s.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,s.amd?s.servantMethod=e+"_async":s.servantMethod=t[0]?t[0]:e,t[5]&&((o=n(t[5])).pos=0),s.returns=o;var c=[],a=[];if(t[6])for(i=0;i<t[6].length;++i)(r=n(t[6][i])).pos=i,c.push(r),r.tag&&a.push(r);a.sort(function(e,t){return e.tag-t.tag}),s.inParams=c,s.inParamsOpt=a;var l=[],d=[];if(t[7]){var u=o?1:0;for(i=0;i<t[7].length;++i)(r=n(t[7][i])).pos=i+u,l.push(r),r.tag&&d.push(r)}o&&o.tag&&d.push(o),d.sort(function(e,t){return e.tag-t.tag}),s.outParams=l,s.outParamsOpt=d;var h=[];if(t[8])for(i=0;i<t[8].length;++i)h.push(t[8][i]);return s.exceptions=h,s.sendsClasses=!0===t[9],s.returnsClasses=!0===t[10],s}var o=t({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=r(e,this.raw[e]),this.parsed[e]=t),t}});function s(e,t,i,n,r,o,s){var c,a,l;for(c=0;c<i.length;++c)(a=i[c]).tag||(l=a.type.read(e),o[a.pos+s]=l);for(t&&(l=t.type.read(e),o[t.pos+s]=l),c=0;c<n.length;++c)l=(a=n[c]).type.readOpt(e,a.tag),o[a.pos+s]=l;r&&e.readPendingObjects()}function c(e,t,i,n,r,o){var s,c;for(s=0;s<n.length;++s)(c=n[s]).tag||c.type.write(e,t[c.pos]);for(i&&i.type.write(e,t[i.pos]),s=0;s<r.length;++s)(c=r[s]).type.writeOpt(e,c.tag,t[c.pos]);o&&e.writePendingObjects()}var a=t({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,i=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),c(i,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}}),l=function(e,t,i,n){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o="servant for identity "+n.adapter.getCommunicator().identityToString(n.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var c=new a(i,t);try{var l=t.amd?[null]:[];if(0===t.inParams.length)i.readEmptyParams();else{var d=i.startReadParams(),u=t.amd?1:0;if(s(d,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,l,u),i.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var h=0;h<t.inParams.length;++h){var p=t.inParams[h];p.isObject&&void 0!==l[p.pos+u]&&(l[p.pos+u]=l[p.pos+u].value)}}if(l.push(n),t.amd){l[0]=c;try{r.apply(e,l)}catch(e){c.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var f=t.outParams.length;t.returns&&++f;var _=r.apply(e,l);if(f>1&&!(_ instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+f);return 1===f&&(_=[_]),c.__sendResponse(_),Ice.DispatchStatus.DispatchOK}catch(e){if(c.__checkException(e))return c.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}};function d(e,t,i){for(var n,r=0;void 0===n&&r<e.length;++r){var o=e[r];void 0===(n=o[t])&&(-1===i.indexOf(o)&&i.push(o),o.__implements&&(n=d(o.__implements,t,i)))}return n}var u="__op_";function h(e,t,i){var n=i[0]?i[0]:t,o=null;e.prototype[n]=function(){var e=arguments;null===o&&(o=r(t,i));var n=e[o.inParams.length],a=null;o.inParams.length>0&&(a=function(e,t){var i,n,r;for(i=0;i<o.inParams.length;++i)if(r=t[(n=o.inParams[i]).pos],!(n.tag&&void 0===r||"function"!=typeof n.type.validate||n.type.validate(r)))throw new Ice.MarshalException("invalid value for argument "+(i+1)+" in operation `"+o.servantMethod+"'");c(e,t,void 0,o.inParams,o.inParamsOpt,o.sendsClasses)});var l=null;return(o.returns||o.outParams.length>0)&&(l=function(e){var t,i=[],n=e.__startReadParams();if(o.returns&&!o.returns.tag&&(t=o.returns),s(n,t,o.outParams,o.outParamsOpt,o.returnsClasses,i,0),e.__endReadParams(),o.returnsClasses||o.outParamsOpt.length>0){o.returns&&o.returns.isObject&&void 0!==i[o.returns.pos+0]&&(i[o.returns.pos+0]=i[o.returns.pos+0].value);for(var r=0;r<o.outParams.length;++r){var c=o.outParams[r];c.isObject&&void 0!==i[c.pos+0]&&(i[c.pos+0]=i[c.pos+0].value)}}return i.push(e),i}),Ice.ObjectPrx.__invoke(this,o.name,o.sendMode,o.format,n,a,l,o.exceptions,Array.prototype.slice.call(e))}}var p=Ice.Slice;p.defineOperations=function(e,t,i){if(i&&(e.__ops=new o(i)),e.prototype.__dispatch=function(t,i){var n=function(e,t){var i,n=u+t,r=e[n];if(void 0===r){i=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=d(o.__implements,n,i)),o=o.__parent;void 0!==r&&(e[n]=r)}if(void 0===r){var s,c;if(e.__ops&&(s=e.__ops.find(t)),void 0===s){for(var a=e.__parent;void 0===s&&a;)a.__ops&&void 0!==(s=a.__ops.find(t))&&(c=a),a=a.__parent;for(var h=0;void 0===s&&h<i.length;++h){var p=i[h];p.__ops&&void 0!==(s=p.__ops.find(t))&&(c=p)}}void 0!==s&&(r=function(e,t,i){return l(e,s,t,i)},e[n]=r,c&&(c[n]=r))}return r}(e,i.operation);if(void 0===n||"function"!=typeof n)throw new Ice.OperationNotExistException(i.id,i.facet,i.operation);return n.call(n,this,t,i)},i)for(var n in i)h(t,n,i[n]);if(t.__implements)for(var r in t.__implements){var s=t.__implements[r].prototype;for(var c in s)"function"==typeof s[c]&&void 0===t.prototype[c]&&(t.prototype[c]=s[c])}},p.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),xe=Ice.Address,Pe=Ice.HashUtil,Oe=Ice.StringUtil,Te=Ice.Class,Ae=Ice.EndpointParseException,Me=Te(Ice.EndpointI,{__init__:function(e,t,i,n,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===i?null:i,this._sourceAddr=void 0===n?null:n,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof Me?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new xe(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=Pe.addNumber(e,this.type()),e=Pe.addString(e,this._host),e=Pe.addNumber(e,this._port),e=Pe.addString(e,this._sourceAddr),e=Pe.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new Ae("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new Ae("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,i){if("-h"===e){if(null===t)throw new Ae("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new Ae("no argument provided for -p option in endpoint "+i);try{this._port=Oe.toInt(t)}catch(e){throw new Ae("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new Ae("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new Ae("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}}),Ice.IPEndpointI=Me,Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r){Ice.IPEndpointInfo.call(this,e,t,i,n,r)},Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=Ii.defineLocalObject(function(e,t,i,n,r,o){IceSSL.EndpointInfo.call(this,e,t,i,n,r),this.resource=void 0!==o?o:""},IceSSL.EndpointInfo),Ice.ConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==i?i:"",this.rcvSize=void 0!==n?n:0,this.sndSize=void 0!==r?r:0}),Ice.ConnectionCallback=Ii.defineLocalObject(),Ice.ACMClose=Ii.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=Ii.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=Ii.defineStruct(function(e,t,i){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==i?i:Ice.ACMHeartbeat.HeartbeatOff},!0),Ice.Connection=Ii.defineLocalObject(),Ice.IPConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a){Ice.ConnectionInfo.call(this,e,t,i,n,r),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==s?s:-1,this.remoteAddress=void 0!==c?c:"",this.remotePort=void 0!==a?a:-1},Ice.ConnectionInfo),Ice.TCPConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,c,a)},Ice.IPConnectionInfo),Ice.UDPConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a,l,d){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,c,a),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==d?d:-1},Ice.IPConnectionInfo),Ii.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a,l){Ice.TCPConnectionInfo.call(this,e,t,i,n,r,o,s,c,a),this.headers=void 0!==l?l:null},Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Network",i="Protocol",n="Locator",r="Slicing",o="Ice.Trace.",s=e.getPropertyAsInt(o+t),c=e.getPropertyAsInt(o+i),a=e.getPropertyAsInt(o+"Retry"),l=e.getPropertyAsInt(o+n),d=e.getPropertyAsInt(o+r);return e.getPropertyAsInt(o+"ThreadPool"),Object.create(null,{network:{get:function(){return s}},networkCat:{get:function(){return t}},protocol:{get:function(){return c}},protocolCat:{get:function(){return i}},retry:{get:function(){return a}},retryCat:{get:function(){return"Retry"}},location:{get:function(){return l}},locationCat:{get:function(){return n}},slicing:{get:function(){return d}},slicingCat:{get:function(){return r}}})},ke=Ice.Base64,Ne=Ice.Debug,De=Ice.HashUtil,Ice.Protocol,Ve=Ice.StringUtil,Le=Ice.EndpointParseException,Ue=Ice.Class,Fe=Ue(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new je(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=De.addNumber(e,this._type),e=De.addHashable(e,this._rawEncoding),e=De.addArray(e,this._rawBytes,De.addNumber),this._hashCode=e}return this._hashCode},options:function(){var e="";return e+=" -t "+this._type,e+=" -e "+Ice.encodingVersionToString(this._rawEncoding),e+=" -v "+ke.encode(this._rawBytes)},equals:function(e){if(!(e instanceof Fe))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof Fe))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(e,t,i){switch(e.charAt(1)){case"t":if(this._type>-1)throw new Le("multiple -t options in endpoint "+i);if(null===t)throw new Le("no argument provided for -t option in endpoint "+i);var n;try{n=Ve.toInt(t)}catch(e){throw new Le("invalid type value `"+t+"' in endpoint "+i)}if(n<0||n>65535)throw new Le("type value `"+t+"' out of range in endpoint "+i);return this._type=n,!0;case"v":if(this._rawBytes)throw new Le("multiple -v options in endpoint "+i);if(null===t||0===t.length)throw new Le("no argument provided for -v option in endpoint "+i);for(var r=0;r<t.length;++r)if(!ke.isBase64(t.charAt(r)))throw new Le("invalid base64 character `"+t.charAt(r)+"' (ordinal "+t.charCodeAt(r)+") in endpoint "+i);return this._rawBytes=ke.decode(t),!0;case"e":if(null===t)throw new Le("no argument provided for -e option in endpoint "+i);try{this._rawEncoding=Ice.stringToEncodingVersion(t)}catch(e){throw new Le("invalid encoding version `"+t+"' in endpoint "+i+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),Ne.assert(this._rawEncoding),this._type<0)throw new Le("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new Le("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),je=Ue(Ice.OpaqueEndpointInfo,{__init__:function(e,t,i,n,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,i,n),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}}),Ice.OpaqueEndpointI=Fe,Be=Ice.BasicStream,He=Ice.Current,qe=Ice.Debug,ze=Ice.FormatType,We=Ice.Context,Ge=Ice.Identity,Qe=Ice.Protocol,Xe=Ice.StringUtil,Ke=Ice.Class({__init__:function(e,t,i,n,r,o){this._instance=e,this._response=n,this._compress=r,this._response&&(this._os=new Be(e,Qe.currentProtocolEncoding)),this._connection=t,this._current=new He,this._current.id=new Ge,this._current.adapter=i,this._current.con=this._connection,this._current.requestId=o,this._servant=null,this._locator=null,this._cookie={value:null},n&&(this._os.writeBlob(Qe.replyHdr),this._os.writeInt(o)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return qe.assert(this._os.size==Qe.headerSize+4),qe.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=Qe.headerSize+4,this._os.writeByte(e?Qe.replyOK:Qe.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(qe.assert(this._os.size===Qe.headerSize+4),qe.assert(null!==this._current.encoding),this._os.writeByte(Qe.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(qe.assert(this._os.size===Qe.headerSize+4),qe.assert(null!==this._current.encoding),this._os.writeByte(t?Qe.replyOK:Qe.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){qe.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+Xe.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var i=this._connection.getInfo();if(i instanceof Ice.IPConnectionInfo){var n=i;t.push("\nremote host: "+n.remoteAddress+" remote port: "+n.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){qe.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(qe.assert(null!==this._connection),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){qe.assert(null!==this._connection);var t,i=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(Qe.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(Qe.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(Qe.replyOperationNotExist):qe.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(Qe.headerSize+4),this._os.writeByte(Qe.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var i=Ice.StringSeqHelper.read(this._is);if(i.length>0){if(i.length>1)throw new Ice.MarshalException;this._current.facet=i[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new We;for(var n=this._is.readSize();n-- >0;){var r=this._is.readString(),o=this._is.readString();this._current.ctx.set(r,o)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var s=this._is.skipEncaps();return this._response?(this._os.writeByte(Qe.replyUserException),this._os.startWriteEncaps(s,ze.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}qe.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;qe.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(e){return!!this._active&&(this._active=!1,!0)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}}),Ice.IncomingAsync=Ke,function(){Ice.AsyncResult;var e=Ice.AsyncStatus,t=(Ice.BasicStream,Ice.ConnectionRequestHandler),i=Ice.Debug,n=(Ice.ExUtil,Ice.RetryException),r=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),o=Ice.LocalException,s=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===r.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(t){return this._initialized||t.__cancelable(this),this.initialized()?t.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(t),e.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var n=0;n<this._requests.length;n++)if(this._requests[n]===e)return e.__completedEx(t),void this._requests.splice(n,1);i.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){i.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var n=this._reference.getRouterInfo();if(null===n)this.flushRequests();else{var r=this;n.addProxy(this._proxy).then(function(){r.flushRequests()},function(e){r.setException(e)})}},setException:function(e){i.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var n=this._requests[t];null!==n&&n.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return i.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized},flushRequests:function(){i.assert(null!==this._connection&&!this._initialized);for(var e=null,r=0;r<this._requests.length;++r){var s=this._requests[r];try{s.__invokeRemote(this._connection,this._compress,this._response)}catch(t){t instanceof n?(e=t.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),s.__retryException(t.inner)):(i.assert(t instanceof o),e=t,s.out.__completedEx(t))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===e){this._requestHandler=new t(this._reference,this._connection,this._compress);for(var c=0;c<this._proxies.length;++c)this._proxies[c].__updateRequestHandler(this,this._requestHandler)}i.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=s}(),IceSSL.ConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a,l,d,u){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,c,a),this.cipher=void 0!==l?l:"",this.certs=void 0!==d?d:null,this.verified=void 0!==u&&u},Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=Ii.defineLocalObject(function(e,t,i,n,r,o,s,c,a,l,d,u,h){IceSSL.ConnectionInfo.call(this,e,t,i,n,r,o,s,c,a,l,d,u),this.headers=void 0!==h?h:null},IceSSL.ConnectionInfo),function(){var e=Ice.__M.module("IceSSL"),t=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/"),i=Ice.Debug,n=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),r=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),o=2,s=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)},setCallbacks:function(e,t,i){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=i},initialize:function(e,t){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var r=this;return this._fd.onopen=function(e){r.socketConnected(e)},this._fd.onmessage=function(e){r.socketBytesAvailable(e.data)},this._fd.onclose=function(e){r.socketClosed(e)},n.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(s=this._addr).host+":"+s.port,this._state=o)}catch(e){throw this._exception||(this._exception=c(this._state,e)),this._exception}var s;return i.assert(this._state===o),n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(t&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{i.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw c(this._state,e)}finally{this._fd=null}}else i.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;i.assert(this._fd);for(e.position;;){var t=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(i.assert(t>0),this._fd.bufferedAmount+t>this._maxSendPacketSize){var n=this;return r.setTimeout(function(){n._fd&&n._fd.bufferedAmount+t<=n._maxSendPacketSize&&n._bytesWrittenCallback(0,0)},this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+t);this._fd.send(o),e.position=e.position+t}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var n=this._readBuffers[0].byteLength-this._readPosition;i.assert(n>0);for(e.remaining;e.remaining>0;)if(n>e.remaining&&(n=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,n),e.position),e.position+=n,this._readPosition+=n,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;n=this._readBuffers[0].byteLength}return t.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){i.assert(null!==this._fd);var t=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;return t.localAddress="",t.localPort=-1,t.remoteAddress=this._addr.host,t.remotePort=this._addr.port,t.rcvSize=-1,t.sndSize=this._maxSendPacketSize,t.headers={},t},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){3!=this._state?(i.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){i.assert(null!==this._bytesAvailableCallback),e.byteLength>0&&(this._readBuffers.push(e),this._registered?this._bytesAvailableCallback():this._hasBytesAvailable||(this._hasBytesAvailable=!0))},socketClosed:function(e){3!=this._state?(this._exception=c(this._state,e),this._state<o?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function c(e,t){return e<o?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}s.createOutgoing=function(e,t,i,n){var r=new s(e),o=t?"wss":"ws";return o+="://"+i.host,80!==i.port&&(o+=":"+i.port),o+=n||"/",r._url=o,r._fd=null,r._addr=i,r._desc="local address = <not available>\nremote address = "+i.host+":"+i.port,r._state=0,r._secure=t,r._exception=null,r},Ice.WSTransceiver=s}(),Ice.Router=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),Ii.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),Ii.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=Ii.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),Ii.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=Ii.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),Ii.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=Ii.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),Ii.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),Ye=Ice.Debug,Je=Ice.HashUtil,Ze=Ice.StringUtil,$e=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,et=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,i,n,r,o,s){Ice.IPEndpointI.call(this,e,t,i,n,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==s&&s},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new et(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new et(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new et(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==$e&&!this.secure()},connect:function(){return Ye.assert(!this.secure()),$e.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof et?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=Je.addNumber(e,this._timeout),e=Je.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,i))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==t)this._timeout=-1;else{var n=!1;try{this._timeout=Ze.toInt(t)}catch(e){n=!0}if(n||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i);this._compress=!0}return!0},createEndpoint:function(e,t,i){return new et(this._instance,e,t,this._sourceAddr,this._timeout,i,this._compress)}}),Ice.TcpEndpointI=et,function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,i=Ice.BasicStream,n=Ice.BatchRequestQueue,r=Ice.ConnectionFlushBatch,o=Ice.Debug,s=Ice.ExUtil,c=Ice.HashMap,a=Ice.IncomingAsync,l=Ice.RetryException,d=Ice.Promise,u=Ice.Protocol,h=Ice.SocketOperation,p=Ice.Timer,f=Ice.TraceUtil,_=Ice.ProtocolVersion,C=Ice.EncodingVersion,m=Ice.ACM,g=Ice.ACMClose,y=Ice.ACMHeartbeat,v=Ice.Class,I=v({__init__:function(e,t,r,o,s,a,l){this._communicator=e,this._instance=t,this._monitor=r,this._transceiver=o,this._desc=o.toString(),this._type=o.type(),this._endpoint=s,this._incoming=a,this._adapter=l;var d=t.initializationData();this._logger=d.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=d.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new n(t,s.datagram()),this._sendStreams=[],this._readStream=new i(t,u.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new i(t,u.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new _,this._readProtocolEncoding=new C,this._asyncRequests=new c,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){o.assert(null===this._startPromise);try{if(this._state>=5)return o.assert(null!==this._exception),(new d).fail(this._exception);this._startPromise=new d;var e=this;this._transceiver.setCallbacks(function(){e.message(h.Write)},function(){e.message(h.Read)},function(t,i){if(e.message(h.Write),e._instance.traceLevels().network>=3&&t>0){var n=[];n.push("sent "),n.push(t),e._endpoint.datagram()||(n.push(" of "),n.push(i)),n.push(" bytes via "),n.push(e._endpoint.protocol()),n.push("\n"),n.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,n.join(""))}}),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new d).fail(e)}return this._startPromise},activate:function(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case I.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case I.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var i=new t(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),i.succeed(i)):(this._closePromises.push(i),this.checkClose()),i},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>1&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(o.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw o.assert(this._state>=4),this._exception},waitUntilHolding:function(){var e=new d;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new d;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>u.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,i,n){var r,s=0,c=e.__os();if(null!==this._exception)throw new l(this._exception);o.assert(this._state>1),o.assert(this._state<4),this._transceiver.checkSendSize(c),e.__cancelable(this),i?((s=this._nextRequestId++)<=0&&(this._nextRequestId=1,s=this._nextRequestId++),c.pos=u.headerSize,c.writeInt(s)):n>0&&(c.pos=u.headerSize,c.writeInt(n));try{r=this.sendMessage(S.create(e,e.__os(),t,s))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),o.assert(null!==this._exception),this._exception):e}return i&&this._asyncRequests.set(s,e),r},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new r(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(this._state>=5){if(null!==e){var t=this;p.setImmediate(function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}})}}else this._callback=e},setACM:function(e,t,i){null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,i),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new m(0,g.CloseOff,y.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var i=0;i<this._sendStreams.length;i++){var n=this._sendStreams[i];if(n.outAsync===e)return n.requestId>0&&this._asyncRequests.del(n.requestId),n.canceled(),0!==i&&this._sendStreams.splice(i,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.del(r.key),void e.__completedEx(t)},sendResponse:function(e,t){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;this.sendMessage(S.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||this._state>=4||(o.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=5)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&h.Read);var t=null;try{if(0!=(e&h.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout());o.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&h.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;o.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var i=this._readStream.pos;if(i<u.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var n=this._readStream.readByte(),r=this._readStream.readByte(),c=this._readStream.readByte(),a=this._readStream.readByte();if(n!==u.magic[0]||r!==u.magic[1]||c!==u.magic[2]||a!==u.magic[3]){var l=new Ice.BadMagicException;throw l.badMagic=Ice.Buffer.createNative([n,r,c,a]),l}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var d=this._readStream.readInt();if(d<u.headerSize)throw new Ice.IllegalMessageSizeException;d>this._messageSizeMax&&s.throwMemoryLimitException(d,this._messageSizeMax),d>this._readStream.size&&this._readStream.resize(d),this._readStream.pos=i}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return o.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(h.Read,this._endpoint.timeout());o.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else o.assert(this._state<=4),0!=(e&h.Read)&&(t=this.parseMessage()),0!=(e&h.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(u.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var f=this;p.setImmediate(function(){f.message(h.Read)})}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;o.assert(5===this._state),this.unscheduleTimeout(h.Read|h.Write|h.Connect);var t=this._instance.traceLevels();if(this._initialized?t.network>=1&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var i=this._sendStreams[0];this._writeStream.swap(i.stream)}for(var n=0;n<this._sendStreams.length;++n){var r=this._sendStreams[n];r.requestId>0&&this._asyncRequests.del(r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var s=this._asyncRequests.entries;null!==s;s=s.next)s.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(e){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=5)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),t>0&&(o.assert(this._dispatchCount>0),this._dispatchCount-=t,o.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(o.assert(t instanceof Ice.LocalException),o.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:o.assert(!1);break;case 1:if(0!==this._state)return void o.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:o.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var i="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(i)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(o.assert(4===this._state),o.assert(0===this._dispatchCount),o.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new i(this._instance,u.currentProtocolEncoding);t.writeBlob(u.magic),u.currentProtocol.__write(t),u.currentProtocolEncoding.__write(t),t.writeByte(u.closeConnectionMsg),t.writeByte(0),t.writeInt(u.headerSize),(this.sendMessage(S.createForStream(t,!1,!1))&e.Sent)>0&&this.scheduleTimeout(h.Write,this.closeTimeout())}},heartbeat:function(){if(o.assert(2===this._state),!this._endpoint.datagram()){var e=new i(this._instance,u.currentProtocolEncoding);e.writeBlob(u.magic),u.currentProtocol.__write(e),u.currentProtocolEncoding.__write(e),e.writeByte(u.validateConnectionMsg),e.writeByte(0),e.writeInt(u.headerSize);try{this.sendMessage(S.createForStream(e,!1,!1))}catch(e){this.setState(5,e),o.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=h.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(u.magic),u.currentProtocol.__write(this._writeStream),u.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(u.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(u.headerSize),f.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(h.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(u.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(h.Read,this.connectTimeout()),!1;o.assert(this._readStream.pos===u.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==u.magic[0]||e[1]!==u.magic[1]||e[2]!==u.magic[2]||e[3]!==u.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==u.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==u.headerSize)throw new Ice.IllegalMessageSizeException;f.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(u.headerSize),this._readHeader=!0,this._readStream.pos=0;var i=this._instance.traceLevels();if(i.network>=1){var n=[];this._endpoint.datagram()?(n.push("starting to send "),n.push(this._endpoint.protocol()),n.push(" messages\n"),n.push(this._transceiver.toDetailedString())):((n=[]).push("established "),n.push(this._endpoint.protocol()),n.push(" connection\n"),n.push(this.toString())),this._instance.initializationData().logger.trace(i.networkCat,n.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],o.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?f.trace("sending asynchronous request",t,this._logger,this._traceLevels):f.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}o.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(h.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;o.assert(this._state<5),o.assert(!t.prepared);var i=t.stream;return i.pos=10,i.writeInt(i.size),i.prepareWrite(),t.prepared=!0,t.outAsync?f.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):f.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(h.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){o.assert(this._state>1&&this._state<5);var e=new function(e){this.stream=new i(e,u.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null}(this._instance);this._readStream.swap(e.stream),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,o.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=u.headerSize,t){case u.closeConnectionMsg:f.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case u.requestMsg:4===this._state?f.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(f.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case u.requestBatchMsg:if(4===this._state)f.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(f.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case u.replyMsg:f.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case u.validateConnectionMsg:f.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw f.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(5,n)}return e},invokeAll:function(e,t,i,n,r,o){try{for(;t>0;){var s=!this._endpoint.datagram()&&0!==i;new a(this._instance,this,o,s,n,i).invoke(r,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var i=this;0!=(e&h.Read)&&(this._readTimeoutId=this._timer.schedule(function(){i.timedOut()},t),this._readTimeoutScheduled=!0),0!=(e&(h.Write|h.Connect))&&(this._writeTimeoutId=this._timer.schedule(function(){i.timedOut()},t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&h.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(h.Write|h.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,i=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var n=[];n.push("received "),this._endpoint.datagram()?n.push(e.limit):(n.push(e.position-t),n.push(" of "),n.push(e.limit-t)),n.push(" bytes via "),n.push(this._endpoint.protocol()),n.push("\n"),n.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return i},write:function(e){var t=e.position,i=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var n=[];n.push("sent "),n.push(e.position-t),this._endpoint.datagram()||(n.push(" of "),n.push(e.limit-t)),n.push(" bytes via "),n.push(this._endpoint.protocol()),n.push("\n"),n.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return i}});I.ObjectAdapterDeactivated=0,I.CommunicatorDestroyed=1,Ice.ConnectionI=I;var S=v({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){o.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new i(this.stream.instance,u.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});S.createForStream=function(e,t,i){var n=new S;return n.stream=e,n.compress=t,n.adopt=i,n.isSent=!1,n.requestId=0,n.outAsync=null,n},S.create=function(e,t,i,n){var r=new S;return r.stream=t,r.compress=i,r.outAsync=e,r.requestId=n,r.isSent=!1,r.adopt=!1,r}}(),tt=Ice.__M.module("IceSSL"),it=Ice.HashUtil,Ice.StringUtil,nt=Ice.EndpointI,rt=(0,Ice.Class)(nt,{__init__:function(e,t,i){this._instance=e,this._delegate=t,this._resource=i||"/"},getInfo:function(){var e=this._delegate.secure()?new tt.WSSEndpointInfo:new Ice.WSEndpointInfo;return e.resource=this._resource,this._delegate.fillEndpointInfo(e),e},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new rt(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new rt(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new rt(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=it.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof rt))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,i){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+i);return this._resource=t,!0}}),void 0!==Ice.WSTransceiver?rt.prototype.connectable=function(){return!0}:rt.prototype.connectable=function(){return!1},Ice.WSEndpoint=rt,ot=Ice.HashMap,st=Ice.RouterInfo,ct=Ice.RouterPrx,at=Ice.Class({__init__:function(){this._table=new ot(ot.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var t=ct.uncheckedCast(e.ice_router(null)),i=this._table.get(t);return void 0===i&&(i=new st(t),this._table.set(t,i)),i},erase:function(e){var t=null;if(null!==e){var i=ct.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table.del(i)}return t}}),Ice.RouterManager=at,lt=Ice.Class,dt=Ice.Debug,ut=lt({__init__:function(e,t,i,n){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=i&&"Ice.ACM.Server"!=i||0!==e.getProperty(i+".Timeout").length?i+".Timeout":i,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,n.timeout/1e3);var o=e.getPropertyAsIntWithDefault(i+".Heartbeat",n.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+i+".Heartbeat', default value will be used instead"),this.heartbeat=n.heartbeat);var s=e.getPropertyAsIntWithDefault(i+".Close",n.close.value);s>=0&&s<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(s):(t.warning("invalid value for property `"+i+".Close', default value will be used instead"),this.close=n.close)}}),ht=lt({add:function(e){dt.assert(!1)},remove:function(e){dt.assert(!1)},reap:function(e){dt.assert(!1)},acm:function(e){return dt.assert(!1),null},getACM:function(){return dt.assert(!1),0}}),pt=lt(ht,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var t=this._connections.indexOf(e);dt.assert(t>=0),this._connections.splice(t,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,t,i){dt.assert(null!==this._instance);var n=new ut;return n.timeout=this._config.timeout,n.close=this._config.close,n.heartbeat=this._config.heartbeat,void 0!==e&&(n.timeout=1e3*e),void 0!==t&&(n.close=t),void 0!==i&&(n.heartbeat=i),new ft(this,this._instance.timer(),n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),ft=lt(ht,{__init__:function(e,t,i){this._parent=e,this._timer=t,this._config=i,this._connection=null},add:function(e){if(dt.assert(null===this._connection),this._connection=e,this._config.timeout>0){var t=this;this._timerToken=this._timer.scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){dt.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,i){return this._parent.acm(e,t,i)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}}),Ice.FactoryACMMonitor=pt,Ice.ACMConfig=ut,_t=Ice.Context,Ct=Ice.InitializationException,(mt=Ice.Class({__init__:function(){this._context=new _t},getContext:function(){return new _t(this._context)},setContext:function(e){null!==e&&e.size>0?this._context=new _t(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var i=this._context.get(e);return null===i&&(i=""),this._context.set(e,t),i},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var i=null;0===this._context.size?i=e:(i=new _t(this._context)).merge(e),Ice.ContextHelper.write(t,i)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new mt;throw new Ct("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=mt,function(){var e=Ice.ArrayUtil,t=Ice.Debug,i=Ice.BatchRequestQueue,n=Ice.HashMap,r=Ice.HashUtil,o=Ice.OpaqueEndpointI,s=Ice.Promise,c=(Ice.Protocol,Ice.ReferenceMode),a=Ice.StringUtil,l=Ice.StringSeqHelper,d=Ice.EndpointSelectionType,u=Ice.Identity,h=Ice.RouterPrx,p=Ice.LocatorPrx,f=Ice.PropertyNames,_=Ice.ConnectionRequestHandler,C=Ice.Class,m=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],g=C({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),n,null,null)},createWithAdapterId:function(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),null,n,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new v(this._instance,this._communicator,e,"",t.endpoint().datagram()?c.ModeDatagram:c.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,i){if(void 0===e||null===e||0===e.length)return null;var n,r=" \t\n\r",o=0;if(-1==(n=a.findFirstNotOf(e,r,o)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var s=null;if(-1===(o=a.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(-1===(o=a.findFirstOf(e,r+":@",n))&&(o=e.length),s=e.substring(n,o)):(n++,s=e.substring(n,o),o++),n===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var l=this._instance.stringToIdentity(s);if(0===l.name.length){if(l.category.length>0)throw new Ice.IllegalIdentityException(l);if(-1!=a.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var d="",u=c.ModeTwoway,h=!1,p=this._instance.defaultsAndOverrides().defaultEncoding,f=Ice.Protocol_1_0,_="";-1!==(n=a.findFirstNotOf(e,r,o))&&":"!=e.charAt(n)&&"@"!=e.charAt(n)&&(-1==(o=a.findFirstOf(e,r+":@",n))&&(o=e.length),n!=o);){var C=e.substring(n,o);if(2!=C.length||"-"!=C.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+C+"' in `"+e+"'");var m=null,g=a.findFirstNotOf(e,r,o);if(-1!=g){var y=e.charAt(g);if("@"!=y&&":"!=y&&"-"!=y){if(n=g,-1==(o=a.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around value for "+C+" option in `"+e+"'");0===o?(-1===(o=a.findFirstOf(e,r+":@",n))&&(o=e.length),m=e.substring(n,o)):(n++,m=e.substring(n,o),o++)}}switch(C.charAt(1)){case"f":if(null===m)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{d=a.unescapeString(m,0,m.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -t option in `"+e+"'");u=c.ModeTwoway;break;case"o":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -o option in `"+e+"'");u=c.ModeOneway;break;case"O":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -O option in `"+e+"'");u=c.ModeBatchOneway;break;case"d":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -d option in `"+e+"'");u=c.ModeDatagram;break;case"D":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -D option in `"+e+"'");u=c.ModeBatchDatagram;break;case"s":if(null!==m)throw new Ice.ProxyParseException("unexpected argument `"+m+"' provided for -s option in `"+e+"'");h=!0;break;case"e":if(null===m)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{p=Ice.stringToEncodingVersion(m)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+m+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===m)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{f=Ice.stringToProtocolVersion(m)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+m+"' in `"+e+"':\n"+t.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+C+"' in `"+e+"'")}}if(-1===n)return this.createImpl(l,d,u,h,f,p,null,null,i);var v=[];if(":"==e.charAt(n)){var I=[];for(o=n;o<e.length&&":"==e.charAt(o);){for(o=n=o+1;;){if(-1==(o=e.indexOf(":",o))){o=e.length;break}for(var S=!1,R=n;!(-1==(R=e.indexOf('"',R))||o<R)&&-1!=(R=e.indexOf('"',++R));){if(o<R){S=!0;break}++R}if(!S)break;++o}var E=e.substring(n,o),w=this._instance.endpointFactoryManager().create(E,!1);null!==w?v.push(w):I.push(E)}if(0===v.length)throw t.assert(I.length>0),new Ice.EndpointParseException("invalid endpoint `"+I[0]+"' in `"+e+"'");if(0!==I.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var b=[];b.push("Proxy contains unknown endpoints:");for(var x=0;x<I.length;++x)b.push(" `"),b.push(I[x]),b.push("'");this._instance.initializationData().logger.warning(b.join(""))}return this.createImpl(l,d,u,h,f,p,v,null,i)}if("@"==e.charAt(n)){if(-1==(n=a.findFirstNotOf(e,r,n+1)))throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var P=null;if(-1===(o=a.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(-1===(o=a.findFirstOf(e,r,n))&&(o=e.length),P=e.substring(n,o)):(n++,P=e.substring(n,o),o++),o!==e.length&&-1!==a.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{_=a.unescapeString(P,0,P.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===_.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(l,d,u,h,f,p,null,_,i)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var i,n=l.read(t);if(n.length>0){if(n.length>1)throw new Ice.ProxyUnmarshalException;i=n[0]}else i="";var r=t.readByte();if(r<0||r>c.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),s=null,a=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(s=Ice.Protocol_1_0,a=Ice.Encoding_1_0):((s=new Ice.ProtocolVersion).__read(t),(a=new Ice.EncodingVersion).__read(t));var d=null,u=null,h=t.readSize();if(h>0){d=[];for(var p=0;p<h;p++)d[p]=this._instance.endpointFactoryManager().read(t)}else u=t.readString();return this.createImpl(e,i,r,o,s,a,d,u,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new g(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new g(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,i,n=[];for(t=0;t<f.clPropNames.length;++t)if(0===e.indexOf(f.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==r;r=r.next){var o=!1;for(t=0,i=m.length;t<i;++t)if(r.key===e+"."+m[t]){o=!0;break}o||n.push(r.key)}if(n.length>0){var s=[];for(s.push("found unknown properties for proxy '"),s.push(e),s.push("':"),t=0,i=n.length;t<i;++t)s.push("\n    "),s.push(n[t]);this._instance.initializationData().logger.warning(s.join(""))}},createImpl:function(e,t,i,n,r,o,s,c,a){var l=this._instance.defaultsAndOverrides(),u=null;null!==this._defaultLocator&&(u=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var f=this._instance.routerManager().find(this._defaultRouter),_=!0,C=l.defaultPreferSecure,m=l.defaultEndpointSelection,g=l.defaultLocatorCacheTimeout,y=l.defaultInvocationTimeout;if(null!==a&&a.length>0){var v,S=this._instance.initializationData().properties;S.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(a),v=a+".Locator";var R=p.uncheckedCast(this._communicator.propertyToProxy(v));null!==R&&(u=R.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(R):this._instance.locatorManager().find(R.ice_encodingVersion(o))),v=a+".Router";var E=h.uncheckedCast(this._communicator.propertyToProxy(v));if(null!==E){var w=".Router";if(a.lastIndexOf(w)==a.length-w.length){var b="`"+v+"="+S.getProperty(v)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(b)}else f=this._instance.routerManager().find(E)}if(v=a+".ConnectionCached",_=S.getPropertyAsIntWithDefault(v,_?1:0)>0,v=a+".PreferSecure",C=S.getPropertyAsIntWithDefault(v,C?1:0)>0,v=a+".EndpointSelection",S.getProperty(v).length>0){var x=S.getProperty(v);if("Random"==x)m=d.Random;else{if("Ordered"!=x)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+x+"'; expected `Random' or `Ordered'");m=d.Ordered}}v=a+".LocatorCacheTimeout";var P=S.getProperty(v);0!==P.length&&(g=S.getPropertyAsIntWithDefault(v,g))<-1&&(g=-1,this._instance.initializationData().logger.warning("invalid value for"+v+"`"+S.getProperty(v)+"': defaulting to -1")),v=a+".InvocationTimeout",0!==(P=S.getProperty(v)).length&&(y=S.getPropertyAsIntWithDefault(v,y))<1&&-1!==y&&(y=-1,this._instance.initializationData().logger.warning("invalid value for"+v+"`"+S.getProperty(v)+"': defaulting to -1"))}return new I(this._instance,this._communicator,e,t,i,n,r,o,s,c,u,f,_,C,m,g,y)}});Ice.ReferenceFactory=g;var y=C({__init__:function(e,i,n,r,o,s,c,a,l){t.assert(void 0===n||null!==n.name),t.assert(void 0===n||null!==n.category),t.assert(void 0===r||null!==r),this._instance=e,this._communicator=i,this._mode=o,this._secure=s,this._identity=n,this._context=y._emptyContext,this._facet=r,this._protocol=c,this._encoding=a,this._invocationTimeout=l,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){void 0!==e&&null!==e||(e=y._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=y._emptyContext:t._context=new n(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new u(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return t.assert(!1),null},changeEndpoints:function(e){return t.assert(!1),null},changeLocator:function(e){return t.assert(!1),null},changeRouter:function(e){return t.assert(!1),null},changeCacheConnection:function(e){return t.assert(!1),null},changePreferSecure:function(e){return t.assert(!1),null},changeEndpointSelection:function(e){return t.assert(!1),null},changeLocatorCacheTimeout:function(e){return t.assert(!1),null},changeTimeout:function(e){return t.assert(!1),null},changeConnectionId:function(e){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=r.addNumber(e,this._mode),e=r.addBoolean(e,this._secure),e=r.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=r.addString(e,t.key),e=r.addString(e,t.value);return e=r.addString(e,this._facet),e=r.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=r.addBoolean(e,this._compress)),e=r.addHashable(e,this._protocol),e=r.addHashable(e,this._encoding),e=r.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var i=a.escapeString(this._facet,"");-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}switch(this._mode){case c.ModeTwoway:e.push(" -t");break;case c.ModeOneway:e.push(" -o");break;case c.ModeBatchOneway:e.push(" -O");break;case c.ModeDatagram:e.push(" -d");break;case c.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return t.assert(!1),null},getRequestHandler:function(e){t.assert(!1)},getBatchRequestQueue:function(){t.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});y._emptyContext=new n,y._emptyEndpoints=[],Ice.Reference=y;var v=C(y,{__init__:function(e,t,i,n,r,o,s,c){y.call(this,e,t,i,n,r,o,Ice.Protocol_1_0,s),this._fixedConnection=c},getEndpoints:function(){return y._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return d.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new v(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case c.ModeTwoway:case c.ModeOneway:case c.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case c.ModeDatagram:case c.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,i=this.getInstance().defaultsAndOverrides();if((i.overrideSecure?i.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=i.overrideCompress?i.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new _(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof v&&(!!y.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=v;var I=C(y,{__init__:function(e,i,n,r,o,s,c,a,l,d,u,h,p,f,_,C,m){y.call(this,e,i,n,r,o,s,c,a,m),this._endpoints=l,this._adapterId=d,this._locatorInfo=u,this._routerInfo=h,this._cacheConnection=p,this._preferSecure=f,this._endpointSelection=_,this._locatorCacheTimeout=C,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=y._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=y.prototype.changeEncoding.call(this,e);if(t!==this){var i=t._locatorInfo;null===i||i.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(i.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=y.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeCompress(e);t._endpoints=i}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=y._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,function(e,t){return e.equals(t)}))return this;var i=this.getInstance().referenceFactory().copy(this);return i._endpoints=t,i._adapterId="",i.applyOverrides(i._endpoints),i},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var i=this.getInstance().referenceFactory().copy(this);return i._locatorInfo=t,i},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var i=this.getInstance().referenceFactory().copy(this);return i._routerInfo=t,i},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeTimeout(e);t._endpoints=i}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeConnectionId(e);t._endpoints=i}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(y.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var i=0;i<this._endpoints.length;++i)e.writeShort(this._endpoints[i].type()),this._endpoints[i].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(y.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var i=this._endpoints[t].toString();null!==i&&i.length>0&&(e.push(":"),e.push(i))}else if(this._adapterId.length>0){e.push(" @ ");var n=a.escapeString(this._adapterId,null);-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}return e.join("")},toProperty:function(e){var t,i=new n;if(i.set(e,this.toString()),i.set(e+".CollocationOptimized","0"),i.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),i.set(e+".PreferSecure",this._preferSecure?"1":"0"),i.set(e+".EndpointSelection",this._endpointSelection===d.Random?"Random":"Ordered"),i.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),i.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)i.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)i.set(t.key,t.value);return i},hashCode:function(){return this._hashInitialized||(y.prototype.hashCode.call(this),this._hashValue=r.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t||t instanceof I&&(!!y.prototype.equals.call(this,t)&&(!(null===this._locatorInfo?null!==t._locatorInfo:!this._locatorInfo.equals(t._locatorInfo))&&(!(null===this._routerInfo?null!==t._routerInfo:!this._routerInfo.equals(t._routerInfo))&&(this._cacheConnection===t._cacheConnection&&(this._preferSecure===t._preferSecure&&(this._endpointSelection===t._endpointSelection&&(this._locatorCacheTimeout===t._locatorCacheTimeout&&(this._connectionId===t._connectionId&&(this._overrideTimeout===t._overrideTimeout&&((!this._overrideTimeout||this._timeout===t._timeout)&&(!!e.equals(this._endpoints,t._endpoints,function(e,t){return e.equals(t)})&&this._adapterId===t._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new i(this._instance,this._mode===c.ModeBatchDatagram)},getConnection:function(){var e=new s;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then(function(i){i.length>0?(t.applyOverrides(i),t.createConnection(i).then(function(t,i){e.succeed(t,i)},function(t){e.fail(t)})):t.getConnectionNoRouterInfo(e)}).exception(function(t){e.fail(t)})}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)this.createConnection(this._endpoints).then(function(t,i){e.succeed(t,i)}).exception(function(t){e.fail(t)});else{var i=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(n,r){0!==n.length?(i.applyOverrides(n),i.createConnection(n).then(function(t,i){e.succeed(t,i)},function(n){if(n instanceof Ice.NoEndpointException)e.fail(n);else{if(t.assert(null!==i._locatorInfo),i.getLocatorInfo().clearCache(i),r){var o=i.getInstance().traceLevels();if(o.retry>=2){var s="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+n.toString();i.getInstance().initializationData().logger.trace(o.retryCat,s)}return void i.getConnectionNoRouterInfo(e)}e.fail(n)}})):e.fail(new Ice.NoEndpointException(i.toString()))}).exception(function(t){e.fail(t)}):e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new I(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){y.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(i){for(var n=[],r=0;r<i.length;++r)i[r]instanceof o||!i[r].connectable()||n.push(i[r]);switch(this.getMode()){case c.ModeTwoway:case c.ModeOneway:case c.ModeBatchOneway:n=e.filter(n,function(e,t,i){return!e.datagram()});break;case c.ModeDatagram:case c.ModeBatchDatagram:n=e.filter(n,function(e,t,i){return e.datagram()})}switch(this.getEndpointSelection()){case d.Random:e.shuffle(n);break;case d.Ordered:break;default:t.assert(!1)}var s=this.getInstance().defaultsAndOverrides();if(s.overrideSecure?s.overrideSecureValue:this.getSecure())n=e.filter(n,function(e,t,i){return e.secure()});else{var a=this.getPreferSecure();n.sort(function(e,t){var i=e.secure(),n=t.secure();return i&&n||!i&&!n?0:!i&&n?a?1:-1:a?-1:1})}return n},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new s).fail(new Ice.NoEndpointException(this.toString()));var i,n=new s,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)i=new S(this,null,n),r.create(t,!1,this.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)});else{var o=[t[0]];i=new S(this,t,n),r.create(o,!0,this.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)})}return n}});Ice.RoutableReference=I;var S=C({__init__:function(e,t,i){this.ref=e,this.endpoints=t,this.promise=i,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,i=[this.endpoints[this.i]],n=this;this.ref.getInstance().outgoingConnectionFactory().create(i,t,this.ref.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)})}else this.promise.fail(this.exception)}})}(),gt=Ice.Debug,yt=Ice.BasicStream,vt=Ice.EndpointParseException,It=Ice.OpaqueEndpointI,St=Ice.Protocol,Rt=Ice.StringUtil,Et=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(e){for(var t=0;t<this._factories.length;++t)gt.assert(this._factories[t].type()!=e.type());this._factories.push(e)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,t){var i=e.trim();if(0===i.length)throw new vt("value has no non-whitespace characters");var n=Rt.splitString(i," \t\n\r");if(0===n.length)throw new vt("value has no non-whitespace characters");var r=n[0];n.splice(0,1),"default"===r&&(r=this._instance.defaultsAndOverrides().defaultProtocol);for(var o=0,s=this._factories.length;o<s;++o)if(this._factories[o].protocol()===r){var c=this._factories[o].create(n,t);if(n.length>0)throw new vt("unrecognized argument `"+n[0]+"' in endpoint `"+e+"'");return c}if("opaque"===r){var a=new It;if(a.initWithOptions(n),n.length>0)throw new vt("unrecognized argument `"+n[0]+"' in endpoint `"+e+"'");for(o=0,s=this._factories.length;o<s;++o)if(this._factories[o].type()==a.type()){var l=new yt(this._instance,St.currentProtocolEncoding);l.writeShort(a.type()),a.streamWrite(l),l.pos=0,l.readShort(),l.startReadEncaps();var d=this._factories[o].read(l);return l.endReadEncaps(),d}return a}return null},read:function(e){for(var t,i=e.readShort(),n=0;n<this._factories.length;++n)if(this._factories[n].type()==i)return e.startReadEncaps(),t=this._factories[n].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new It(i)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}}),Ice.EndpointFactoryManager=Et,wt=Ice.Debug,bt=Ice.HashMap,xt=Ice.ObjectPrx,Pt=Ice.StringUtil,Ot=Ice.Identity,Tt=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var i=0;i<t.length;i++){var n;try{n=Pt.toInt(t[i])}catch(e){n=0}if(0===i&&-1===n)break;this._retryIntervals[i]=n>0?n:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),i=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(i)},proxyToProperty:function(e,t){return null!==e?e.__reference().toProperty(t):new bt},streamToProxy:function(e,t){var i=new Ot;i.__read(e);var n=this._instance.referenceFactory().createFromStream(i,e);return this.referenceToProxy(n,t)},referenceToProxy:function(e,t){if(null!==e){var i=t?new t:new xt;return i.__setup(e),i}return null},proxyToStream:function(e,t){if(null!==e){var i=e.__reference();i.getIdentity().__write(t),i.streamWrite(t)}else{new Ot("","").__write(t)}},checkRetryAfterException:function(e,t,i,n){var r,o=this._instance.traceLevels(),s=this._instance.initializationData().logger;if(t.getMode()===Ice.Reference.ModeBatchOneway||t.getMode()===Ice.Reference.ModeBatchDatagram)throw e;if(e instanceof Ice.ObjectNotExistException){var c=e;if(null!==t.getRouterInfo()&&"ice_add_proxy"===c.operation)return t.getRouterInfo().clearCache(t),o.retry>=1&&s.trace(o.retryCat,"retrying operation call to add proxy to router\n"+e.toString()),null!==i&&(i.value=0),n;if(!t.isIndirect())throw e;if(t.isWellKnown()){var a=t.getLocatorInfo();null!==a&&a.clearCache(t)}}else if(e instanceof Ice.RequestFailedException)throw e;if(e instanceof Ice.MarshalException)throw e;if(e instanceof Ice.CommunicatorDestroyedException||e instanceof Ice.ObjectAdapterDeactivatedException)throw e;if(e instanceof Ice.InvocationTimeoutException||e instanceof Ice.InvocationCanceledException)throw e;if(++n,wt.assert(n>0),n===this._retryIntervals.length+1&&e instanceof Ice.CloseConnectionException)r=0;else{if(n>this._retryIntervals.length)throw o.retry>=1&&s.trace(o.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+e.toString()),e;r=this._retryIntervals[n-1]}if(o.retry>=1){var l="retrying operation call";r>0&&(l+=" in "+r+"ms"),l+=" because of exception\n"+e.toString(),s.trace(o.retryCat,l)}return wt.assert(null!==i),i.value=r,n}}),Ice.ProxyFactory=Tt,At=Ice.FormatType,Mt=Ice.EndpointSelectionType,kt=Ice.Protocol,Ice.DefaultsAndOverrides=function(e,t){this.defaultProtocol=e.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var i=e.getProperty("Ice.Default.Host");if(this.defaultHost=i.length>0?i:null,i=e.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=i.length>0?i:null,(i=e.getProperty("Ice.Override.Timeout")).length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=e.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,t.warning("invalid value for Ice.Override.Timeout `"+e.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),(i=e.getProperty("Ice.Override.ConnectTimeout")).length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=e.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,t.warning("invalid value for Ice.Override.ConnectTimeout `"+e.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),(i=e.getProperty("Ice.Override.CloseTimeout")).length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=e.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,t.warning("invalid value for Ice.Override.CloseTimeout `"+e.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(i=e.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=Mt.Random;else{if("Ordered"!==i){var n=new Ice.EndpointSelectionTypeParseException;throw n.str="illegal value `"+i+"'; expected `Random' or `Ordered'",n}this.defaultEndpointSelection=Mt.Ordered}this.defaultTimeout=e.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,t.warning("invalid value for Ice.Default.Timeout `"+e.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=e.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,t.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+e.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=e.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,t.warning("invalid value for Ice.Default.InvocationTimeout `"+e.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=e.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,i=e.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(kt.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(i),kt.checkSupportedEncoding(this.defaultEncoding);var r=e.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=r?At.SlicedFormat:At.CompactFormat},Nt=Ice.StringUtil,Dt=Ice.Identity,Vt=Ice.IdentityParseException,Ice.stringToIdentity=function(e){for(var t=new Dt,i=-1,n=0;-1!==(n=e.indexOf("/",n));){for(var r=0;n-r>0&&"\\"==e.charAt(n-r-1);)r++;if(r%2==0){if(-1!=i)throw(o=new Vt).str="unescaped backslash in identity `"+e+"'",o;i=n}n++}if(-1==i){t.category="";try{t.name=Nt.unescapeString(e)}catch(t){throw(o=new Vt).str="invalid identity name `"+e+"': "+o.toString(),o}}else{try{t.category=Nt.unescapeString(e,0,i)}catch(t){throw(o=new Vt).str="invalid category in identity `"+e+"': "+o.toString(),o}if(i+1<e.length)try{t.name=Nt.unescapeString(e,i+1,e.length)}catch(t){var o;throw(o=new Vt).str="invalid name in identity `"+e+"': "+o.toString(),o}else t.name=""}return t},Ice.identityToString=function(e){return null===e.category||0===e.category.length?Nt.escapeString(e.name,"/"):Nt.escapeString(e.category,"/")+"/"+Nt.escapeString(e.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i,n=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(i=n.name.localeCompare(r.name))?i:n.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i,n=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(i=n.name.localeCompare(r.name)))return i;if(0!==(i=n.category.localeCompare(r.category)))return i;var o=e.ice_getFacet(),s=t.ice_getFacet();return null===o&&null===s?0:null===o?-1:null===s?1:o.localeCompare(s)},function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,t=Ice.ConnectionI,i=(Ice.ConnectionReaper,Ice.Debug),n=Ice.HashMap,r=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),s=Ice.Class,c=s({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new a,this._pending=new n(n.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach(function(e){e.destroy(t.CommunicatorDestroyed)}),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new r,this.checkFinished(),this._waitPromise},create:function(e,t,n){i.assert(e.length>0);var o=this.applyOverrides(e);try{var s={value:!1},c=this.findConnectionByEndpoint(o,s);if(null!==c)return(new r).succeed(c,s.value)}catch(e){return(new r).fail(e)}return new l(this,o,t,n).start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try2(function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()}).then(function(i){for(var n=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<i.length;++o){var s=i[o];r.overrideTimeout&&(s=s.changeTimeout(r.overrideTimeoutValue)),s=s.changeCompress(!1);for(var c=0;c<t._connectionsByEndpoint.length;++c){var a=t._connectionsByEndpoint[c];a.endpoint().equals(s)&&a.setAdapter(n)}}})},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach(function(t){t.getAdapter()===e&&t.setAdapter(null)})},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return r.all(this._connectionsByEndpoint.map(function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception(function(e){if(!(e instanceof Ice.LocalException))throw e})})).then(function(){t.succeed(t)},function(e){t.fail(e,t)}),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),i=[],n=0;n<e.length;++n){var r=e[n];t.overrideTimeout?i.push(r.changeTimeout(t.overrideTimeoutValue)):i.push(r)}return i},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var n=this._instance.defaultsAndOverrides();i.assert(e.length>0);for(var r=0;r<e.length;++r){var o=e[r];if(!this._pending.has(o)){var s=this._connectionsByEndpoint.get(o);if(void 0!==s)for(var c=0;c<s.length;++c)if(s[c].isActiveOrHolding())return n.overrideCompress?t.value=n.overrideCompressValue:t.value=o.compress(),s[c]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,i.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,i){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var n=this._monitor.swapReapedConnections();if(null!==n)for(var r=0;r<n.length;++r){var o=n[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var s=this.findConnectionByEndpoint(e,i);if(null!==s)return s;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,n){i.assert(this._pending.has(n)&&null!==e);var r=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;r=new t(this._communicator,this._instance,this._monitor,e,n.changeCompress(!1),!1,null)}catch(t){if(t instanceof Ice.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(r.endpoint(),r),this._connectionsByEndpoint.set(r.endpoint().changeCompress(!0),r),r},finishGetConnection:function(e,t,i,n){var r,o,s=[];null!==n&&s.push(n);var c,a=[];for(r=0;r<e.length;++r){var l=e[r],d=this._pending.get(l);if(void 0!==d){this._pending.del(l);for(var u=0;u<d.length;++u)(o=d[u]).hasEndpoint(t)?-1===s.indexOf(o)&&s.push(o):-1===a.indexOf(o)&&a.push(o)}}for(r=0;r<s.length;++r){(o=s[r]).removeFromPending();var h=a.indexOf(o);-1!==h&&a.splice(h,1)}for(r=0;r<a.length;++r)(o=a[r]).removeFromPending();var p=this._instance.defaultsAndOverrides();for(c=p.overrideCompress?p.overrideCompressValue:t.compress(),r=0;r<a.length;++r)(o=a[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setConnection(i,c);this.checkFinished()},finishGetConnectionEx:function(e,t,n){var r,o,s=[];null!==n&&s.push(n);var c=[];for(r=0;r<e.length;++r){var a=e[r],l=this._pending.get(a);if(void 0!==l){this._pending.del(a);for(var d=0;d<l.length;++d)(o=l[d]).removeEndpoints(e)?-1===s.indexOf(o)&&s.push(o):-1===c.indexOf(o)&&c.push(o)}}for(r=0;r<c.length;++r)o=c[r],i.assert(-1===s.indexOf(o)),o.removeFromPending();for(this.checkFinished(),r=0;r<c.length;++r)(o=c[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setException(t)},addToPending:function(e,t){var i,n,r=!1;if(null!==e)for(n=0;n<t.length;++n){i=t[n];var o=this._pending.get(i);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(n=0;n<t.length;++n)i=t[n],this._pending.has(i)||this._pending.set(i,[]);return!1},removeFromPending:function(e,t){for(var i=0;i<t.length;++i){var n=t[i],r=this._pending.get(n);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var i=this._instance.traceLevels();if(i.retry>=2){var n=[];n.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?n.push("\n"):t?n.push(", trying next endpoint\n"):n.push(" and no more endpoints to try\n"),n.push(e.toString()),this._instance.initializationData().logger.trace(i.retryCat,n.join(""))}},handleException:function(e,t){var i=this._instance.traceLevels();if(i.retry>=2){var n=[];n.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?n.push("\n"):t?n.push(", trying next endpoint\n"):n.push(" and no more endpoints to try\n"),n.push(e.toString()),this._instance.initializationData().logger.trace(i.retryCat,n.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;r.all(e._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().exception(function(e){i.assert(!1)})})).then(function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var n=[],r=e._connectionsByEndpoint.entries;null!==r;r=r.next)for(var o=r.value,s=0;s<o.length;++s)-1===n.indexOf(o[s])&&n.push(o[s]);i.assert(t.length===n.length),e._connectionsByEndpoint.clear()}else i.assert(0===e._connectionsByEndpoint.size);i.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()})}}});Ice.OutgoingConnectionFactory=c;var a=s(n,{__init__:function(e){n.call(this,e||n.compareEquals)},set:function(e,r){var o=this.get(e);void 0===o&&(o=[],n.prototype.set.call(this,e,o)),i.assert(r instanceof t),o.push(r)},removeConnection:function(e,t){var n=this.get(e);i.assert(null!==n);var r=n.indexOf(t);i.assert(-1!==r),n.splice(r,1),0===n.length&&this.del(e)},map:function(e){var t=[];return this.forEach(function(i){t.push(e(i))}),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var i=0;i<t.value.length;++i)e(t.value[i])}}),l=s({__init__:function(e,t,i,n){this._factory=e,this._endpoints=t,this._hasMore=i,this._selType=n,this._promise=new r,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){i.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var i=this.findEndpoint(e[t]);-1!==i&&this._endpoints.splice(i,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(i.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2)(r=[]).push("trying to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));e=this._factory.createConnection(this._current.connect(),this._current);var n=this;e.start().then(function(){n.connectionStartCompleted(e)},function(t){n.connectionStartFailed(e,t)})}catch(i){var r;if(t.network>=2)(r=[]).push("failed to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toString()),r.push("\n"),r.push(i.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));this.connectionStartFailed(e,i)}}})}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.Promise,n=Ice.Protocol,r=Ice.LocatorRegisterPrx,o=Ice.Class,s=o({__init__:function(e,i,n){this._locator=e,this._locatorRegistry=null,this._table=i,this._background=n,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof s&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new i).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then(function(t){return e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry})},getEndpoints:function(t,n,r,o){var s=o||new i;e.assert(t.isIndirect());var c=null,a={value:!1};if(t.isWellKnown()){var l=this._table.getObjectReference(t.getIdentity(),r,a);if(!a.value){if(!this._background||null===l)return this.getObjectRequest(t).addCallback(t,null,r,s),s;this.getObjectRequest(t).addCallback(t,null,r,null)}if(l.isIndirect()){if(!l.isWellKnown())return this.getEndpoints(l,t,r,s),s}else c=l.getEndpoints()}else if(c=this._table.getAdapterEndpoints(t.getAdapterId(),r,a),!a.value){if(!this._background||null===c)return this.getAdapterRequest(t).addCallback(t,n,r,s),s;this.getAdapterRequest(t).addCallback(t,n,r,null)}return e.assert(null!==c),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,c,!0),s.succeed(c,!0),s},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var i=this._table.removeObjectReference(t.getIdentity());null!==i&&(i.isIndirect()?i.isWellKnown()||this.clearCache(i):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,i.getEndpoints()))}else{var n=this._table.removeAdapterEndpoints(t.getAdapterId());null!==n&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,n)}},trace:function(t,i,n){e.assert(i.isIndirect());var r=[];r.push(t),r.push("\n"),i.isWellKnown()?(r.push("object = "),r.push(i.getInstance().identityToString(i.getIdentity())),r.push("\n")):(r.push("adapter = "),r.push(i.getAdapterId()),r.push("\n")),r.push("endpoints = ");for(var o=0;o<n.length;o++)r.push(n[o].toString()),o+1<n.length&&r.push(":");i.getInstance().initializationData().logger.trace(i.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,i){e.assert(t.isIndirect());var n,r,o=t.getInstance();try{throw i}catch(i){if(i instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&((n=[]).push("adapter not found\n"),n.push("adapter = "),n.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object adapter",r.id=t.getAdapterId(),r;if(i instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&((n=[]).push("object not found\n"),n.push("object = "),n.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object",r.id=o.identityToString(t.getIdentity()),r;if(i instanceof Ice.NotRegisteredException)throw i;if(i instanceof Ice.LocalException)throw o.traceLevels().location>=1&&((n=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(n.push("adapter = "),n.push(t.getAdapterId()),n.push("\n")):(n.push("object = "),n.push(o.identityToString(t.getIdentity())),n.push("\n")),n.push("reason = "+i.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),i;e.assert(!1)}},getEndpointsTrace:function(e,t,i){if(null!==t&&t.length>0)i?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var n=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(n.identityToString(e.getIdentity())),r.push("\n")),n.initializationData().logger.trace(n.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),i=[];i.push("searching for adapter by id\n"),i.push("adapter = "),i.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}var n=this._adapterRequests.get(e.getAdapterId());return void 0!==n?n:(n=new d(this,e),this._adapterRequests.set(e.getAdapterId(),n),n)},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),i=[];i.push("searching for object by id\n"),i.push("object = "),i.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}var n=this._objectRequests.get(e.getIdentity());return void 0!==n?n:(n=new l(this,e),this._objectRequests.set(e.getIdentity(),n),n)},finishRequest:function(t,i,n,r){if(null===n||n.__reference().isIndirect())for(var o=0;o<i.length;++o)this._table.removeObjectReference(i[o].getIdentity());t.isWellKnown()?(null===n||n.__reference().isWellKnown()?r&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),n.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.del(t.getIdentity())):(null===n||n.__reference().isIndirect()?r&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),n.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.del(t.getAdapterId()))}});Ice.LocatorInfo=s;var c=o({__init__:function(e,t,i){this._ref=e,this._ttl=t,this._promise=i},response:function(e,t){var i=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!n.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then(function(e,t){null!==o._promise&&o._promise.succeed(e,t)},function(e){null!==o._promise&&o._promise.fail(e)})}}else i=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,i,!1),null!==this._promise&&this._promise.succeed(null===i?[]:i,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),a=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,i,n){var r=new c(e,i,n);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),l=o(a,{__init__:function(t,i){a.call(this,t,i),e.assert(i.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(e){this.exception(e)}}}),d=o(a,{__init__:function(t,i){a.call(this,t,i),e.assert(i.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(e){this.exception(e)}}})}(),Lt=Ice.AsyncResultBase,Ut=Ice.Debug,Ft=Ice.Identity,Ice.Promise,jt=Ice.PropertyNames,Bt=Ice.ServantManager,Ice.StringUtil,Ht=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"],qt=Ice.Class({__init__:function(e,t,i,n,r,o,s){if(this._instance=e,this._communicator=t,this._objectAdapterFactory=i,this._servantManager=new Bt(e,n),this._name=n,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=o,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void s.succeed(this,s);var c=this._instance.initializationData().properties,a=[],l=this.filterProperties(a);if(0!==a.length&&c.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var d=["found unknown properties for object adapter `"+n+"':"],u=0;u<a.length;++u)d.push("\n    "+a[u]);this._instance.initializationData().logger.warning(d.join(""))}if(null===r&&l)throw(p=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",p;var h=c.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+h,"")}catch(e){var p;if(e instanceof Ice.ProxyParseException)throw(p=new Ice.InitializationException).reason="invalid proxy options `"+h+"' for object adapter `"+n+"'",p;throw e}var f=this._instance.messageSizeMax()/1024,_=c.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",f);this._messageSizeMax=_<1||_>2147483647/1024?2147483647:1024*_;try{if(null===r&&(r=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==r){if(this._routerInfo=this._instance.routerManager().find(r),Ut.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(r.ice_getIdentity()));var C=this;this._routerInfo.getServerEndpoints().then(function(e){var t;for(t=0;t<e.length;++t)C._routerEndpoints.push(e[t]);for(C._routerEndpoints.sort(function(e,t){return e.compareTo(t)}),t=0;t<C._routerEndpoints.length-1;){var i=C._routerEndpoints[t],n=C._routerEndpoints[t+1];i.equals(n)?C._routerEndpoints.splice(t,1):++t}return C._routerInfo.setAdapter(C),C._instance.outgoingConnectionFactory().setRouterInfo(C._routerInfo)}).then(function(){s.succeed(C,s)},function(e){s.fail(e,s)})}else{if(c.getProperty(this._name+".Endpoints").length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");s.succeed(this,s)}}catch(p){throw this.destroy(),p}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var e=new Lt(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(e)?e:e.succeed(e)},deactivate:function(){var e=new Lt(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),e.succeed(e)},waitForDeactivate:function(){var e=new Lt(this._communicator,"deactivate",null,null,this);return e.succeed(e)},isDeactivated:function(){return this._state>=5},destroy:function(){var e=new Lt(this._communicator,"destroy",null,null,this),t=this,i=function(){return t._state<6&&(t._state=6,t._servantManager.destroy(),t._objectAdapterFactory.removeObjectAdapter(t)),e.succeed(e)};return this._state<5?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,i){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var n=t.clone();return this._servantManager.addServant(e,n,i),this.newProxy(n,i)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new Ft(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var i=[],n=0;n<this._routerEndpoints.length;++n)i.push(this._routerEndpoints[n]);var r=this._instance.referenceFactory().create(e,t,this._reference,i);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=5){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(void 0===e||null===e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,i=!0,n=this._name+".";for(t=0;t<jt.clPropNames.length;++t)if(0===n.indexOf(jt.clPropNames[t]+".")){i=!1;break}for(var r=!0,o=this._instance.initializationData().properties.getPropertiesForPrefix(n).entries;null!==o;o=o.next){var s=!1;for(t=0;t<Ht.length;++t)if(o.key===n+Ht[t]){r=!1,s=!0;break}!s&&i&&e.push(o.key)}return r}}),Ice.ObjectAdapterI=qt,zt=Ice.HashMap,Wt=Ice.LocatorInfo,Gt=Ice.LocatorTable,Qt=Ice.LocatorPrx,Xt=Ice.Class({__init__:function(e){this._background=e.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new zt(zt.compareEquals),this._locatorTables=new zt(zt.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var t=Qt.uncheckedCast(e.ice_locator(null)),i=this._table.get(t);if(void 0===i){var n=this._locatorTables.get(t.ice_getIdentity());void 0===n&&(n=new Gt,this._locatorTables.set(t.ice_getIdentity(),n)),i=new Wt(t,n,this._background),this._table.set(t,i)}return i}}),Ice.LocatorManager=Xt,function(){Ice.AsyncResultBase;var e=Ice.ObjectAdapterI,t=Ice.Promise,i=Ice.Class({__init__:function(e,i){this._instance=e,this._communicator=i,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance?this._shutdownPromise:(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map(function(e){return e.deactivate()})),this._shutdownPromise)},waitForShutdown:function(){var e=this;return this._shutdownPromise.then(function(){return t.all(e._adapters.map(function(e){return e.waitForDeactivate()}))})},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then(function(){return t.all(e._adapters.map(function(e){return e.destroy()}))})},createObjectAdapter:function(t,i,n){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,n)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,i,!1,n),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(e){n.fail(e,n)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=i}(),Ii.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=Ii.defineObject(function(e,t,i,n,r){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==i?i:0,this.totalLifetime=void 0!==n?n:new Ice.Long(0,0),this.failures=void 0!==r?r:0},Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)},function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()},!1),IceMX.MetricsPrx=Ii.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),Ii.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=Ii.defineStruct(function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null},!1,function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)},function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)},2,!1),Ii.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),Ii.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),Ii.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=Ii.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),Ii.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=Ii.defineObject(function(e,t,i,n,r,o,s,c){IceMX.Metrics.call(this,e,t,i,n,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==s?s:0,this.inUseForOther=void 0!==c?c:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)},function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()},!1),IceMX.ThreadMetricsPrx=Ii.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=Ii.defineObject(function(e,t,i,n,r,o,s,c){IceMX.Metrics.call(this,e,t,i,n,r),this.userException=void 0!==o?o:0,this.size=void 0!==s?s:new Ice.Long(0,0),this.replySize=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.DispatchMetricsPrx=Ii.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=Ii.defineObject(function(e,t,i,n,r,o,s){IceMX.Metrics.call(this,e,t,i,n,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.ChildInvocationMetricsPrx=Ii.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=Ii.defineObject(function(e,t,i,n,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,i,n,r,o,s)},IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=Ii.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=Ii.defineObject(function(e,t,i,n,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,i,n,r,o,s)},IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=Ii.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=Ii.defineObject(function(e,t,i,n,r,o,s,c,a){IceMX.Metrics.call(this,e,t,i,n,r),this.retry=void 0!==o?o:0,this.userException=void 0!==s?s:0,this.remotes=void 0!==c?c:null,this.collocated=void 0!==a?a:null},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)},function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)},!1),IceMX.InvocationMetricsPrx=Ii.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=Ii.defineObject(function(e,t,i,n,r,o,s){IceMX.Metrics.call(this,e,t,i,n,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==s?s:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)},function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()},!1),IceMX.ConnectionMetricsPrx=Ii.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),Ii.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var e=Ice.HashMap,t=Ice.ConnectRequestHandler,i=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,i){var n,r=!1;return e.getCacheConnection()?(n=this._handlers.get(e))||(n=new t(e,i),this._handlers.set(e,n),r=!0):(r=!0,n=new t(e,i)),r&&e.getConnection().then(function(e,t){n.setConnection(e,t)},function(e){n.setException(e)}),i.__setRequestHandler(n.connect(i))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=i}(),Ice.Process=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),Ii.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),Kt=Ice.TcpEndpointI,Yt=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var i=new Kt(this._instance);return i.initWithOptions(e,t),i},read:function(e){var t=new Kt(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new Yt(e)}}),Ice.TcpEndpointFactory=Yt,Ii.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),Ii.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=Ii.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),Ii.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=Ii.defineStruct(function(e,t,i,n){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==i?i:"",this.message=void 0!==n?n:""},!0,function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)},function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()},11,!1),Ii.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=Ii.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),Ii.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=Ii.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=Ii.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=Ii.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),Ii.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),Jt=Ice.WSEndpoint,Zt=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var i=new Jt(this._instance,this._delegate.create(e,t));return i.initWithOptions(e),i},read:function(e){var t=new Jt(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=Zt,Ii.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),$t=Ice.AsyncResultBase,ei=Ice.Debug,ti=Ice.DefaultsAndOverrides,ii=Ice.EndpointFactoryManager,Ice.HashMap,ni=Ice.ImplicitContextI,ri=Ice.LocatorManager,Ice.Logger,oi=Ice.ObjectAdapterFactory,si=Ice.ObjectFactoryManager,ci=Ice.OutgoingConnectionFactory,Ice.Promise,ai=Ice.Properties,li=Ice.ProxyFactory,di=Ice.RetryQueue,ui=Ice.RouterManager,hi=Ice.Timer,pi=Ice.TraceLevels,fi=Ice.ReferenceFactory,_i=Ice.RequestHandlerFactory,Ci=Ice.ACMConfig,mi=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return ei.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return ei.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return ei.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=ai.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new pi(this._initData.properties),this._defaultsAndOverrides=new ti(this._initData.properties,this._initData.logger);var i=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=i<1||i>2147483647/1024?2147483647:1024*i,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(i=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=i<1?i:i>2147483647/1024?2147483647:1024*i),this._clientACM=new Ci(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new Ci(this._initData.properties,this._initData.logger,"Ice.ACM",new Ci)),this._implicitContext=ni.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new ui,this._locatorManager=new ri(this._initData.properties),this._referenceFactory=new fi(this,e),this._requestHandlerFactory=new _i(this,e),this._proxyFactory=new li(this),this._endpointFactoryManager=new ii(this);var n=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),r=new Ice.TcpEndpointFactory(n);this._endpointFactoryManager.add(r);var o=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),s=new Ice.WSEndpointFactory(o,r.clone(o));this._endpointFactoryManager.add(s);var c=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),a=new Ice.TcpEndpointFactory(c);this._endpointFactoryManager.add(a);var l=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),d=new Ice.WSEndpointFactory(l,a.clone(l));this._endpointFactoryManager.add(d),this._outgoingConnectionFactory=new ci(e,this),this._servantFactoryManager=new si,this._objectAdapterFactory=new oi(this,e),this._retryQueue=new di(this),this._timer=new hi(this._initData.logger);var u=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==u&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(u));var h=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==h&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(h)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2(function(){t.fail(e)}):t.fail(e)}},destroy:function(){var e=new $t(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(e),e;this._state=1;var t=this;return Ice.Promise.try2(function(){if(t._objectAdapterFactory)return t._objectAdapterFactory.shutdown()}).then(function(){if(null!==t._outgoingConnectionFactory&&t._outgoingConnectionFactory.destroy(),null!==t._objectAdapterFactory)return t._objectAdapterFactory.destroy()}).then(function(){if(null!==t._outgoingConnectionFactory)return t._outgoingConnectionFactory.waitUntilFinished()}).then(function(){var i;if(t._retryQueue&&t._retryQueue.destroy(),t._timer&&t._timer.destroy(),t._servantFactoryManager&&t._servantFactoryManager.destroy(),t._routerManager&&t._routerManager.destroy(),t._locatorManager&&t._locatorManager.destroy(),t._endpointFactoryManager&&t._endpointFactoryManager.destroy(),t._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var n=t._initData.properties.getUnusedProperties();if(n.length>0){var r=[];for(r.push("The following properties were set but never read:"),i=0;i<n.length;++i)r.push("\n    "),r.push(n[i]);t._initData.logger.warning(r.join(""))}}if(t._objectAdapterFactory=null,t._outgoingConnectionFactory=null,t._retryQueue=null,t._timer=null,t._servantFactoryManager=null,t._referenceFactory=null,t._requestHandlerFactory=null,t._proxyFactory=null,t._routerManager=null,t._locatorManager=null,t._endpointFactoryManager=null,t._state=2,this._destroyPromises)for(i=0;i<this._destroyPromises.length;++i)this._destroyPromises[i].succeed(this._destroyPromises[i]);e.succeed(e)}).exception(function(t){if(this._destroyPromises)for(var i=0;i<this._destroyPromises.length;++i)this._destroyPromises[i].fail(t,this._destroyPromises[i]);e.fail(t,e)}),e}}),Ice.Instance=mi,gi=Ice.Instance,Ice.Promise,yi=Ice.Class({__init__:function(e){this._instance=new gi(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var i=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,i),i},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var i=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),n=this.proxyToProperty(t,e+".Router").entries;null!==n;n=n.next)this.getProperties().setProperty(n.key,n.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,i),i},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(yi.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=yi,vi=Ice.Protocol,Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var i=null,n=null;if(e instanceof Array)i=e;else if(e instanceof Ice.InitializationData)n=e;else if(void 0!==e&&null!==e)throw new Ice.InitializationException("invalid argument to initialize");if(void 0!==t&&null!==t){if(!(t instanceof Ice.InitializationData&&null===n))throw new Ice.InitializationException("invalid argument to initialize");n=t}(n=null===n?new Ice.InitializationData:n.clone()).properties=Ice.createProperties(i,n.properties);var r=new Ice.Communicator(n);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return vi.currentProtocol.clone()},Ice.currentEncoding=function(){return vi.currentEncoding.clone()},e.Ice=Ice,e.IceMX=IceMX,e.IceSSL=IceSSL}(),function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject(function(e,t,i,n,r,o,s,c,a,l,d,u){IceMX.Metrics.call(this,e,t,i,n,r),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==s?s:0,this.routingTableSize=void 0!==c?c:0,this.queuedClient=void 0!==a?a:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==d?d:0,this.overriddenServer=void 0!==u?u:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)},function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()},!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct(function(e,t,i,n,r,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==i?i:"",this.localPort=void 0!==n?n:0,this.cipher=void 0!==r?r:"",this.certs=void 0!==o?o:null},!0,function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)},function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)},12,!1),Glacier2.CannotCreateSessionException=t.defineUserException(function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""},Ice.UserException,"Glacier2::CannotCreateSessionException",function(e){e.writeString(this.reason)},function(e){this.reason=e.readString()},!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException(function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""},Ice.UserException,"Glacier2::PermissionDeniedException",function(e){e.writeString(this.reason)},function(e){this.reason=e.readString()},!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}(),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("Common");s.ConferenceError=o.defineUserException(function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""},n.UserException,"Common::ConferenceError",function(e){e.writeInt(this.error),e.writeString(this.reason)},function(e){this.error=e.readInt(),this.reason=e.readString()},!1,!1),i.Common=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("MS");s.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),s.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_RESERV08",8],["ACT_RESERV09",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),s.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),s.AudioStreamParam=o.defineStruct(function(e,t,i,n,r){this.codecType=void 0!==e?e:s.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:s.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==i?i:s.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==n?n:0,this.shareListen=void 0!==r&&r},!0,function(e){s.AudioCodecType.__write(e,this.codecType),s.AudioTransType.__write(e,this.transType),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)},function(e){this.codecType=s.AudioCodecType.__read(e),this.transType=s.AudioTransType.__read(e),this.ioMode=s.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()},8,!1),s.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),s.VideoStreamParam=o.defineStruct(function(e,t,i,n,r,o,c,a){this.contentType=void 0!==e?e:s.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==i?i:0,this.ioMode=void 0!==n?n:s.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==r?r:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==c&&c,this.screenAuthKey=void 0!==a?a:""},!0,function(e){s.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)},function(e){this.contentType=s.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=s.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()},13,!1),s.NetworkAddress=o.defineStruct(function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0},!0,function(e){e.writeString(this.ip),e.writeShort(this.port)},function(e){this.ip=e.readString(),this.port=e.readShort()},3,!1),s.MediaStreamAddr=o.defineStruct(function(e,t){this.netAddr=void 0!==e?e:new s.NetworkAddress,this.MSID=void 0!==t?t:0},!0,function(e){s.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)},function(e){this.netAddr=s.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()},7,!1),s.ConferenceInfo=o.defineStruct(function(e,t,i,n){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==i?i:0,this.peerTermName=void 0!==n?n:""},!0,function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)},function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()},8,!1),o.defineDictionary(s,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),i.MS=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Trans/MSPub").MS),o=n.Slice;r.LanTerm=o.defineStruct(function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0},!0,function(e){e.writeString(this.hostIP),e.writeShort(this.termID)},function(e){this.hostIP=e.readString(),this.termID=e.readShort()},3,!1),o.defineSequence(r,"TermSeqHelper","MS.LanTerm",!1),r.MSClient=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),r.MSClientPrx=o.defineProxy(n.ObjectPrx,r.MSClient.ice_staticId,void 0),o.defineOperations(r.MSClient,r.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[r.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[r.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[r.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[r.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),r.ClientReport=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),r.ClientReportPrx=o.defineProxy(n.ObjectPrx,r.ClientReport.ice_staticId,void 0),o.defineOperations(r.ClientReport,r.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,]}),i.MS=r}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("SendCmd");s.CmdError=o.defineUserException(function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""},n.UserException,"SendCmd::CmdError",function(e){e.writeInt(this.error),e.writeString(this.reason)},function(e){this.error=e.readInt(),this.reason=e.readString()},!1,!1),s.UnknowErr=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),s.CmdNotFound=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),s.CmdNotImplement=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),s.AppException=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),s.AppReturnInvalid=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),s.SessionInvalid=o.defineUserException(function(e,t,i){s.CmdError.call(this,e,t,i)},s.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),s.Cmd=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),s.CmdPrx=o.defineProxy(n.ObjectPrx,s.Cmd.ice_staticId,void 0),o.defineOperations(s.Cmd,s.CmdPrx,{sendCmd:[,,,,,[7],[[7]],,[s.CmdError],,],sendBuffer:[,,,,,[7],[[7],["Ice.ByteSeqHelper"]],,[s.CmdError],,]}),i.SendCmd=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("Conference");Object.defineProperty(s,"CT_USER",{value:1}),Object.defineProperty(s,"CT_CONTACT",{value:2}),Object.defineProperty(s,"CT_TMP",{value:3}),Object.defineProperty(s,"CT_CLIENT",{value:6}),Object.defineProperty(s,"CT_VIRTUAL",{value:7}),s.Contact=o.defineStruct(function(e,t,i,n,r,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==i?i:"",this.email=void 0!==n?n:"",this.mobile=void 0!==r?r:"",this.confPhone=void 0!==o?o:""},!0,function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)},function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()},9,!1),s.ContactIdType=o.defineStruct(function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0},!0,function(e){e.writeInt(this.id),e.writeByte(this.type)},function(e){this.id=e.readInt(),this.type=e.readByte()},5,!0),o.defineSequence(s,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(s,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(s,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,n.ArrayUtil.equals),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=(t("Common/Exception").Common,n.Slice),s=r.module("Conference");Object.defineProperty(s,"SLICE_VER",{value:"1.6"}),Object.defineProperty(s,"ANON_TERMID",{value:0}),Object.defineProperty(s,"ALL_TERMID",{value:32767}),Object.defineProperty(s,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(s,"TERM_PC",{value:1}),Object.defineProperty(s,"TERM_PHONE",{value:2}),Object.defineProperty(s,"NORMAL_AT",{value:0}),Object.defineProperty(s,"DEMO_AT",{value:1}),Object.defineProperty(s,"HOST_AT",{value:2}),Object.defineProperty(s,"PSTN_HOST_AT",{value:4}),Object.defineProperty(s,"ASSISTANT_AT",{value:8}),Object.defineProperty(s,"OPT_VIDEO",{value:1}),Object.defineProperty(s,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(s,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(s,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(s,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(s,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(s,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(s,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(s,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(s,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(s,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(s,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(s,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(s,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(s,"OPT_REVIEW_CHAT",{value:16384}),o.defineSequence(s,"ByteListHelper","Ice.ByteHelper",!0),o.defineDictionary(s,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),s.ASTATUS=o.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),s.WINDOW_MODE=o.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),s.VSTATUS=o.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),s.VIDEOLEVEL=o.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),s.VideoSize=o.defineStruct(function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0},!0,function(e){e.writeShort(this.w),e.writeShort(this.h)},function(e){this.w=e.readShort(),this.h=e.readShort()},4,!0),s.VideoQuality=o.defineStruct(function(e,t,i,n,r,o){this.vl=void 0!==e?e:s.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new s.VideoSize,this.isec=void 0!==i?i:0,this.fps=void 0!==n?n:null,this.crf=void 0!==r?r:null,this.cost=void 0!==o?o:""},!0,function(e){s.VIDEOLEVEL.__write(e,this.vl),s.VideoSize.write(e,this.vs),e.writeByte(this.isec),n.ByteSeqHelper.write(e,this.fps),n.ByteSeqHelper.write(e,this.crf),e.writeString(this.cost)},function(e){this.vl=s.VIDEOLEVEL.__read(e),this.vs=s.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=n.ByteSeqHelper.read(e),this.crf=n.ByteSeqHelper.read(e),this.cost=e.readString()},9,!1),s.VIDEOLAYOUTMODE=o.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(s,"MVM_1MAIN",{value:0}),Object.defineProperty(s,"MVM_1v1",{value:1}),Object.defineProperty(s,"MVM_2VIDEO",{value:2}),Object.defineProperty(s,"MVM_4VIDEO",{value:3}),Object.defineProperty(s,"MVM_6VIDEO",{value:4}),Object.defineProperty(s,"VIDEO_SS_1M",{value:0}),Object.defineProperty(s,"VIDEO_SS_5M",{value:1}),Object.defineProperty(s,"VIDEO_SS_13M",{value:2}),Object.defineProperty(s,"VIDEO_SS_2",{value:3}),Object.defineProperty(s,"VIDEO_SS_4",{value:4}),Object.defineProperty(s,"VIDEO_SS_9",{value:5}),Object.defineProperty(s,"VIDEO_SS_16",{value:6}),Object.defineProperty(s,"VIDEO_SS_25",{value:7}),Object.defineProperty(s,"VIDEO_SS_NULL",{value:255}),o.defineSequence(s,"VideoQualitySeqHelper","Conference.VideoQuality",!1),s.SYNCMODE=o.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),s.TabID=o.defineStruct(function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.localID)},function(e){this.termID=e.readShort(),this.localID=e.readShort()},4,!0),o.defineSequence(s,"TabIDSeqHelper","Conference.TabID",!0),s.WBBOARD_TYPE=o.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),s.WBBOARD_DOCTYPE=o.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),s.WB_SCALE_TYPE=o.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),s.WB_ROTATE_TYPE=o.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),s.WhiteBoardDescribe=o.defineStruct(function(e,t,i,n,r,o,c,a,l,d,u,h,p,f,_,C){this.wID=void 0!==e?e:new s.TabID,this.wType=void 0!==t?t:s.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==i?i:s.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==n?n:"",this.docName=void 0!==r?r:"",this.width=void 0!==o?o:0,this.height=void 0!==c?c:0,this.scaleType=void 0!==a?a:s.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==l?l:s.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==d?d:0,this.curPage=void 0!==u?u:0,this.animID=void 0!==h?h:0,this.animFrames=void 0!==p?p:0,this.showThum=void 0!==f&&f,this.bAll=void 0!==_&&_,this.allowTerms=void 0!==C?C:null},!0,function(e){s.TabID.write(e,this.wID),s.WBBOARD_TYPE.__write(e,this.wType),s.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),s.WB_SCALE_TYPE.__write(e,this.scaleType),s.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),n.ShortSeqHelper.write(e,this.allowTerms)},function(e){this.wID=s.TabID.read(e,this.wID),this.wType=s.WBBOARD_TYPE.__read(e),this.docType=s.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=s.WB_SCALE_TYPE.__read(e),this.rotation=s.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=n.ShortSeqHelper.read(e)},37,!1),o.defineSequence(s,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=(t("Common/Exception").Common,r.require(e,["Control/PublicTypes","Control/Contact"]).Conference),s=n.Slice;Object.defineProperty(o,"ACNT_ADMIN",{value:0}),Object.defineProperty(o,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(o,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(o,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(o,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(o,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(o,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(o,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(o,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(o,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(o,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(o,"MINFO_YDYUSERID",{value:"ydyuserid"}),o.Member=s.defineStruct(function(e,t,i,n,r,s,c,a,l,d,u,h){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==i?i:0,this.nickname=void 0!==n?n:"",this.actor=void 0!==r?r:0,this.audioStatus=void 0!==s?s:o.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==c?c:o.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==a&&a,this.rights=void 0!==l?l:null,this.contactId=void 0!==d?d:new o.ContactIdType,this.phone=void 0!==u?u:"",this.extProperty=void 0!==h?h:null},!1,function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),o.ASTATUS.__write(e,this.audioStatus),o.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),o.ByteListHelper.write(e,this.rights),o.ContactIdType.write(e,this.contactId),e.writeString(this.phone),o.StringStringMapHelper.write(e,this.extProperty)},function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=o.ASTATUS.__read(e),this.videoStatus=o.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=o.ByteListHelper.read(e),this.contactId=o.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)},18,!1),s.defineSequence(o,"MemberSeqHelper","Conference.Member",!1),i.Conference=o}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Member","Control/Contact","Control/PublicTypes"]).Conference,c=n.Slice;s.ConfIdError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),s.AuthError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),s.ReenterError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),s.RoomLockedError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),s.NicknameError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),s.NicknameDuplicatedError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),s.NotPermitError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),s.MemberDeactivedError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),s.MemberOverflowError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),s.ConfMemberOverflowError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),s.BalanceLessError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),s.KickoutSelfError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),s.ConferenceEndError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),s.ConferenceBeginError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),s.PINError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),s.FieldDuplicatedError=c.defineUserException(function(e,t,i,n,r){o.ConferenceError.call(this,e,t,r),this.name=void 0!==i?i:"",this.value=void 0!==n?n:""},o.ConferenceError,"Conference::FieldDuplicatedError",function(e){e.writeString(this.name),e.writeString(this.value)},function(e){this.name=e.readString(),this.value=e.readString()},!1,!1),s.InviteeNotFoundError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),s.InviteeDuplicatedError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),s.InvalidTermTypeError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),s.NoPSTNHostError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),s.ConferencePrepareError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),s.ResourceAllocateError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),s.OnlyInviteeCanLogin=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),s.MemberAlreadyInMeet=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),s.MemberAlreadyInCanTryVisitor=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),s.MismatchClientVersion=c.defineUserException(function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.newVer=void 0!==i?i:""},o.ConferenceError,"Conference::MismatchClientVersion",function(e){e.writeString(this.newVer)},function(e){this.newVer=e.readString()},!1,!1),s.PeerHasBeen1v1SubMeeting=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),s.LiveStreamNotStart=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),s.PstnHostCantLoginInWeb=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),s.CannotBoradcast=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),s.CannotInteractBoradcast=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),s.ConfCannotInteractBoradcast=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),s.ContainsSensitiveWords=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),s.ThirdPartyLiveIsOn=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),s.ListLiveIsOn=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),s.ClientLiveIsOn=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),s.LuckyDrawNotExists=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),s.LuckyDrawCfgFails=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),s.JoinLuckyDrawFails=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),s.AnnouceLuckyDrawFails=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),s.AnnouceLuckyDrawNoMember=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),s.SeviceNotEnabled=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),Object.defineProperty(s,"SET_PSTN_NUM",{value:1}),Object.defineProperty(s,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(s,"BIND_PSTN_NUM",{value:4}),c.defineDictionary(s,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(s,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(s,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(s,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(s,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(s,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(s,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(s,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(s,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(s,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(s,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(s,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(s,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(s,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(s,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(s,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(s,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(s,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(s,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(s,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(s,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(s,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(s,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(s,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(s,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(s,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(s,"CLINET_WEBRTC_CODECS",{value:"rtc_codecs"}),Object.defineProperty(s,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(s,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(s,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(s,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(s,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(s,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(s,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(s,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(s,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(s,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(s,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(s,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(s,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(s,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(s,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(s,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(s,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(s,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(s,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(s,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(s,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(s,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(s,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(s,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(s,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(s,"LIVETYPE_OTHER",{value:"2"}),s.LoginRequest=c.defineStruct(function(e,t,i,n,r,o,s,c,a,l,d,u){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==i?i:0,this.memberId=void 0!==n?n:0,this.memberType=void 0!==r?r:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==s?s:null,this.accessNo=void 0!==c?c:0,this.publicIP=void 0!==a?a:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==d?d:"",this.extProperty=void 0!==u?u:null},!1,function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),s.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),s.StringStringMapHelper.write(e,this.extProperty)},function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=s.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=s.StringStringMapHelper.read(e)},22,!1),s.FileServerInfo=c.defineStruct(function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""},!0,function(e){e.writeString(this.fsProxy),e.writeString(this.key)},function(e){this.fsProxy=e.readString(),this.key=e.readString()},2,!1),s.REC_STATE=c.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),c.defineSequence(s,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(s,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(s,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(s,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(s,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(s,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(s,"CONFINFO_URL",{value:"url"}),Object.defineProperty(s,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(s,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(s,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(s,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(s,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(s,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(s,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(s,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(s,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(s,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(s,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(s,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(s,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(s,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(s,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(s,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(s,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(s,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(s,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(s,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(s,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(s,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(s,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(s,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(s,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(s,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(s,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(s,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(s,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(s,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(s,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(s,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(s,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(s,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(s,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(s,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(s,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(s,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(s,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(s,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(s,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(s,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(s,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(s,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(s,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(s,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(s,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(s,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(s,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(s,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(s,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(s,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(s,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(s,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(s,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(s,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(s,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(s,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(s,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(s,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(s,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(s,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(s,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(s,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(s,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(s,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(s,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(s,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(s,"CONFINFO_OEMKEY",{value:"oem_key"}),s.LoginResponse=c.defineStruct(function(e,t,i,n,r,o,c,a,l,d,u,h,p,f,_,C,m,g,y,v,I,S,R){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==i?i:new s.Contact,this.modules=void 0!==n?n:null,this.activeMembers=void 0!==r?r:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==c&&c,this.confInfo=void 0!==a?a:null,this.isBegan=void 0!==l&&l,this.countdown=void 0!==d?d:0,this.fileServers=void 0!==u?u:null,this.vqs=void 0!==h?h:null,this.windowMode=void 0!==p?p:s.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==f?f:0,this.vlo=void 0!==_?_:s.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==C&&C,this.curMainTab=void 0!==m?m:new s.TabID,this.curSubTab=void 0!==g?g:new s.TabID,this.bFull=void 0!==y&&y,this.sm=void 0!==v?v:s.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==I?I:0,this.lastElemValue=void 0!==S?S:0,this.wbDescibes=void 0!==R?R:null},!1,function(e){e.writeShort(this.termId),e.writeInt(this.option),s.Contact.write(e,this.myDetail),s.ModuleDictHelper.write(e,this.modules),s.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),s.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),s.FileServerSeqHelper.write(e,this.fileServers),s.VideoQualitySeqHelper.write(e,this.vqs),s.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),s.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),s.TabID.write(e,this.curMainTab),s.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),s.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),s.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)},function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=s.Contact.read(e,this.myDetail),this.modules=s.ModuleDictHelper.read(e),this.activeMembers=s.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=s.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=s.FileServerSeqHelper.read(e),this.vqs=s.VideoQualitySeqHelper.read(e),this.windowMode=s.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=s.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=s.TabID.read(e,this.curMainTab),this.curSubTab=s.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=s.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=s.WhiteBoardDescribeSeqHelper.read(e)},50,!1),s.ConferenceRoom=c.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceRoom","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceRoomPrx=c.defineProxy(n.ObjectPrx,s.ConferenceRoom.ice_staticId,void 0),c.defineOperations(s.ConferenceRoom,s.ConferenceRoomPrx,{login:[,,,1,,[s.LoginResponse],[[s.LoginRequest]],,[o.ConferenceError],,]}),s.SSLoginRequest=c.defineStruct(function(e,t,i,n,r,o,s,c){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==i?i:0,this.phoneNum=void 0!==n?n:"",this.callbacks=void 0!==r?r:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==s?s:"",this.sessionId=void 0!==c?c:""},!1,function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),s.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)},function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=s.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()},14,!1),s.SSLoginResponse=c.defineStruct(function(e,t,i,n,r,o,c,a){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==i?i:0,this.needPIN=void 0!==n&&n,this.PINLen=void 0!==r?r:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==c&&c,this.audioStatus=void 0!==a?a:s.ASTATUS.AUNKNOWN},!1,function(e){e.writeShort(this.termId),s.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),s.ASTATUS.__write(e,this.audioStatus)},function(e){this.termId=e.readShort(),this.modules=s.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=s.ASTATUS.__read(e)},12,!1),Object.defineProperty(s,"PHASE_ALERTING",{value:0}),Object.defineProperty(s,"PHASE_CONNECT",{value:1}),Object.defineProperty(s,"PHASE_END",{value:2}),Object.defineProperty(s,"END_REASON_NORMAL",{value:0}),Object.defineProperty(s,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(s,"END_REASON_REJECT",{value:2}),Object.defineProperty(s,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(s,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(s,"END_REASON_BALANCE_LESS",{value:5}),s.SoftSwitchUser=c.defineObject(void 0,n.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),s.SoftSwitchUserPrx=c.defineProxy(n.ObjectPrx,s.SoftSwitchUser.ice_staticId,void 0),c.defineOperations(s.SoftSwitchUser,s.SoftSwitchUserPrx,{login:[,,,1,,[s.SSLoginResponse],[[s.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),s.AAAReport=c.defineObject(void 0,n.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),s.AAAReportPrx=c.defineProxy(n.ObjectPrx,s.AAAReport.ice_staticId,void 0),c.defineOperations(s.AAAReport,s.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),s.WebAdmin=c.defineObject(void 0,n.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),s.WebAdminPrx=c.defineProxy(n.ObjectPrx,s.WebAdmin.ice_staticId,void 0),c.defineOperations(s.WebAdmin,s.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,]}),c.defineDictionary(s,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,n.ArrayUtil.equals),s.ChangedRights=c.defineStruct(function(e,t,i){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==i?i:null},!0,function(e){e.writeShort(this.termId),s.ByteListHelper.write(e,this.addedRights),s.ByteListHelper.write(e,this.reducedRights)},function(e){this.termId=e.readShort(),this.addedRights=s.ByteListHelper.read(e),this.reducedRights=s.ByteListHelper.read(e)},4,!1),c.defineSequence(s,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(s,"INVITE_PREPARE",{value:0}),Object.defineProperty(s,"PSTN_CALLING",{value:1}),Object.defineProperty(s,"PSTN_RING",{value:2}),Object.defineProperty(s,"PSTN_CONNECTED",{value:3}),Object.defineProperty(s,"PSTN_HUNG",{value:4}),Object.defineProperty(s,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(s,"PSTN_REJECT",{value:6}),Object.defineProperty(s,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(s,"PSTN_BUSY",{value:8}),Object.defineProperty(s,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(s,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(s,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(s,"INV_SMS_FAILED",{value:2}),Object.defineProperty(s,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(s,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_READED",{value:3}),Object.defineProperty(s,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(s,"WDT_1v1SUBMT_CHAT",{value:1}),s.InvitedMember=c.defineStruct(function(e,t,i){this.member=void 0!==e?e:new s.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==i?i:0},!0,function(e){s.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)},function(e){this.member=s.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()},14,!1),c.defineSequence(s,"InvitedMembersHelper","Conference.InvitedMember",!1),s.INVITE_TYPE=c.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),c.defineDictionary(s,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,n.ArrayUtil.equals),c.defineDictionary(s,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,n.HashMap.compareEquals),c.defineDictionary(s,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(s,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(s,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(s,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(s,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(s,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(s,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(s,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(s,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(s,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(s,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(s,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(s,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(s,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(s,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(s,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(s,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(s,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(s,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(s,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(s,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(s,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(s,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(s,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(s,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(s,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),Object.defineProperty(s,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(s,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(s,"LD_MEMBER_ALL",{value:3}),s.LDPrize=c.defineStruct(function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0},!0,function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)},function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()},5,!1),s.LuckyDrawCfg=c.defineStruct(function(e,t,i,n){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==i&&i,this.prizes=void 0!==n?n:new s.LDPrize},!0,function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),s.LDPrize.write(e,this.prizes)},function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=s.LDPrize.read(e,this.prizes)},14,!1),s.LuckyDrawMember=c.defineStruct(function(e,t,i){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==i?i:0},!0,function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)},function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()},6,!1),c.defineSequence(s,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),s.LDMembersCNT=c.defineStruct(function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0},!0,function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)},function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()},8,!0),s.LuckyResult=c.defineStruct(function(e,t,i){this.prize=void 0!==e?e:new s.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==i?i:null},!0,function(e){s.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),s.LuckyDrawMembersHelper.write(e,this.res)},function(e){this.prize=s.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=s.LuckyDrawMembersHelper.read(e)},10,!1),s.VoteState=c.defineStruct(function(e,t,i,n,r){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==i?i:0,this.voteInfo=void 0!==n?n:"",this.memberVotes=void 0!==r?r:null},!1,function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),s.StringStringMapHelper.write(e,this.memberVotes)},function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=s.StringStringMapHelper.read(e)},9,!1),s.ConferenceSession=c.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceSessionPrx=c.defineProxy(n.ObjectPrx,s.ConferenceSession.ice_staticId,void 0),c.defineOperations(s.ConferenceSession,s.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[s.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[s.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[s.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[s.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[s.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[s.ContactIdType],[[s.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[s.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[s.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[s.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[s.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[s.VoteState],,,[o.ConferenceError],,]}),Object.defineProperty(s,"SVR_NOTIFY_BALANCE_LESS",{value:1}),s.ConferenceCallback=c.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceCallbackPrx=c.defineProxy(n.ObjectPrx,s.ConferenceCallback.ice_staticId,void 0),c.defineOperations(s.ConferenceCallback,s.ConferenceCallbackPrx,{entered:[,,,,,,[[s.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[s.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[s.INVITE_TYPE.__helper],[s.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[s.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[s.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[s.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[s.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[s.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[s.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,]}),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Conference","Control/PublicTypes"]).Conference,c=n.Slice;s.lockQuesError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),s.delQuesError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),s.quesNotExistError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),s.modifyQuesTypeError=c.defineUserException(function(e,t,i){o.ConferenceError.call(this,e,t,i)},o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),s.QuesType=c.defineStruct(function(e,t,i){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==i&&i},!0,function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)},function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()},3,!1),s.QuesState=c.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),s.QuesAsk=c.defineStruct(function(e,t,i,n,r){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==i?i:0,this.content=void 0!==n?n:"",this.nickname=void 0!==r?r:""},!0,function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)},function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()},9,!1),s.QuesDeal=c.defineStruct(function(e,t,i,n,r,o,c,a){this.state=void 0!==e?e:s.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==i?i:0,this.replyTime=void 0!==n?n:0,this.publishTermID=void 0!==r?r:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==c?c:0,this.delTime=void 0!==a?a:0},!0,function(e){s.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)},function(e){this.state=s.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()},20,!1),s.QuesInf=c.defineStruct(function(e,t,i){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new s.QuesAsk,this.deal=void 0!==i?i:new s.QuesDeal},!0,function(e){e.writeInt(this.quesID),s.QuesAsk.write(e,this.ask),s.QuesDeal.write(e,this.deal)},function(e){this.quesID=e.readInt(),this.ask=s.QuesAsk.read(e,this.ask),this.deal=s.QuesDeal.read(e,this.deal)},33,!1),c.defineSequence(s,"QuesListHelper","Conference.QuesInf",!1),c.defineSequence(s,"QuesTypeListHelper","Conference.QuesType",!1),s.AnsQueCallback=c.defineObject(void 0,n.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQueCallbackPrx=c.defineProxy(n.ObjectPrx,s.AnsQueCallback.ice_staticId,void 0),c.defineOperations(s.AnsQueCallback,s.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[s.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),s.AnsQuesCtrl=c.defineObject(void 0,n.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQuesCtrlPrx=c.defineProxy(n.ObjectPrx,s.AnsQuesCtrl.ice_staticId,void 0),c.defineOperations(s.AnsQuesCtrl,s.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[s.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,s=n.Slice;o.IMFont=s.defineStruct(function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0},!0,function(e){e.writeInt(this.color),e.writeByte(this.size)},function(e){this.color=e.readInt(),this.size=e.readByte()},5,!0),o.InIMMsgInfo=s.defineStruct(function(e,t,i,n,r){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==i?i:new o.IMFont,this.msg=void 0!==n?n:"",this.sendTime=void 0!==r?r:0},!0,function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)},function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()},13,!1),o.OutIMMsgInfo=s.defineStruct(function(e,t,i,n){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==i?i:"",this.inMsg=void 0!==n?n:new o.InIMMsgInfo},!0,function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)},function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)},20,!1),s.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),s.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=s.defineProxy(n.ObjectPrx,o.IMCallback.ice_staticId,void 0),s.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=s.defineObject(void 0,n.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=s.defineProxy(n.ObjectPrx,o.IMSession.ice_staticId,void 0),s.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[r.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[r.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[r.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[r.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[r.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[r.ConferenceError],,],clearIMMsg:[,,,1,,,,,[r.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;o.NoResourceForMIC=s.defineUserException(function(e,t,i){r.ConferenceError.call(this,e,t,i)},r.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),o.StartRecordError=s.defineUserException(function(e,t,i){r.ConferenceError.call(this,e,t,i)},r.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),o.PlayBackGroundMusicFail=s.defineUserException(function(e,t,i){r.ConferenceError.call(this,e,t,i)},r.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),s.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),s.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),s.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=s.defineStruct(function(e,t,i,n,r,o,s,c){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==i&&i,this.hiLevelEC=void 0!==n?n:0,this.outputDType=void 0!==r?r:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==s?s:0,this.inputVolume=void 0!==c?c:0},!0,function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)},function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()},23,!1),o.remoteAudioInf=s.defineStruct(function(e,t,i){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==i?i:new o.remoteAudio},!0,function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)},function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)},25,!1),o.AudioCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=s.defineProxy(n.ObjectPrx,o.AudioCallback.ice_staticId,void 0),s.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,]}),o.AudioCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=s.defineProxy(n.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),s.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],askForMic:[,,,1,,,,,[r.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeAll:[,,,1,,,,,[r.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[r.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[r.ConferenceError],,],startRecord:[,,,1,,,,,[r.ConferenceError],,],isRecording:[,,,1,,[1],,,[r.ConferenceError],,],stopRecord:[,,,1,,,,,[r.ConferenceError],,],playApplause:[,,,1,,,,,[r.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[r.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[r.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[r.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[r.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[r.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[r.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=s.defineStruct(function(e,t,i,n,r,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==i&&i,this.deinterlace=void 0!==n&&n,this.fpsType=void 0!==r?r:0,this.videType=void 0!==o?o:0},!0,function(e){e.writeBool(this.mutiCam),n.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)},function(e){this.mutiCam=e.readBool(),this.openCamIDs=n.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()},12,!1),o.UsrCamID=s.defineStruct(function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.camID)},function(e){this.termID=e.readShort(),this.camID=e.readShort()},4,!0),s.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=s.defineStruct(function(e,t,i){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==i?i:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)},function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()},8,!0),s.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=s.defineProxy(n.ObjectPrx,o.VideoCallback.ice_staticId,void 0),s.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[r.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[r.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[r.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[r.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[r.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=s.defineProxy(n.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),s.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[r.ConferenceError],,],startVideo:[,,,1,,,,,[r.ConferenceError],,],stopVideo:[,,,1,,,,,[r.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[r.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[r.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[r.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[r.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[r.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[r.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[r.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[r.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[r.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[r.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[r.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[r.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[r.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[r.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[r.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("LogSpace");s.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),s.FatalLogInfo=o.defineStruct(function(e,t,i,n,r,o,s,c){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==i?i:0,this.client=void 0!==n?n:"",this.clientIP=void 0!==r?r:"",this.logDate=void 0!==o?o:"",this.content=void 0!==s?s:"",this.dumpData=void 0!==c?c:null},!0,function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),n.ByteSeqHelper.write(e,this.dumpData)},function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=n.ByteSeqHelper.read(e)},14,!1),s.AppendData=o.defineStruct(function(e,t,i){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==i?i:null},!0,function(e){e.writeString(this.uuid),e.writeString(this.type),n.ByteSeqHelper.write(e,this.data)},function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=n.ByteSeqHelper.read(e)},3,!1),o.defineSequence(s,"AppendDataSeqHelper","LogSpace.AppendData",!1),s.UsrReportInfo=o.defineStruct(function(e,t,i,n,r,o,s,c,a){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==i?i:0,this.client=void 0!==n?n:"",this.clientIP=void 0!==r?r:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==s?s:"",this.content=void 0!==c?c:"",this.appendDatas=void 0!==a?a:null},!0,function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),s.AppendDataSeqHelper.write(e,this.appendDatas)},function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=s.AppendDataSeqHelper.read(e)},15,!1),s.ClientLogServer=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),s.ClientLogServerPrx=o.defineProxy(n.ObjectPrx,s.ClientLogServer.ice_staticId,void 0),o.defineOperations(s.ClientLogServer,s.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[s.FatalLogInfo]],,,,],usrReport:[,,,,,,[[s.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,]}),i.LogSpace=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:this.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e()}}(function(){return function e(t,i,n){function r(s,c){if(!i[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return r(i||e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";var n=e("sdp");function r(e,t,i,r,o){var s=n.writeRtpDescription(e.kind,t);if(s+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var a="msid:"+(r?r.id:"-")+" "+c+"\r\n";s+="a="+a,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function o(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&(c=r,a=s,l=e.codecs,d=t.codecs,u=void 0,h=void 0,u=n(c.parameters.apt,l),h=n(a.parameters.apt,d),!u||!h||u.name.toLowerCase()!==h.name.toLowerCase()))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),i.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}var c,a,l,d,u,h}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}}),i}function s(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function c(e,t){var i=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return i||e.addRemoteCandidate(t),!i}function a(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}t.exports=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,i,n,r){var o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=r,e.setTimeout(function(){t._dispatchEvent("track",o)})}var d=function(i){var r,o,s,c=this,l=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){c[e]=l[e].bind(l)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw a("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=(r=i.iceServers||[],o=t,s=!1,(r=JSON.parse(JSON.stringify(r))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof t;return i&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||s?0===e.indexOf("stun:")&&o>=14393&&-1===e.indexOf("?transport=udp"):(s=!0,!0)}),delete e.url,e.urls=i?t[0]:t,!!t.length}})),this._iceGatherers=[],i.iceCandidatePoolSize)for(var d=i.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},d.prototype.addTrack=function(t,i){if(this._isClosed)throw a("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw a("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},d.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach(function(t){i.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",function(e){i.enabled=e.enabled})}),n.getTracks().forEach(function(e){i.addTrack(e,n)})}},d.prototype.removeTrack=function(t){if(this._isClosed)throw a("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find(function(e){return e.rtpSender===t});if(!i)throw a("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var i=t.getSenders().find(function(t){return t.track===e});i&&t.removeTrack(i)})},d.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},d.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},d.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},d.prototype._gather=function(t,i){var r=this,o=this.transceivers[i].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),o.onlocalcandidate=function(e){if(!(r.usingBundle&&i>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:i};var c=e.candidate,a=!c||0===Object.keys(c).length;if(a)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),c.component=1,c.ufrag=o.getLocalParameters().usernameFragment;var l=n.writeCandidate(c);s.candidate=Object.assign(s.candidate,n.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=n.getMediaSections(r.localDescription.sdp);d[s.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",r.localDescription.sdp=n.getDescription(r.localDescription.sdp)+d.join("");var u=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),a||r._dispatchEvent("icecandidate",s),u&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout(function(){s.forEach(function(e){o.onlocalcandidate(e)})},0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,i,r){var s=o(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),r&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},d.prototype.setLocalDescription=function(e){var t,i,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(a("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(a("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),i=t.shift(),t.forEach(function(e,t){var i=n.parseRtpParameters(e);r.transceivers[t].localCapabilities=i}),r.transceivers.forEach(function(e,t){r._gather(e.mid,t)});else if("answer"===e.type){t=n.splitSections(r.remoteDescription.sdp),i=t.shift();var c=n.matchPrefix(i,"a=ice-lite").length>0;t.forEach(function(e,t){var s=r.transceivers[t],a=s.iceGatherer,l=s.iceTransport,d=s.dtlsTransport,u=s.localCapabilities,h=s.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var p=n.getIceParameters(e,i),f=n.getDtlsParameters(e,i);c&&(f.role="server"),r.usingBundle&&0!==t||(r._gather(s.mid,t),"new"===l.state&&l.start(a,p,c?"controlling":"controlled"),"new"===d.state&&d.start(f));var _=o(u,h);r._transceive(s,_.codecs.length>0,!1)}})}return r.localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(a("TypeError",'Unsupported type "'+r.type+'"'));if(!s("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject(a("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var d={};o.remoteStreams.forEach(function(e){d[e.id]=e});var u=[],h=n.splitSections(r.sdp),p=h.shift(),f=n.matchPrefix(p,"a=ice-lite").length>0,_=n.matchPrefix(p,"a=group:BUNDLE ").length>0;o.usingBundle=_;var C=n.matchPrefix(p,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!C&&C.substr(14).split(" ").indexOf("trickle")>=0,h.forEach(function(s,a){var l=n.splitLines(s),h=n.getKind(s),C=n.isRejected(s)&&0===n.matchPrefix(s,"a=bundle-only").length,m=l[0].substr(2).split(" ")[2],g=n.getDirection(s,p),y=n.parseMsid(s),v=n.getMid(s)||n.generateIdentifier();if("application"===h&&"DTLS/SCTP"===m||C)o.transceivers[a]={mid:v,kind:h,rejected:!0};else{var I,S,R,E,w,b,x,P,O;!C&&o.transceivers[a]&&o.transceivers[a].rejected&&(o.transceivers[a]=o._createTransceiver(h,!0));var T,A,M=n.parseRtpParameters(s);C||(T=n.getIceParameters(s,p),(A=n.getDtlsParameters(s,p)).role="client"),x=n.parseRtpEncodingParameters(s);var k=n.parseRtcpParameters(s),N=n.matchPrefix(s,"a=end-of-candidates",p).length>0,D=n.matchPrefix(s,"a=candidate:").map(function(e){return n.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===r.type||"answer"===r.type)&&!C&&_&&a>0&&o.transceivers[a]&&(o._disposeIceAndDtlsTransports(a),o.transceivers[a].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[a].iceTransport=o.transceivers[0].iceTransport,o.transceivers[a].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[a].rtpSender&&o.transceivers[a].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[a].rtpReceiver&&o.transceivers[a].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||C)"answer"!==r.type||C||(S=(I=o.transceivers[a]).iceGatherer,R=I.iceTransport,E=I.dtlsTransport,w=I.rtpReceiver,b=I.sendEncodingParameters,P=I.localCapabilities,o.transceivers[a].recvEncodingParameters=x,o.transceivers[a].remoteCapabilities=M,o.transceivers[a].rtcpParameters=k,D.length&&"new"===R.state&&(!f&&!N||_&&0!==a?D.forEach(function(e){c(I.iceTransport,e)}):R.setRemoteCandidates(D)),_&&0!==a||("new"===R.state&&R.start(S,T,"controlling"),"new"===E.state&&E.start(A)),o._transceive(I,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!w||"sendrecv"!==g&&"sendonly"!==g?delete I.rtpReceiver:(O=w.track,y?(d[y.stream]||(d[y.stream]=new e.MediaStream),i(O,d[y.stream]),u.push([O,w,d[y.stream]])):(d.default||(d.default=new e.MediaStream),i(O,d.default),u.push([O,w,d.default]))));else{(I=o.transceivers[a]||o._createTransceiver(h)).mid=v,I.iceGatherer||(I.iceGatherer=o._createIceGatherer(a,_)),D.length&&"new"===I.iceTransport.state&&(!N||_&&0!==a?D.forEach(function(e){c(I.iceTransport,e)}):I.iceTransport.setRemoteCandidates(D)),P=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(P.codecs=P.codecs.filter(function(e){return"rtx"!==e.name})),b=I.sendEncodingParameters||[{ssrc:1001*(2*a+2)}];var V,L=!1;if("sendrecv"===g||"sendonly"===g){if(L=!I.rtpReceiver,w=I.rtpReceiver||new e.RTCRtpReceiver(I.dtlsTransport,h),L)O=w.track,y&&"-"===y.stream||(y?(d[y.stream]||(d[y.stream]=new e.MediaStream,Object.defineProperty(d[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(O,"id",{get:function(){return y.track}}),V=d[y.stream]):(d.default||(d.default=new e.MediaStream),V=d.default)),V&&(i(O,V),I.associatedRemoteMediaStreams.push(V)),u.push([O,w,V])}else I.rtpReceiver&&I.rtpReceiver.track&&(I.associatedRemoteMediaStreams.forEach(function(t){var i,n,r=t.getTracks().find(function(e){return e.id===I.rtpReceiver.track.id});r&&(i=r,(n=t).removeTrack(i),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:i})))}),I.associatedRemoteMediaStreams=[]);I.localCapabilities=P,I.remoteCapabilities=M,I.rtpReceiver=w,I.rtcpParameters=k,I.sendEncodingParameters=b,I.recvEncodingParameters=x,o._transceive(o.transceivers[a],!1,L)}}}),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o.remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(d).forEach(function(t){var i=d[t];if(i.getTracks().length){if(-1===o.remoteStreams.indexOf(i)){o.remoteStreams.push(i);var n=new Event("addstream");n.stream=i,e.setTimeout(function(){o._dispatchEvent("addstream",n)})}u.forEach(function(e){var t=e[0],n=e[1];i.id===e[2].id&&l(o,t,n,[i])})}}),u.forEach(function(e){e[2]||l(o,e[0],e[1],[])}),e.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},d.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(a("InvalidStateError","Can not call createOffer after close"));var o=i.transceivers.filter(function(e){return"audio"===e.kind}).length,s=i.transceivers.filter(function(e){return"video"===e.kind}).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(o=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(s=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(i.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)});o>0||s>0;)o>0&&(i._createTransceiver("audio"),o--),s>0&&(i._createTransceiver("video"),s--);var l=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach(function(r,o){var s=r.track,c=r.kind,a=r.mid||n.generateIdentifier();r.mid=a,r.iceGatherer||(r.iceGatherer=i._createIceGatherer(o,i.usingBundle));var l=e.RTCRtpSender.getCapabilities(c);t<15019&&(l.codecs=l.codecs.filter(function(e){return"rtx"!==e.name})),l.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),l.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=r.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===c&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,c)),r.localCapabilities=l,r.sendEncodingParameters=d}),"max-compat"!==i._config.bundlePolicy&&(l+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",i.transceivers.forEach(function(e,t){l+=r(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,l+="a="+n.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))});var d=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(d)},d.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(a("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(a("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var s=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(s+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var c=n.getMediaSections(i.remoteDescription.sdp).length;i.transceivers.forEach(function(e,n){if(!(n+1>c)){if(e.rejected)return"application"===e.kind?s+="m=application 0 DTLS/SCTP 5000\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;if(e.stream)"audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var l=o(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=r(e,l,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},d.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(r,o){if(!i.remoteDescription)return o(a("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<i.transceivers.length;l++)if(i.transceivers[l].mid===e.sdpMid){s=l;break}var d=i.transceivers[s];if(!d)return o(a("OperationError","Can not add ICE candidate"));if(d.rejected)return r();var u=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return r();if(u.component&&1!==u.component)return r();if((0===s||s>0&&d.iceTransport!==i.transceivers[0].iceTransport)&&!c(d.iceTransport,u))return o(a("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=n.getMediaSections(i.remoteDescription.sdp))[s]+="a="+(u.type?h:"end-of-candidates")+"\r\n",i.remoteDescription.sdp=n.getDescription(i.remoteDescription.sdp)+t.join("")}else for(var p=0;p<i.transceivers.length&&(i.transceivers[p].rejected||(i.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(i.remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",i.remoteDescription.sdp=n.getDescription(i.remoteDescription.sdp)+t.join(""),!i.usingBundle));p++);r()})},d.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(i){t[i]&&e.push(t[i].getStats())})});return new Promise(function(t){var i=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){var n;e[t].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[t]).type]||n.type,i.set(t,e[t])})}),t(i)})})};var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),d}},{sdp:2}],2:[function(e,t,i){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.numChannels=3===t.length?parseInt(t[2],10):1,i},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(t=n[r].trim().split("="))[0].trim()]=t[1];return i},n.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){n.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),i},n.getIceParameters=function(e,t){var i=n.splitLines(e);return{usernameFragment:(i=i.concat(n.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e)[0].split(" "),r=3;r<i.length;r++){var o=i[r],s=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var c=n.parseRtpMap(s),a=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(c.parameters=a.length?n.parseFmtp(a[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)});var r=0;return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){i+=n.writeExtmap(e)}),i},n.parseRtpEncodingParameters=function(e){var t,i=[],r=n.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),c=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),a=c.length>0&&c[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===a&&(t=l[0][1]),r.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};i.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:t,mechanism:s?"red+ulpfec":"red"},i.push(n))}}),0===i.length&&a&&i.push({ssrc:a});var d=n.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(e){e.maxBitrate=d})),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var r=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};var r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t){var i=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,r){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var i=n.splitLines(e),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},"object"==typeof t&&(t.exports=n)},{}],3:[function(e,t,i){(function(i){"use strict";var n=e("./adapter_factory.js");t.exports=n({window:i.window})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter_factory.js":4}],4:[function(e,t,i){"use strict";var n=e("./utils");t.exports=function(t,i){var r=t&&t.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in i)hasOwnProperty.call(i,s)&&(o[s]=i[s]);var c=n.log,a=n.detectBrowser(r),l=e("./chrome/chrome_shim")||null,d=e("./edge/edge_shim")||null,u=e("./firefox/firefox_shim")||null,h=e("./safari/safari_shim")||null,p=e("./common_shim")||null,f={browserDetails:a,commonShim:p,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(a.browser){case"chrome":if(!l||!l.shimPeerConnection||!o.shimChrome)return c("Chrome shim is not included in this adapter release."),f;c("adapter.js shimming chrome."),f.browserShim=l,p.shimCreateObjectURL(r),l.shimGetUserMedia(r),l.shimMediaStream(r),l.shimSourceObject(r),l.shimPeerConnection(r),l.shimOnTrack(r),l.shimAddTrackRemoveTrack(r),l.shimGetSendersWithDtmf(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"firefox":if(!u||!u.shimPeerConnection||!o.shimFirefox)return c("Firefox shim is not included in this adapter release."),f;c("adapter.js shimming firefox."),f.browserShim=u,p.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimSourceObject(r),u.shimPeerConnection(r),u.shimOnTrack(r),u.shimRemoveStream(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"edge":if(!d||!d.shimPeerConnection||!o.shimEdge)return c("MS edge shim is not included in this adapter release."),f;c("adapter.js shimming edge."),f.browserShim=d,p.shimCreateObjectURL(r),d.shimGetUserMedia(r),d.shimPeerConnection(r),d.shimReplaceTrack(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"safari":if(!h||!o.shimSafari)return c("Safari shim is not included in this adapter release."),f;c("adapter.js shimming safari."),f.browserShim=h,p.shimCreateObjectURL(r),h.shimRTCIceServerUrls(r),h.shimCallbacksAPI(r),h.shimLocalStreamsAPI(r),h.shimRemoteStreamsAPI(r),h.shimTrackEventTransceiver(r),h.shimGetUserMedia(r),h.shimCreateOfferLegacy(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;default:c("Unsupported browser!")}return f}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":10,"./safari/safari_shim":12,"./utils":13}],5:[function(e,t,i){"use strict";var n=e("../utils.js"),r=n.log;t.exports={shimGetUserMedia:e("./getusermedia"),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)"RTCRtpTransceiver"in e||n.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return i._ontrackpoly||(i._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)}),t.stream.getTracks().forEach(function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)})},i.addEventListener("addstream",i._ontrackpoly)),t.apply(i,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;i._senders=i._senders||[],r.apply(i,[e]),e.getTracks().forEach(function(e){i._senders.push(t(i,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach(function(e){var i=t._senders.find(function(t){return t.track===e});i&&t._senders.splice(t._senders.indexOf(i),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var i=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){i.src&&t.revokeObjectURL(i.src),i.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){i.src&&t.revokeObjectURL(i.src),i.src=t.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=t.getSenders();i.apply(this,arguments);var r=t.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(r)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(i){var n=t._shimmedLocalStreams[i].indexOf(e);-1!==n&&t._shimmedLocalStreams[i].splice(n,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]}),r.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){var t=n.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{},t.getTracks().forEach(function(e){if(i.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!i._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());i._streams[t.id]=n,i._reverseStreams[n.id]=t,t=n}r.apply(i,[t])};var o=e.RTCPeerConnection.prototype.removeStream;function s(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},o.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var o=n._streams[i.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);n._streams[i.id]=s,n._reverseStreams[s.id]=i,n.addStream(s)}return n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(e,[function(i){var n=s(e,i);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(e,arguments).then(function(t){return s(e,t)})}});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e,t,i;return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],i=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:i})),c.apply(this,arguments)):c.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,i=this;if("closed"===i.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===i))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");i._streams=i._streams||{},Object.keys(i._streams).forEach(function(n){i._streams[n].getTracks().find(function(t){return e.track===t})&&(t=i._streams[n])}),t&&(1===t.getTracks().length?i.removeStream(i._reverseStreams[t.id]):t.removeTrack(e.track),i.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(e){var t=n.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection)e.RTCPeerConnection=function(t,i){return r("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,i)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});else{var i=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new i(e,t)},e.RTCPeerConnection.prototype=i.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,i){var n=this,r=arguments;if(arguments.length>0&&"function"==typeof e)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof arguments[0]))return o.apply(this,[]);var s=function(e){var t={};return e.result().forEach(function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){i[t]=e.stat(t)}),t[i.id]=i}),t},c=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return o.apply(this,[function(e){r[1](c(s(e)))},arguments[0]])}return new Promise(function(e,t){o.apply(n,[function(t){e(c(s(t)))},t])}).then(t,i)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,n=new Promise(function(n,r){i.apply(t,[e[0],n,r])});return e.length<2?n:n.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,r){i.apply(e,[n,r,t])})}return i.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}});var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}},{"../utils.js":13,"./getusermedia":6}],6:[function(e,t,i){"use strict";var n=e("../utils.js"),r=n.log;t.exports=function(e){var t=n.detectBrowser(e),i=e&&e.navigator,o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[r("min",i)]=n.ideal,t.optional.push(o),(o={})[r("max",i)]=n.ideal,t.optional.push(o)):(o[r("",i)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var s=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){var c=e.video.facingMode;c=c&&("object"==typeof c?c:{ideal:c});var a,l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||l))if(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?a=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(a=["front"]),a)return i.mediaDevices.enumerateDevices().then(function(t){var i=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return a.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!i&&t.length&&-1!==a.indexOf("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=c.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=o(e.video),r("chrome: "+JSON.stringify(e)),n(e)});e.video=o(e.video)}return r("chrome: "+JSON.stringify(e)),n(e)},c=function(e){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};i.getUserMedia=function(e,t,n){s(e,function(e){i.webkitGetUserMedia(e,t,function(e){n&&n(c(e))})})};var a=function(e){return new Promise(function(t,n){i.getUserMedia(e,t,n)})};if(i.mediaDevices||(i.mediaDevices={getUserMedia:a,enumerateDevices:function(){return new Promise(function(t){var i={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:i[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),i.mediaDevices.getUserMedia){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return s(e,function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(c(e))})})}}else i.mediaDevices.getUserMedia=function(e){return a(e)};void 0===i.mediaDevices.addEventListener&&(i.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===i.mediaDevices.removeEventListener&&(i.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":13}],7:[function(e,t,i){"use strict";var n=e("sdp"),r=e("./utils");t.exports={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),r=n.parseCandidate(e.candidate),o=Object.assign(i,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,r.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var i=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),o=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return o.set(t,e),r.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return i(e)},t.revokeObjectURL=function(e){n(e),o.delete(e)};var c=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return c.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,c.set.apply(this,[e])}});var a=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),a.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=r.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,r,o,s;if(this._sctp=null,o=arguments[0],(s=n.splitSections(o.sdp)).shift(),s.some(function(e){var t=n.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var c,a=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!=i?-1:i}(arguments[0]),l=(e=a,r=65536,"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:57===t.version?65535:65536),r),d=function(e,i){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var o=n.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(r=2147483637),r}(arguments[0],a);c=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var u={};Object.defineProperty(u,"maxMessageSize",{get:function(){return c}}),this._sctp=u}return i.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,i=t.apply(e,arguments),n=i.send;return i.send=function(){var t=arguments[0];if((t.length||t.size||t.byteLength)>e.sctp.maxMessageSize)throw new DOMException("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)","TypeError");return n.apply(this,arguments)},i}}}}},{"./utils":13,sdp:2}],8:[function(e,t,i){"use strict";var n=e("../utils"),r=e("rtcpeerconnection-shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function(e){var t=n.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender),e.RTCPeerConnection=r(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},{"../utils":13,"./getusermedia":9,"rtcpeerconnection-shim":1}],9:[function(e,t,i){"use strict";t.exports=function(e){var t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(t=e).name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}});var t})}}},{}],10:[function(e,t,i){"use strict";var n=e("../utils");t.exports={shimGetUserMedia:e("./getusermedia"),shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var i=new Event("track");i.track=t,i.receiver={track:t},i.transceiver={receiver:i.receiver},i.streams=[e.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=n.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(i,n){if(t.version<38&&i&&i.iceServers){for(var r=[],o=0;o<i.iceServers.length;o++){var s=i.iceServers[o];if(s.hasOwnProperty("urls"))for(var c=0;c<s.urls.length;c++){var a={url:s.urls[c]};0===s.urls[c].indexOf("turn")&&(a.username=s.username,a.credential=s.credential),r.push(a)}else r.push(i.iceServers[o])}i.iceServers=r}return new e.mozRTCPeerConnection(i,n)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}});var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,i,n){return o.apply(this,[e||null]).then(function(e){var n,o;if(t.version<48&&(n=e,o=new Map,Object.keys(n).forEach(function(e){o.set(e,n[e]),o[e]=n[e]}),e=o),t.version<53&&!i)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,i){e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,n)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;n.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(i){i.track&&-1!==e.getTracks().indexOf(i.track)&&t.removeTrack(i)})})}}},{"../utils":13,"./getusermedia":11}],11:[function(e,t,i){"use strict";var n=e("../utils"),r=n.log;t.exports=function(e){var t=n.detectBrowser(e),i=e&&e.navigator,o=e&&e.MediaStreamTrack,s=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,n,o){var c=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=e[i]="object"==typeof e[i]?e[i]:{ideal:e[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(i),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[i]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var r={};"number"==typeof n.ideal?r[i]={min:n.ideal,max:n.ideal}:r[i]=n.ideal,e.advanced.push(r),delete n.ideal,Object.keys(n).length||delete e[i]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(r("spec: "+JSON.stringify(e)),e.audio&&(e.audio=c(e.audio)),e.video&&(e.video=c(e.video)),r("ff37: "+JSON.stringify(e))),i.mozGetUserMedia(e,n,function(e){o(s(e))})};if(i.mediaDevices||(i.mediaDevices={getUserMedia:function(e){return new Promise(function(t,i){c(e,t,i)})},addEventListener:function(){},removeEventListener:function(){}}),i.mediaDevices.enumerateDevices=i.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var a=i.mediaDevices.enumerateDevices.bind(i.mediaDevices);i.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(s(e))})}}if(!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var d=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},u=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),u(e)},o&&o.prototype.getSettings){var h=o.prototype.getSettings;o.prototype.getSettings=function(){var e=h.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var p=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}i.getUserMedia=function(e,r,o){if(t.version<44)return c(e,r,o);n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(r,o)}}},{"../utils":13}],12:[function(e,t,i){"use strict";var n=e("../utils");t.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(i){i.id===e&&(t=i)}),this._remoteStreams&&this._remoteStreams.forEach(function(i){i.id===e&&(t=i)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var i=this;e.getTracks().forEach(function(n){t.call(i,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,i){return i&&(this._localStreams?-1===this._localStreams.indexOf(i)&&this._localStreams.push(i):this._localStreams=[i]),t.call(this,e,i)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var i=this,n=e.getTracks();this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&i.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}})})}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,i){var n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,i){var n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=c}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==e.offerToReceiveAudio&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection("sendonly"):"recvonly"===n.direction&&n.setDirection("inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}}},{"../utils":13}],13:[function(e,t,i){"use strict";var n=!0,r=!0;function o(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}t.exports={extractVersion:o,wrapPeerConnectionEvent:function(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);var o=function(e){n(i(e))};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,r.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);var n=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)}})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,i={browser:null,version:null};if(void 0===e||!e.navigator)return i.browser="Not a browser.",i;if(t.mozGetUserMedia)i.browser="firefox",i.version=o(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)i.browser="chrome",i.version=o(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=o(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=o(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return i}}},{}]},{},[3])(3)}),function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),r=Math.max(0,16.7-(n-e)),o=window.setTimeout(function(){t(n+r)},r);return e=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),this.Cr={},this.Cr.__init=!1,Cr._ua=function(){var e=window,t=document,i=navigator,n="Shockwave Flash",r="application/x-shockwave-flash",o=void 0!==t.getElementById&&void 0!==t.getElementsByTagName&&void 0!==t.createElement,s=i.userAgent.toLowerCase(),c=i.platform.toLowerCase(),a=/win/.test(c||s),l=/mac/.test(c||s),d=!!/webkit/.test(s)&&parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),u="Microsoft Internet Explorer"===i.appName,h=[0,0,0],p=null;if(void 0!==i.plugins&&"object"==typeof i.plugins[n])(p=i.plugins[n].description)&&void 0!==i.mimeTypes&&i.mimeTypes[r]&&i.mimeTypes[r].enabledPlugin&&(plugin=!0,u=!1,p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(void 0!==e.ActiveXObject)try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");f&&(p=f.GetVariable("$version"))&&(u=!0,p=p.split(" ")[1].split(","),h=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)])}catch(e){}return{w3:o,pv:h,wk:d,ie:u,win:a,mac:l}}(),Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.pstnnum=e.pstnnum,this.pstnpwd=e.pstnpwd,this.freeConf=e.freeConf,this.isBroadcating=e.isBroadcating,this.webViewerRights=e.webViewerRights,this.webviewerQues=e.webviewerQues},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr_Question_State={NotReply:0,Replying:1,NotPublic:2,Publiced:3,Deleted:4},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);window.requestAnimationFrame(t)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(arguments.length>=1))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var i=e.shift(),n=Cr.Swf.__callbackAsyncDict[i];if(!n)throw"swf callback error:async not exist";n.complete(e)},callJs:function(){if(arguments.length>=2){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var i=cmdObj.fun;cmdObj.proxy;i.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,i){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:i}}},Cr.crmt=null,Cr.Utils={generate_uuid:function(){for(var e=[],t="0123456789abcdef",i=0;i<36;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setCookie:function(e,t){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return i?unescape(i[2]):void 0},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var i=Utils.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toGMTString())},Uint8ToString:function(e){for(var t=[],i=0;i<e.length;i+=32768)t.push(String.fromCharCode.apply(null,e.subarray(i,i+32768)));return t.join("")},Uint8ToBase64:function(e){for(var t,i=0,n=e.length,r="";i<n;)t=e.subarray(i,Math.min(i+32768,n)),r+=String.fromCharCode.apply(null,t),i+=32768;return btoa(r)},compare:function(e){return function(t,i){var n=t[e],r=i[e];return r>n?-1:r<n?1:0}},deepCopy:function(e){var t={};for(var i in e)t[i]="object"==typeof e[i]?deepCoyp(e[i]):e[i];return t},chat2html:function(e,t,i){var n="",r="",o="";if(e.indexOf("0x10x4")>=0)(n=e.split("0x10x4")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=$.parseJSON(n)).opt,o=n.headerUrl;else if(e.indexOf("0x10x5")>=0){(n=e.split("0x10x5")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=$.parseJSON(n)).opt,o=n.headerUrl}else if(e.indexOf("0x10x6")>=0){(n=e.split("0x10x6")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=$.parseJSON(n)).opt,o=n.headerUrl}else{null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>')).replace(Cr._captureRegExp,"");var s=Cr._headimgRegExp.exec(n);if(s)o=s[1];n=n.replace(Cr._headimgRegExp,"");for(var c=(16777215&t).toString(16),a=6-c.length,l=0;l<a;l++)c="0"+c;n='<p style="color:#'+c+";font-size:"+i+'">'+n+"</p>",r=0}return[r,o,n]},html2chat:function(e){return null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)]},ask2html:function(e){null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>');var i=Cr._headimgRegExp.exec(t);if(i)var n=i[1];return[n,t=t=t.replace(Cr._headimgRegExp,"")]},utf8ByteToUnicodeStr:function(e){for(var t="",i=0;i<e.length;){var n=e[i],r=0;n>>>7==0?(t+=String.fromCharCode(e[i]),i+=1):252==(252&n)?(r=(3&e[i])<<30,r|=(63&e[i+1])<<24,r|=(63&e[i+2])<<18,r|=(63&e[i+3])<<12,r|=(63&e[i+4])<<6,r|=63&e[i+5],t+=String.fromCharCode(r),i+=6):248==(248&n)?(r=(7&e[i])<<24,r|=(63&e[i+1])<<18,r|=(63&e[i+2])<<12,r|=(63&e[i+3])<<6,r|=63&e[i+4],t+=String.fromCharCode(r),i+=5):240==(240&n)?(r=(15&e[i])<<18,r|=(63&e[i+1])<<12,r|=(63&e[i+2])<<6,r|=63&e[i+3],t+=String.fromCharCode(r),i+=4):224==(224&n)?(r=(31&e[i])<<12,r|=(63&e[i+1])<<6,r|=63&e[i+2],t+=String.fromCharCode(r),i+=3):192==(192&n)?(r=(63&e[i])<<6,r|=63&e[i+1],t+=String.fromCharCode(r),i+=2):(t+=String.fromCharCode(e[i]),i+=1)}return t},log:function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);window.console&&!Cr._ua.ie&&window.console.log.apply(window.console,e)}},CR_NOERR=0,CR_UNKNOWERR=1,CR_INNER_ERR=3,CR_MEETPARAM_ERR=5,CR_ERR_DATA=6,CR_ANCTPSWD_ERR=7,CR_SERVER_EXCEPTION=8,CR_NETWORK_INITFAILED=200,CR_NO_SERVERINFO=201,CR_NOSERVER_RSP=202,CR_CREATE_CONN_FAILED=203,CR_SOCKETEXCEPTION=204,CR_NOTAVAILABLESERVER=205,CR_MEETNOTEXIST=800,CR_AUTHERROR=801,CR_MEMBEROVERFLOWERROR=802,CR_RESOURCEALLOCATEERROR=803,CR_MEETOFFLINE=804,CR_MEMBER_ALREADY_IN_MEET=805,CR_CONCURRENCY_OVER=806,CR_MEET_IS_OPEN_ING=807,CR_CONTAINSSENSITIVEWORDS=900,CR_NOT_CHAT_PERMIT=901,CR_THIRDPARTYLIVEISON=1001,CR_LISTLIVEISON=1002,CR_CLIENTLIVEISON=1003,CR_LUCKYDRAWNOTEXISTS=2001,CR_LUCKYDRAWCFGFAILS=2002,CR_JOINLUCKYDRAWFAILS=2003,CR_ANNOUCELUCKYDRAWFAILS=2004,CRVideo_NOERR=0,CRVideo_UNKNOWERR=1,CRVideo_OUTOF_MEM=2,CRVideo_INNER_ERR=3,CRVideo_MISMATCHCLIENTVER=4,CRVideo_MEETPARAM_ERR=5,CRVideo_ERR_DATA=6,CRVideo_ANCTPSWD_ERR=7,CRVideo_SERVER_EXCEPTION=8,CRVideo_CRVideoSDK_USER_BEEN_KICKOUT=10,CRVideo_NETWORK_INITFAILED=200,CRVideo_NO_SERVERINFO=201,CRVideo_NOSERVER_RSP=202,CRVideo_CREATE_CONN_FAILED=203,CRVideo_SOCKETEXCEPTION=204,CRVideo_SOCKETTIMEOUT=205,CRVideo_FORCEDCLOSECONNECTION=206,CRVideo_CONNECTIONLOST=207,CRVideo_QUE_ID_INVALID=400,CRVideo_QUE_NOUSER=401,CRVideo_QUE_USER_CANCELLED=402,CRVideo_QUE_SERVICE_NOT_START=403,CRVideo_ALREADY_OTHERQUE=404,CRVideo_INVALID_CALLID=600,CRVideo_ERR_CALL_EXIST=601,CRVideo_ERR_BUSY=602,CRVideo_ERR_OFFLINE=603,CRVideo_ERR_NOANSWER=604,CRVideo_ERR_USER_NOT_FOUND=605,CRVideo_ERR_REFUSE=606,CRVideo_MEETNOTEXIST=800,CRVideo_AUTHERROR=801,CRVideo_MEMBEROVERFLOWERROR=802,CRVideo_RESOURCEALLOCATEERROR=803,CRVideo_MEETOFFLINE=804,CRVideo_WEB_OCX_NOTINSTALLED=1001,CRVideo_WEB_BROWER_NOTUPPORTED=1002,CRVideo_OCX_VERSION_NOTUPPORTED=1003;var PhoneFormat={PCED_NO_ERR:0,PCED_ILLEGAL_CHAR:1,PCED_INVALID_LEN:2,PCED_INVALID_NUM:3,PCED_NO_AREA_CODE:4,PCED_ILLEGAL_EXT:5,result:"",IsLegalChar:function(e){for(var t=e.length,i=0;i<t;i++){var n=e.charAt(i);if((n<"0"||n>"9")&&"-"!=n&&"+"!=n&&"*"!=n&&"#"!=n)return!1}return!0},isChinaMobile:function(e){return!(e.length<6)&&("8"==e.charAt(2)&&"6"==e.charAt(3)&&"1"==e.charAt(4)&&e.charAt(5)>"2")},CoverToStandardFormat:function(e){PhoneFormat.result=e.concat(),PhoneFormat.result=PhoneFormat.result.replace("＋","+"),PhoneFormat.result=PhoneFormat.result.replace("－","-");var t=!1;if(!PhoneFormat.IsLegalChar(PhoneFormat.result))return PhoneFormat.PCED_ILLEGAL_CHAR;if(PhoneFormat.result.length<3)return PhoneFormat.PCED_INVALID_LEN;if("9"==PhoneFormat.result.charAt(0)&&"5"==PhoneFormat.result.charAt(1)&&(PhoneFormat.result="0086"+PhoneFormat.result),"+"==PhoneFormat.result.charAt(0)){if("0"==PhoneFormat.result.charAt(1))return PhoneFormat.PCED_INVALID_NUM;PhoneFormat.result="00"+PhoneFormat.result.substr(2)}else"0"==PhoneFormat.result.charAt(0)&&"0"==PhoneFormat.result.charAt(1)||(PhoneFormat.result="0086"+PhoneFormat.result,t=!0);if(-1!=PhoneFormat.result.indexOf("+")&&((n=PhoneFormat.result.match(/-/g))&&n.length>2))return PhoneFormat.PCED_INVALID_NUM;if(PhoneFormat.result.length<6)return PhoneFormat.PCED_INVALID_LEN;if("86"==PhoneFormat.result.substr(2,2)){var i=!0;if("0"==PhoneFormat.result.charAt(4)&&(i=!1,PhoneFormat.result=PhoneFormat.result.substr(0,4)+PhoneFormat.result.substr(5)),PhoneFormat.isChinaMobile(PhoneFormat.result))return-1!=PhoneFormat.result.indexOf("-")?PhoneFormat.PCED_INVALID_NUM:15!=PhoneFormat.result.length?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR;var n,r=PhoneFormat.result.substr(4,3),o=0;if("400"==r||"800"==r)return-1!=(o=PhoneFormat.result.indexOf("-"))?7==o&&11==o&&16==PhoneFormat.result.length?(PhoneFormat.result=PhoneFormat.result.substr(0,o)+PhoneFormat.result.substr(o+1),PhoneFormat.PCED_NO_ERR):PhoneFormat.PCED_INVALID_NUM:14!=PhoneFormat.result.length?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR;if(t&&i)return PhoneFormat.PCED_NO_AREA_CODE;if("0"==PhoneFormat.result.charAt(4))return PhoneFormat.PCED_INVALID_NUM;if("-"==PhoneFormat.result.charAt(6)?PhoneFormat.result=PhoneFormat.result.substr(0,6)+PhoneFormat.result.substr(7):"-"==PhoneFormat.result.charAt(7)&&(PhoneFormat.result=PhoneFormat.result.substr(0,7)+PhoneFormat.result.substr(8)),(n=PhoneFormat.result.match(/-/g))&&n.length>0&&(r=PhoneFormat.result.substr(PhoneFormat.result.indexOf("-")+1),n.lengt>1||PhoneFormat.result.length>32))return PhoneFormat.PCED_ILLEGAL_EXT}return PhoneFormat.result.length>64?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR},CoverToDisplayFormat:function(e){var t=PhoneFormat.CoverToStandardFormat(e);if(t!=PhoneFormat.PCED_NO_ERR)return t;if(PhoneFormat.result=PhoneFormat.result.substr(2),PhoneFormat.result="+"+PhoneFormat.result,"8"!=PhoneFormat.result.charAt(1)||"6"!=PhoneFormat.result.charAt(2))return PhoneFormat.PCED_NO_ERR;if(PhoneFormat.result=PhoneFormat.result.substr(3),"1"==PhoneFormat.result.charAt(0)&&PhoneFormat.result.charAt(1)>"2")return PhoneFormat.PCED_NO_ERR;var i=PhoneFormat.result.substr(0,3);return"400"==i||"800"==i?PhoneFormat.PCED_NO_ERR:"9"==PhoneFormat.result.charAt(0)&&"5"==PhoneFormat.result.charAt(1)?PhoneFormat.PCED_NO_ERR:(PhoneFormat.result="0"+PhoneFormat.result,PhoneFormat.PCED_NO_ERR)}},CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),CR_LoginRslt=new Cr.CbProxy("CR_LoginRslt"),CR__RefreshSessionRslt=new Cr.CbProxy("CR__KeepAliveRslt"),CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),CR__ReceiveIMMsg=new Cr.CbProxy("CR__ReceiveIMMsg"),CR__SendIMMsgRslt=new Cr.CbProxy("CR__SendIMMsgRslt"),CR__GetLastMsgRslt=new Cr.CbProxy("CR__GetLastMsgRslt"),CR__GetLastNMsgRslt=new Cr.CbProxy("CR__GetLastNMsgRslt"),CR__UserLeftMeet=new Cr.CbProxy("CR__UserLeftMeet"),CRVideo_UserEnter=new Cr.CbProxy("CRVideo_UserEnter"),CR__MeetEnded=new Cr.CbProxy("CR__MeetEnded"),CR__NotifyStartBroadCast=new Cr.CbProxy("CR__NotifyStartBroadCast"),CR__NotifyStopBroadCast=new Cr.CbProxy("CR__NotifyStopBroadCast"),CR__NotifyBroadCastStartPush=new Cr.CbProxy("CR__NotifyBroadCastStartPush"),CR__NotifyBroadCastStopPush=new Cr.CbProxy("CR__NotifyBroadCastStopPush"),CR__GetBroadCastUrlRslt=new Cr.CbProxy("CR__GetBroadCastUrlRslt"),CR__NotifyIMForbidStatus=new Cr.CbProxy("CR__NotifyIMForbidStatus"),CR__NotifyClearIMMsg=new Cr.CbProxy("CR__NotifyClearIMMsg"),CR__RightChanged=new Cr.CbProxy("CR__RightChanged"),CR__AskQuesRslt=new Cr.CbProxy("CR__AskQuesRslt"),CR__GetQuesListRslt=new Cr.CbProxy("CR__GetQuesListRslt"),CR__AskQuesNotify=new Cr.CbProxy("CR__AskQuesNotify"),CR__LockQuesNotify=new Cr.CbProxy("CR__LockQuesNotify"),CR__ReplyQuesNotify=new Cr.CbProxy("CR__ReplyQuesNotify"),CR__ModifyQuesNotify=new Cr.CbProxy("CR__ModifyQuesNotify"),CR__DelQuesNotify=new Cr.CbProxy("CR__DelQuesNotify"),CR__DelAllQuesNotify=new Cr.CbProxy("CR__DelAllQuesNotify"),CR__PublicQuesNotify=new Cr.CbProxy("CR__PublicQuesNotify"),CR__QuesTypeChangeNotify=new Cr.CbProxy("CR__QuesTypeChangeNotify"),CR__ModifyQuesTypeNotify=new Cr.CbProxy("CR__ModifyQuesTypeNotify"),CR__SetBroadCastQuesNotify=new Cr.CbProxy("CR__SetBroadCastQuesNotify"),CR__NotifyPlayBackStartPush=new Cr.CbProxy("CR__NotifyPlayBackStartPush"),CR__NotifyDeleteIMMsg=new Cr.CbProxy("CR__NotifyDeleteIMMsg"),CR__GetIMMsgCountRslt=new Cr.CbProxy("CR__GetIMMsgCountRslt"),CR__Notifypayback=new Cr.CbProxy("CR__Notifypayback"),CR__NotifyBroadCastPlaybackStop=new Cr.CbProxy("CR__NotifyBroadCastPlaybackStop"),CR__NotifySwtichLiveAppElements=new Cr.CbProxy("CR__NotifySwtichLiveAppElements"),CR__NotifyThumbUp=new Cr.CbProxy("CR__NotifyThumbUp"),CR__NotifyLuckyDrawCfg=new Cr.CbProxy("CR__NotifyLuckyDrawCfg"),CR__GetLuckyDrawCfgRslt=new Cr.CbProxy("CR__GetLuckyDrawCfgRslt"),CR__JoinLuckyDrawMembersRslt=new Cr.CbProxy("CR__JoinLuckyDrawMembersRslt"),CR__NotifyLDMembersStatus=new Cr.CbProxy("CR__NotifyLDMembersStatus"),CR__NotifyLuckyDrawResult=new Cr.CbProxy("CR__NotifyLuckyDrawResult"),CR__StartSvrRecordRslt=new Cr.CbProxy("CR__StartSvrRecordRslt"),CR__UpdateSvrRecCfgRslt=new Cr.CbProxy("CR__UpdateSvrRecCfgRslt"),CR__StopSvrRecordRslt=new Cr.CbProxy("CR__StopSvrRecordRslt"),CR__NotifySvrRecordStateChanged=new Cr.CbProxy("CR__NotifySvrRecordStateChanged"),CR__NotifySvrRecordCfgChanged=new Cr.CbProxy("CR__NotifySvrRecordCfgChanged"),CR__AudioAllocRaw=new Cr.CbProxy("CR__AudioAllocRaw"),CR__SetAudioDeviceStatusRslt=new Cr.CbProxy("CR__SetAudioDeviceStatusRslt"),CR__AskForMicRslt=new Cr.CbProxy("CR__AskForMicRslt"),CR__OpenMicExRslt=new Cr.CbProxy("CR__OpenMicExRslt"),CR__CloseMicExRslt=new Cr.CbProxy("CR__CloseMicExRslt"),CR__AudioAllocRawExt2=new Cr.CbProxy("CR__AudioAllocRawExt2"),CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),CR__DisableSendVideo2Internet=new Cr.CbProxy("CR__DisableSendVideo2Internet"),CR__EnableSendVideo2Internet=new Cr.CbProxy("CR__EnableSendVideo2Internet"),CR__Free=new Cr.CbProxy("CR__Free"),CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),CR__VideoAllocRaw=new Cr.CbProxy("CR__VideoAllocRaw"),CR__NotifyAllowVideoWall=new Cr.CbProxy("CR__NotifyAllowVideoWall"),CR__VideoUpdateStatus=new Cr.CbProxy("CR__VideoUpdateStatus"),CR__NotifyOpenVideo=new Cr.CbProxy("CR__NotifyOpenVideo"),CR__StartVideoByManager=new Cr.CbProxy("CR__StartVideoByManager"),CR__NotifyEnableVideo=new Cr.CbProxy("CR__NotifyEnableVideo"),CR__UpdateFocusWindow=new Cr.CbProxy("CR__UpdateFocusWindow"),CR__UpdateVLayout=new Cr.CbProxy("CR__UpdateVLayout"),CR__UpdateMainVideoShowMode=new Cr.CbProxy("CR__UpdateMainVideoShowMode"),CR__UpdateVideoListMode=new Cr.CbProxy("CR__UpdateVideoListMode"),CR__EnableUpload=new Cr.CbProxy("CR__EnableUpload"),CR__EnableUpload2=new Cr.CbProxy("CR__EnableUpload2"),CR__GenerateIFrame=new Cr.CbProxy("CR__GenerateIFrame"),CR__NotifyRefuseOpenVideo=new Cr.CbProxy("CR__NotifyRefuseOpenVideo"),CR__GetVideoSetting=new Cr.CbProxy("CR__GetVideoSetting"),CR__SetCamera=new Cr.CbProxy("CR__SetCamera"),CR__SetCameraById=new Cr.CbProxy("CR__SetCameraById"),CR__NotifyVideoPolling=new Cr.CbProxy("CR__NotifyVideoPolling"),CR__NotifyPollingVideo=new Cr.CbProxy("CR__NotifyPollingVideo"),CR__NotifyVideoList=new Cr.CbProxy("CR__NotifyVideoList"),CR__NotifyUpdateAllCameraInfos=new Cr.CbProxy("CR__NotifyUpdateAllCameraInfos"),CR__NotifySetOpenedCameraNumber=new Cr.CbProxy("CR__NotifySetOpenedCameraNumber"),CR__NotifyStartAdjustDirection=new Cr.CbProxy("CR__NotifyStartAdjustDirection"),CR__NotifyStartAdjustZoom=new Cr.CbProxy("CR__NotifyStartAdjustZoom"),CR__NotifyStopAdjustDirection=new Cr.CbProxy("CR__NotifyStopAdjustDirection"),CR__NotifyStopAdjustZoom=new Cr.CbProxy("CR__NotifyStopAdjustZoom"),CR__SetVideoDeviceStatusRslt=new Cr.CbProxy("CR__SetVideoDeviceStatusRslt"),CR__AllowVideoWallRslt=new Cr.CbProxy("CR__AllowVideoWallRslt"),CR__StartVideoRslt=new Cr.CbProxy("CR__StartVideoRslt"),CR__StopVideoRslt=new Cr.CbProxy("CR__StopVideoRslt"),CR__ReqOpenVideoRslt=new Cr.CbProxy("CR__ReqOpenVideoRslt"),CR__StartVideoExRslt=new Cr.CbProxy("CR__StartVideoExRslt"),CR__StopVideoExExRslt=new Cr.CbProxy("CR__StopVideoExExRslt"),CR__EnableVideoRslt=new Cr.CbProxy("CR__EnableVideoRslt"),CR__SetFocusWindowRslt=new Cr.CbProxy("CR__SetFocusWindowRslt"),CR__BatchSubscribeVideoRslt=new Cr.CbProxy("CR__BatchSubscribeVideoRslt"),CR__BatchSubscribeVideo2Rslt=new Cr.CbProxy("CR__BatchSubscribeVideo2Rslt"),CR__SubscribeFocusWindowRslt=new Cr.CbProxy("CR__SubscribeFocusWindowRslt"),CR__SubscribeFocusWindow2Rslt=new Cr.CbProxy("CR__SubscribeFocusWindow2Rslt"),CR__SetVLayoutRslt=new Cr.CbProxy("CR__SetVLayoutRslt"),CR__SetMainVideoShowModeRslt=new Cr.CbProxy("CR__SetMainVideoShowModeRslt"),CR__SetVideoListModeRslt=new Cr.CbProxy("CR__SetVideoListModeRslt"),CR__RefuseOpenVideoRslt=new Cr.CbProxy("CR__RefuseOpenVideoRslt"),CR__GetVideoSettingRslt=new Cr.CbProxy("CR__GetVideoSettingRslt"),CR__SetCameraRslt=new Cr.CbProxy("CR__SetCameraRslt"),CR__SetCameraByIdRslt=new Cr.CbProxy("CR__SetCameraByIdRslt"),CR__SetVideoPollingRslt=new Cr.CbProxy("CR__SetVideoPollingRslt"),CR__UpdatePollingVideoRslt=new Cr.CbProxy("CR__UpdatePollingVideoRslt"),CR__UpdateVideoListRslt=new Cr.CbProxy("CR__UpdateVideoListRslt"),CR__GetVideoPollingStateRslt=new Cr.CbProxy("CR__GetVideoPollingStateRslt"),CR__UpdateAllCameraInfosRslt=new Cr.CbProxy("CR__UpdateAllCameraInfosRslt"),CR__SetOpenedCameraNumberRslt=new Cr.CbProxy("CR__SetOpenedCameraNumberRslt"),CR__StartAdjustDirectionRslt=new Cr.CbProxy("CR__StartAdjustDirectionRslt"),CR__StartAdjustZoomRslt=new Cr.CbProxy("CR__StartAdjustZoomRslt"),CR__StopAdjustDirectionRslt=new Cr.CbProxy("CR__StopAdjustDirectionRslt"),CR__AudioUpdateStatus=new Cr.CbProxy("CR__AudioUpdateStatus"),CR__UpdateVoiceEnergy=new Cr.CbProxy("CR__UpdateVoiceEnergy"),CR__UpdateSpeaker=new Cr.CbProxy("CR__UpdateSpeaker"),CR__CloseAll=new Cr.CbProxy("CR__CloseAll"),CR__PlayBackgroundMusic=new Cr.CbProxy("CR__PlayBackgroundMusic"),CR__NotifyVoiceHowling=new Cr.CbProxy("CR__NotifyVoiceHowling"),CR__NotifyVoiceNoise=new Cr.CbProxy("CR__NotifyVoiceNoise"),CR__GetRemoteAudioInfNotify=new Cr.CbProxy("CR__GetRemoteAudioInfNotify"),CR__RemoteAudioSetNotify=new Cr.CbProxy("CR__RemoteAudioSetNotify"),CR__NotifyLanLessMicOpen=new Cr.CbProxy("CR__NotifyLanLessMicOpen"),CR__SetVoiceEnergyRslt=new Cr.CbProxy("CR__SetVoiceEnergyRslt"),CR__PstnSwitchMicStatusRslt=new Cr.CbProxy("CR__PstnSwitchMicStatusRslt"),CR__StartRecordRslt=new Cr.CbProxy("CR__StartRecordRslt"),CR__IsRecordingRslt=new Cr.CbProxy("CR__IsRecordingRslt"),CR__StopRecordRslt=new Cr.CbProxy("CR__StopRecordRslt"),CR__PlayApplauseRslt=new Cr.CbProxy("CR__PlayApplauseRslt"),CR__GetMusicListRslt=new Cr.CbProxy("CR__GetMusicListRslt"),CR__GetPlayBGMusicRslt=new Cr.CbProxy("CR__GetPlayBGMusicRslt"),CR__StartBGMusicRslt=new Cr.CbProxy("CR__StartBGMusicRslt"),CR__StopPlayBGMusicRslt=new Cr.CbProxy("CR__StopPlayBGMusicRslt"),CR__SetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__SetPlayBGMusicVolumnRslt"),CR__GetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__GetPlayBGMusicVolumnRslt"),CR__VoiceHowlingRslt=new Cr.CbProxy("CR__VoiceHowlingRslt"),CR__VoiceNoiseRslt=new Cr.CbProxy("CR__VoiceNoiseRslt"),CR__RemoteAudioSetRslt=new Cr.CbProxy("CR__RemoteAudioSetRslt"),CR__GetRemoteAudioInfRslt=new Cr.CbProxy("CR__GetRemoteAudioInfRslt");function CR__Init(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.init().then(function(e,t){Cr._proxy.registeredCallback("receiveIMMsg",function(e){CR__ReceiveIMMsg.call(e)}),Cr._proxy.registeredCallback("notifyIMForbidStatus",function(e){CR__NotifyIMForbidStatus.call(e)}),Cr._proxy.registeredCallback("notifyClearIMMsg",function(){CR__NotifyClearIMMsg.call()}),Cr._proxy.registeredCallback("conferenceEnded",function(){CR__MeetEnded.call()}),Cr._proxy.registeredCallback("entered",function(e){CRVideo_UserEnter.call(e)}),Cr._proxy.registeredCallback("left",function(e){CR__UserLeftMeet.call(e)}),Cr._proxy.registeredCallback("notifyStartBroadCast",function(){CR__NotifyStartBroadCast.call()}),Cr._proxy.registeredCallback("notifyStopBroadCast",function(){CR__NotifyStopBroadCast.call()}),Cr._proxy.registeredCallback("notifyBroadCastStartPush",function(){CR__NotifyBroadCastStartPush.call()}),Cr._proxy.registeredCallback("notifyBroadCastStopPush",function(){CR__NotifyBroadCastStopPush.call()}),Cr._proxy.registeredCallback("rightChanged",function(e){CR__RightChanged.call(e)}),Cr._proxy.registeredCallback("askQuesNotify",function(e){id=e[0],askQue=e[1],CR__AskQuesNotify.call([id,new Cr.Quesask(askQue)])}),Cr._proxy.registeredCallback("lockQuesNotify",function(e){id=e[0],queDeal=e[1],CR__LockQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("replyQuesNotify",function(e){id=e[0],queDeal=e[1],CR__ReplyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("modifyQuesNotify",function(e){id=e[0],queDeal=e[1],CR__ModifyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("delQuesNotify",function(e){id=e[0],termId=e[1],CR__DelQuesNotify.call([id,termId])}),Cr._proxy.registeredCallback("delAllQuesNotify",function(e){termId=e[0],CR__DelAllQuesNotify.call([termId])}),Cr._proxy.registeredCallback("publicQuesNotify",function(e){id=e[0],bPublic=e[1],termId=e[2],CR__PublicQuesNotify.call([id,bPublic,termId])}),Cr._proxy.registeredCallback("quesTypeChangeNotify",function(e){id=e[0],typeID=e[1],CR__QuesTypeChangeNotify.call([termId])}),Cr._proxy.registeredCallback("modifyQuesTypeNotify",function(e){termId=e[0],quesType=e[1],CR__ModifyQuesTypeNotify.call([termId])}),Cr._proxy.registeredCallback("setBroadCastQuesNotify",function(e){bEnable=e[0],CR__SetBroadCastQuesNotify.call([bEnable])}),Cr._proxy.registeredCallback("notifyPlayBackStartPush",function(e){url=e[0],CR__NotifyPlayBackStartPush.call([url])}),Cr._proxy.registeredCallback("notifypayback",function(e){CR__Notifypayback.call()}),Cr._proxy.registeredCallback("notifyDeleteIMMsg",function(e){count=e[0],CR__NotifyDeleteIMMsg.call([count])}),Cr._proxy.registeredCallback("notifyBroadCastPlaybackStop",function(e){url=e[0],CR__NotifyBroadCastPlaybackStop.call([url])}),Cr._proxy.registeredCallback("notifySwtichLiveAppElements",function(e){ele=e[0],status=e[1],CR__NotifySwtichLiveAppElements.call([ele,status])}),Cr._proxy.registeredCallback("notifyThumbUp",function(e){num=e[0],total=e[1],info=e[2],CR__NotifyThumbUp.call([num,total,info])}),Cr._proxy.registeredCallback("notifyLuckyDrawCfg",function(e){CR__NotifyLuckyDrawCfg.call(e)}),Cr._proxy.registeredCallback("notifyLDMembersStatus",function(e){CR__NotifyLDMembersStatus.call(e)}),Cr._proxy.registeredCallback("notifyLuckyDrawResult",function(e){CR__NotifyLuckyDrawResult.call(e)}),Cr._proxy.registeredCallback("notifySvrRecordStateChanged",function(e){CR__NotifySvrRecordStateChanged.call(e)}),Cr._proxy.registeredCallback("notifySvrRecordCfgChanged",function(e){CR__NotifySvrRecordCfgChanged.call(e)}),Cr._proxy.registeredCallback("AudioAllocRaw",function(e){CR__AudioAllocRaw.call(e)}),Cr._proxy.registeredCallback("ModifyPeerAddr",function(e){CR__ModifyPeerAddr.call(e)}),Cr._proxy.registeredCallback("VideoAllocRaw",function(e){CR__VideoAllocRaw.call(e)}),Cr._proxy.registeredCallback("AudioAllocRawExt2",function(e){CR__AudioAllocRawExt2.call(e)}),Cr._proxy.registeredCallback("VideoAllocRawExt2",function(e){CR__VideoAllocRawExt2.call(e)}),Cr._proxy.registeredCallback("ModifyPeerAddrExt",function(e){CR__ModifyPeerAddrExt.call(e)}),Cr._proxy.registeredCallback("DisableSendVideo2Internet",function(e){CR__DisableSendVideo2Internet.call(e)}),Cr._proxy.registeredCallback("EnableSendVideo2Internet",function(e){CR__EnableSendVideo2Internet.call(e)}),Cr._proxy.registeredCallback("Free",function(e){CR__Free.call(e)}),Cr._proxy.registeredCallback("notifyAllowVideoWall",function(e){CR__NotifyAllowVideoWall.call(e)}),Cr._proxy.registeredCallback("VideoUpdateStatus",function(e){CR__VideoUpdateStatus.call(e)}),Cr._proxy.registeredCallback("notifyOpenVideo",function(e){CR__NotifyOpenVideo.call(e)}),Cr._proxy.registeredCallback("startVideoByManager",function(e){CR__StartVideoByManager.call(e)}),Cr._proxy.registeredCallback("notifyEnableVideo",function(e){CR__NotifyEnableVideo.call(e)}),Cr._proxy.registeredCallback("updateFocusWindow",function(e){CR__UpdateFocusWindow.call(e)}),Cr._proxy.registeredCallback("updateVLayout",function(e){CR__UpdateVLayout.call(e)}),Cr._proxy.registeredCallback("updateMainVideoShowMode",function(e){CR__UpdateMainVideoShowMode.call(e)}),Cr._proxy.registeredCallback("updateVideoListMode",function(e){CR__UpdateVideoListMode.call(e)}),Cr._proxy.registeredCallback("enableUpload",function(e){CR__EnableUpload.call(e)}),Cr._proxy.registeredCallback("enableUpload2",function(e){CR__EnableUpload2.call(e)}),Cr._proxy.registeredCallback("generateIFrame",function(e){CR__GenerateIFrame.call(e)}),Cr._proxy.registeredCallback("notifyRefuseOpenVideo",function(e){CR__NotifyRefuseOpenVideo.call(e)}),Cr._proxy.registeredCallback("getVideoSetting",function(e){CR__GetVideoSetting.call(e)}),Cr._proxy.registeredCallback("setCamera",function(e){CR__SetCamera.call(e)}),Cr._proxy.registeredCallback("setCameraById",function(e){CR__SetCameraById.call(e)}),Cr._proxy.registeredCallback("notifyVideoPolling",function(e){CR__NotifyVideoPolling.call(e)}),Cr._proxy.registeredCallback("notifyPollingVideo",function(e){CR__NotifyPollingVideo.call(e)}),Cr._proxy.registeredCallback("notifyVideoList",function(e){CR__NotifyVideoList.call(e)}),Cr._proxy.registeredCallback("notifyUpdateAllCameraInfos",function(e){CR__NotifyUpdateAllCameraInfos.call(e)}),Cr._proxy.registeredCallback("notifySetOpenedCameraNumber",function(e){termId=e[0],carmId=e[1],CR__NotifySetOpenedCameraNumber.call([termId,carmId])}),Cr._proxy.registeredCallback("notifyStartAdjustDirection",function(e){CR__NotifyStartAdjustDirection.call(e)}),Cr._proxy.registeredCallback("notifyStartAdjustZoom",function(e){CR__NotifyStartAdjustZoom.call(e)}),Cr._proxy.registeredCallback("notifyStopAdjustDirection",function(e){CR__NotifyStopAdjustDirection.call(e)}),Cr._proxy.registeredCallback("notifyStopAdjustZoom",function(e){CR__NotifyStopAdjustZoom.call(e)}),Cr._proxy.registeredCallback("AudioUpdateStatus",function(e){CR__AudioUpdateStatus.call(e)}),Cr._proxy.registeredCallback("updateVoiceEnergy",function(e){CR__UpdateVoiceEnergy.call(e)}),Cr._proxy.registeredCallback("updateSpeaker",function(e){CR__UpdateSpeaker.call(e)}),Cr._proxy.registeredCallback("closeAll",function(e){CR__CloseAll.call(e)}),Cr._proxy.registeredCallback("playBackgroundMusic",function(e){CR__PlayBackgroundMusic.call(e)}),Cr._proxy.registeredCallback("notifyVoiceHowling",function(e){CR__NotifyVoiceHowling.call(e)}),Cr._proxy.registeredCallback("notifyVoiceNoise",function(e){CR__NotifyVoiceNoise.call(e)}),Cr._proxy.registeredCallback("getRemoteAudioInfNotify",function(e){CR__GetRemoteAudioInfNotify.call(e)}),Cr._proxy.registeredCallback("remoteAudioSetNotify",function(e){CR__RemoteAudioSetNotify.call(e)}),Cr._proxy.registeredCallback("notifyLanLessMicOpen",function(e){CR__NotifyLanLessMicOpen.call(e)}),CR_InitRslt.call([e,t])})}catch(e){Cr.Utils.log(e),CR_InitRslt.call([CR_INNER_ERR,"sdk内部错误"])}}function CR__UnInit(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return CR_INNER_ERR}}function CR__Login(e,t,i,n,r){Cr._proxy._loinging||Cr._proxy.login(e,t,i,n,r).then(function(e,t,i){0==e&&"flash"==Cr._proxy._type?CR_LoginRslt.call([e,t,new Cr.MeetInfo(i)]):CR_LoginRslt.call([e,t,i])})}function CR__RefreshSession(){Cr._proxy.refreshSession().then(function(e,t){CR__RefreshSessionRslt.call([e,t])})}function CR__KeepAlive(e){void 0===e&&(e=0),Cr._proxy.keepAlive(e).then(function(e,t){CR__KeepAliveRslt.call([e,t])})}function CR__Exit(e){void 0===e&&(e=""),Cr._proxy.exit(e).then(function(e,t){CR__ExitRslt.call([e,t])})}function CR__GetActiveMembers(){Cr._proxy.getActiveMembers().then(function(e,t,i){0==e?CR__GetActiveMembersRslt.call([e,t,i]):CR__GetActiveMembersRslt.call([e,t])})}function CR__SnedIMMsg(e,t,i,n,r){Cr._proxy.snedIMMsg(e,t,i,n,r).then(function(e,t){CR__SendIMMsgRslt.call([e,t])})}function CR__GetIMMsgCount(){Cr._proxy.getIMMsgCount().then(function(e,t,i){0==e?CR__GetIMMsgCountRslt.call([e,t,i]):CR__GetIMMsgCountRslt.call([e,t])})}function CR__GetLastMsg(e){Cr._proxy.getLastMsg(e).then(function(e,t,i){0==e?CR__GetLastMsgRslt.call([e,t,i]):CR__GetLastMsgRslt.call([e,t])})}function CR__GetLastNMsg(e,t){Cr._proxy.getLastNMsg(e,t).then(function(e,t,i){0==e?CR__GetLastNMsgRslt.call([e,t,i]):CR__GetLastNMsgRslt.call([e,t])})}function CR__GetBroadCastUrl(){Cr._proxy.getBroadCastUrl().then(function(e,t,i){0==e?CR__GetBroadCastUrlRslt.call([e,t,i]):CR__GetBroadCastUrlRslt.call([e,t])})}function CR__AskQues(e,t,i,n,r,o){Cr._proxy.askQues(e,t,i,n,r,o).then(function(e,t,i){0==e?CR__AskQuesRslt.call([e,t,i]):CR__AskQuesRslt.call([e,t])})}function CR__GetQuesList(){Cr._proxy.getQuesList().then(function(e,t,i){0==e?CR__GetQuesListRslt.call([e,t,i]):CR__GetQuesListRslt.call([e,t])})}function CR__GetLuckyDrawCfg(){Cr._proxy.getLuckyDrawCfg().then(function(e,t,i){0==e?CR__GetLuckyDrawCfgRslt.call([e,t,i]):CR__GetLuckyDrawCfgRslt.call([e,t])})}function CR__JoinLuckyDrawMembers(e,t){Cr._proxy.joinLuckyDrawMembers(e,t).then(function(e,t){CR__JoinLuckyDrawMembersRslt.call([e,t])})}function CR__StartSvrRecord(e){Cr._proxy.startSvrRecord(e).then(function(e,t){CR__StartSvrRecordRslt.call([e,t])})}function CR__UpdateSvrRecCfg(e){Cr._proxy.updateSvrRecCfg(e).then(function(e,t){CR__UpdateSvrRecCfgRslt.call([e,t])})}function CR__StopSvrRecord(){Cr._proxy.stopSvrRecord().then(function(e,t){CR__StopSvrRecordRslt.call([e,t])})}function CR__SetVideoDeviceStatus(e){Cr._proxy.setVideoDeviceStatus(e).then(function(e,t){CR__SetVideoDeviceStatusRslt.call([e,t])})}function CR__AllowVideoWall(e){Cr._proxy.allowVideoWall(e).then(function(e,t){CR__AllowVideoWallRslt.call([e,t])})}function CR__StartVideo(){Cr._proxy.startVideo().then(function(e,t){CR__StartVideoRslt.call([e,t])})}function CR__StopVideo(){Cr._proxy.stopVideo().then(function(e,t){CR__StopVideoRslt.call([e,t])})}function CR__ReqOpenVideo(e){Cr._proxy.reqOpenVideo(e).then(function(e,t){CR__ReqOpenVideoRslt.call([e,t])})}function CR__StartVideoEx(e){Cr._proxy.startVideoEx(e).then(function(e,t){CR__StartVideoExRslt.call([e,t])})}function CR__StopVideoEx(e){Cr._proxy.stopVideoEx(e).then(function(e,t){CR__StopVideoExExRslt.call([e,t])})}function CR__EnableVideo(e){Cr._proxy.enableVideo(e).then(function(e,t){CR__EnableVideoRslt.call([e,t])})}function CR__SetFocusWindow(e,t){Cr._proxy.setFocusWindow(e,t).then(function(e,t){CR__SetFocusWindowRslt.call([e,t])})}function CR__BatchSubscribeVideo(e,t){Cr._proxy.batchSubscribeVideo(e,t).then(function(e,t){CR__BatchSubscribeVideoRslt.call([e,t])})}function CR__BatchSubscribeVideo2(e,t,i){Cr._proxy.batchSubscribeVideo2(e,t,i).then(function(e,t){CR__BatchSubscribeVideo2Rslt.call([e,t])})}function CR__SubscribeFocusWindow(e){Cr._proxy.subscribeFocusWindow(e).then(function(e,t){CR__SubscribeFocusWindowRslt.call([e,t])})}function CR__SubscribeFocusWindow2(e){Cr._proxy.subscribeFocusWindow2(e).then(function(e,t){CR__SubscribeFocusWindow2Rslt.call([e,t])})}function CR__SetVLayout(e){Cr._proxy.setVLayout(e).then(function(e,t){CR__SetVLayoutRslt.call([e,t])})}function CR__SetMainVideoShowMode(e){Cr._proxy.setMainVideoShowMode(e).then(function(e,t){CR__SetMainVideoShowModeRslt.call([e,t])})}function CR__SetVideoListMode(e){Cr._proxy.setVideoListMode(e).then(function(e,t){CR__SetVideoListModeRslt.call([e,t])})}function CR__RefuseOpenVideo(e){Cr._proxy.refuseOpenVideo(e).then(function(e,t){CR__RefuseOpenVideoRslt.call([e,t])})}function CR__GetVideoSetting(e){Cr._proxy.getVideoSetting(e).then(function(e,t){CR__GetVideoSettingRslt.call([e,t])})}function CR__SetCamera(e,t){Cr._proxy.setCamera(e,t).then(function(e,t){CR__SetCameraRslt.call([e,t])})}function CR__SetCameraById(e){Cr._proxy.setCameraById(e).then(function(e,t){CR__SetCameraByIdRslt.call([e,t])})}function CR__SetVideoPolling(e,t){Cr._proxy.setVideoPolling(e,t).then(function(e,t){CR__SetVideoPollingRslt.call([e,t])})}function CR__UpdatePollingVideo(e){Cr._proxy.updatePollingVideo(e).then(function(e,t){CR__UpdatePollingVideoRslt.call([e,t])})}function CR__UpdateVideoList(e){Cr._proxy.updateVideoList(e).then(function(e,t){CR__UpdateVideoListRslt.call([e,t])})}function CR__GetVideoPollingState(e,t){Cr._proxy.getVideoPollingState(e,t).then(function(e,t){CR__GetVideoPollingStateRslt.call([e,t])})}function CR__UpdateAllCameraInfos(e){Cr._proxy.updateAllCameraInfos(e).then(function(e,t){CR__UpdateAllCameraInfosRslt.call([e,t])})}function CR__SetOpenedCameraNumber(e){Cr._proxy.setOpenedCameraNumber(e).then(function(e,t){CR__SetOpenedCameraNumberRslt.call([e,t])})}function CR__StartAdjustDirection(e,t){Cr._proxy.startAdjustDirection(e,t).then(function(e,t){CR__StartAdjustDirectionRslt.call([e,t])})}function CR__StartAdjustZoom(e,t){Cr._proxy.startAdjustZoom(e,t).then(function(e,t){CR__StartAdjustZoomRslt.call([e,t])})}function CR__StopAdjustDirection(e){Cr._proxy.stopAdjustDirection(e).then(function(e,t){CR__StopAdjustDirectionRslt.call([e,t])})}function CR__StopAdjustZoom(e){Cr._proxy.stopAdjustZoom(e).then(function(e,t){CR__StopAdjustZoomRslt.call([e,t])})}function CR__SetAudioDeviceStatus(e){Cr._proxy.setAudioDeviceStatus(e).then(function(e,t){CR__SetAudioDeviceStatusRslt.call([e,t])})}function CR__AskForMic(){Cr._proxy.askForMic().then(function(e,t){CR__AskForMicRslt.call([e,t])})}function CR__OpenMicEx(e){Cr._proxy.openMicEx(e).then(function(e,t){CR__OpenMicExRslt.call([e,t])})}function CR__CloseMicEx(e){Cr._proxy.closeMicEx(e).then(function(e,t){CR__CloseMicExRslt.call([e,t])})}function CR__CloseAll(){Cr._proxy.closeAll().then(function(e,t){CR__CloseAllRslt.call([e,t])})}function CR__SetVoiceEnergy(e){Cr._proxy.setVoiceEnergy(e).then(function(e,t){CR__SetVoiceEnergyRslt.call([e,t])})}function CR__PstnSwitchMicStatus(){Cr._proxy.pstnSwitchMicStatus().then(function(e,t){CR__PstnSwitchMicStatusRslt.call([e,t])})}function CR__StartRecord(){Cr._proxy.startRecord().then(function(e,t){CR__StartRecordRslt.call([e,t])})}function CR__IsRecording(){Cr._proxy.isRecording().then(function(e,t){CR__IsRecordingRslt.call([e,t])})}function CR__StopRecord(){Cr._proxy.isRecording().then(function(e,t){CR__StopRecordRslt.call([e,t])})}function CR__PlayApplause(){Cr._proxy.playApplause().then(function(e,t){CR__PlayApplauseRslt.call([e,t])})}function CR__GetMusicList(){Cr._proxy.getMusicList().then(function(e,t){CR__GetMusicListRslt.call([e,t])})}function CR__GetPlayBGMusic(){Cr._proxy.getPlayBGMusic().then(function(e,t){CR__GetPlayBGMusicRslt.call([e,t])})}function CR__StartBGMusic(e,t){Cr._proxy.startBGMusic(e,t).then(function(e,t){CR__StartBGMusicRslt.call([e,t])})}function CR__StopPlayBGMusic(){Cr._proxy.stopPlayBGMusic().then(function(e,t){CR__StopPlayBGMusicRslt.call([e,t])})}function CR__SetPlayBGMusicVolumn(e){Cr._proxy.setPlayBGMusicVolumn(e).then(function(e,t){CR__SetPlayBGMusicVolumnRslt.call([e,t])})}function CR__GetPlayBGMusicVolumn(){Cr._proxy.getPlayBGMusicVolumn().then(function(e,t){CR__GetPlayBGMusicVolumnRslt.call([e,t])})}function CR__VoiceHowling(e){Cr._proxy.voiceHowling(e).then(function(e,t){CR__VoiceHowlingRslt.call([e,t])})}function CR__VoiceNoise(e){Cr._proxy.voiceNoise(e).then(function(e,t){CR__VoiceNoiseRslt.call([e,t])})}function CR__RemoteAudioSet(e,t){Cr._proxy.remoteAudioSet(e,t).then(function(e,t){CR__RemoteAudioSetRslt.call([e,t])})}function CR__GetRemoteAudioInf(e){Cr._proxy.getRemoteAudioInf(e).then(function(e,t){CR__GetRemoteAudioInfRslt.call([e,t])})}ConferenceReceptor=Ice.Class(Conference.ConferenceCallback,{setProxy:function(e){this.proxy=e},entered:function(e){Cr.Utils.log("newMember"),this.proxy.callCallback("entered",[e])},left:function(e,t,i,n){console.log("离线原因：",n),Cr.Utils.log("left"),this.proxy.callCallback("left",[t,n])},actorChanged:function(e,t,i){Cr.Utils.log("actorChanged")},nicknameChanged:function(e,t,i){Cr.Utils.log("nicknameChanged")},optionChanged:function(e){Cr.Utils.log("optionChanged")},agendaUpdated:function(e){Cr.Utils.log("agendaUpdated")},autoEndCancelled:function(){Cr.Utils.log("autoEndCancelled")},conferenceBegan:function(){Cr.Utils.log("conferenceBegan")},conferenceEnded:function(e,t){Cr.Utils.log("conferenceEnded"),this.proxy.callCallback("conferenceEnded")},confirmAutoEnd:function(e){Cr.Utils.log("confirmAutoEnd")},inviteStateChanged:function(e,t){Cr.Utils.log("inviteStateChanged:")},memberCount:function(e){Cr.Utils.log("memberCount")},notifyApplyDemo:function(e){Cr.Utils.log("notifyApplyDemo")},notifyApplyRejected:function(e,t){Cr.Utils.log("notifyApplyRejected")},notifyAssistantChanged:function(e,t,i){Cr.Utils.log("notifyAssistantChanged")},notifyNetDetectResults:function(e,t,i){Cr.Utils.log("notifyNetDetectResults")},notifyReportStatus:function(e,t){Cr.Utils.log("notifyReportStatus")},exeCmd:function(e){Cr.Utils.log("exeCmd")},notifyStart1v1SubMeeting:function(e){Cr.Utils.log("notifyStart1v1SubMeeting")},notifyStop1v1SubMeeting:function(e){Cr.Utils.log("notifyStop1v1SubMeeting")},notifyStart1v1SubMeetingRslt:function(e,t){Cr.Utils.log("notifyStart1v1SubMeetingRslt")},setWDT1v1SubMeetingMode:function(e,t){Cr.Utils.log("setWDT1v1SubMeetingMode")},notifyIVRStatus:function(e,t){Cr.Utils.log("notifyIVRStatus")},notifyStartSvrBroadcast:function(e,t){Cr.Utils.log("notifyStartSvrBroadcast")},notifyLuckyDrawCfg:function(e){Cr.Utils.log("notifyLuckyDrawCfg")},notifyLuckyDrawResult:function(e){Cr.Utils.log("notifyLuckyDrawResult")},roomKnocked:function(e,t){Cr.Utils.log("roomKnocked")},roomStateChanged:function(e){Cr.Utils.log("roomStateChanged")},serverNotify:function(e){Cr.Utils.log("serverNotify")},serverNotifyMsg:function(e){},subjectUpdated:function(e){Cr.Utils.log("subjectUpdated")},updateAppStatus:function(e,t){Cr.Utils.log("updateAppStatus")},notifyStartBroadCast:function(){this.proxy.callCallback("notifyStartBroadCast"),Cr.Utils.log("notifyStartBroadCast")},notifyStopBroadCast:function(){this.proxy.callCallback("notifyStopBroadCast"),Cr.Utils.log("notifyStopBroadCast")},notifyWebViewerNum:function(e){Cr.Utils.log("notifyWebViewerNum")},notifyBroadCastStartPush:function(){this.proxy.callCallback("notifyBroadCastStartPush"),Cr.Utils.log("notifyBroadCastStartPush")},notifyBroadCastStopPush:function(){this.proxy.callCallback("notifyBroadCastStopPush"),Cr.Utils.log("CR__NotifyBroadCastStopPush")},rightChanged:function(e){var t=Array.from(e.addedRights),i=Array.from(e.reducedRights);CR__RightChanged.call([e.termId,t,i]),this.proxy.callCallback("rightChanged",[e.termId,t,i]),Cr.Utils.log("rightChanged")},notifyBroadCastPlayback:function(e){this.proxy.callCallback("notifyPlayBackStartPush",[e])},notifypayback:function(){this.proxy.callCallback("notifypayback")},notifyBroadCastPlaybackStop:function(e){this.proxy.callCallback("notifyBroadCastPlaybackStop",[e])},notifySwtichLiveAppElements:function(e,t){this.proxy.callCallback("notifySwtichLiveAppElements",[e,t])},notifyThumbUp:function(e,t,i){this.proxy.callCallback("notifyThumbUp",[e,t,i])},notifyLuckyDrawCfg:function(e){this.proxy.callCallback("notifyLuckyDrawCfg",[e.cdTime,e.isAutoDraw,e.memberType,e.prizes]),Cr.Utils.log("notifyLuckyDrawCfg")},notifyLDMembersStatus:function(e){this.proxy.callCallback("notifyLDMembersStatus",e)},notifyLuckyDrawResult:function(e){this.proxy.callCallback("notifyLuckyDrawResult",[e.prize,e.annouceTime,e.res]),Cr.Utils.log("notifyLuckyDrawResult")},notifySvrRecordStateChanged:function(e,t,i){Cr.Utils.log("notifySvrRecordStateChanged",[e,t,i])},notifySvrRecordCfgChanged:function(e,t){Cr.Utils.log("notifySvrRecordCfgChanged",[e,t])},notifySvrBroadcastCfgChanged:function(e,t){Cr.Utils.log("notifySvrBroadcastCfgChanged")},notifyAppUILocked:function(e){Cr.Utils.log("notifyAppUILocked")},notifyBeginVote:function(e,t,i){Cr.Utils.log("notifyBeginVote")},notifyEndVote:function(e){Cr.Utils.log("notifyEndVote")},notifyPublishVoteResult:function(e,t){Cr.Utils.log("notifyPublishVoteResult")},notifyCommitVote:function(e,t){Cr.Utils.log("notifyCommitVote")}}),MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},AudioAllocRaw_async:function(e,t){this.proxy.callCallback("AudioAllocRaw",[e,t]),Cr.Utils.log("AudioAllocRaw")},VideoAllocRaw_async:function(e,t,i){this.proxy.callCallback("VideoAllocRaw",[e,t,i]),Cr.Utils.log("VideoAllocRaw")},AudioAllocRawExt2_async:function(e,t,i,n){this.proxy.callCallback("AudioAllocRawExt2",[e,t,i]),Cr.Utils.log("AudioAllocRawExt2")},AudioAlloc_async:function(e,t,i,n){this.proxy.callCallback("AudioAllocRawExt2",[e,t,i]),Cr.Utils.log("AudioAllocRawExt2")},ModifyPeerAddr_async:function(e,t,i){this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams]),Cr.Utils.log("ModifyPeerAddr")},VideoAllocRawExt2_async:function(e,t,i,n,r){this.proxy.callCallback("VideoAllocRawExt2",[e,t,i,n]),Cr.Utils.log("VideoAllocRawExt2_async")},ModifyPeerAddrExt_async:function(e,t,i){e.ice_response(),this.proxy.callCallback("ModifyPeerAddrExt",[t,i]),Cr.Utils.log("ModifyPeerAddrExt")},DisableSendVideo2Internet_async:function(e,t){e.ice_response(),this.proxy.callCallback("DisableSendVideo2Internet",[t]),Cr.Utils.log("DisableSendVideo2Internet")},EnableSendVideo2Internet_async:function(e,t){e.ice_response(),this.proxy.callCallback("EnableSendVideo2Internet",[t]),Cr.Utils.log("EnableSendVideo2Internet")},Free_async:function(e,t){e.ice_response(),this.proxy.callCallback("Free",[t]),Cr.Utils.log("Free")}}),AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){this.proxy.callCallback("askQuesNotify",[e,t]),Cr.Utils.log("askQuesNotify(id:%s)",e)},lockQuesNotify:function(e,t){this.proxy.callCallback("lockQuesNotify",[e,t]),Cr.Utils.log("lockQuesNotify(id:%s)",e)},replyQuesNotify:function(e,t){this.proxy.callCallback("replyQuesNotify",[e,t]),Cr.Utils.log("replyQuesNotify(id:%s)",e)},modifyQuesNotify:function(e,t){this.proxy.callCallback("modifyQuesNotify",[e,t]),Cr.Utils.log("modifyQuesNotify(id:%s)",e)},delQuesNotify:function(e,t){this.proxy.callCallback("delQuesNotify",[e,t]),Cr.Utils.log("delQuesNotify(id:%s)",e)},delAllQuesNotify:function(e){this.proxy.callCallback("delAllQuesNotify",[e]),Cr.Utils.log("delAllQuesNotify(termId:%s)",e)},publicQuesNotify:function(e,t,i){this.proxy.callCallback("publicQuesNotify",[e,t,i]),Cr.Utils.log("publicQuesNotify(id:%s)",e)},quesTypeChangeNotify:function(e,t){this.proxy.callCallback("quesTypeChangeNotify",[e,t]),Cr.Utils.log("quesTypeChangeNotify(id:%s)",e)},modifyQuesTypeNotify:function(e,t){this.proxy.callCallback("modifyQuesTypeNotify",[e,t]),Cr.Utils.log("modifyQuesTypeNotify(termId:%s)",e)},setBroadCastQuesNotify:function(e){this.proxy.callCallback("setBroadCastQuesNotify",[e]),Cr.Utils.log("setBroadCastQuesNotify(bEnable:%s)",e)}}),ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg:function(e){Cr._zeorByte&&(Cr._zeorByte=Cr.Utils.utf8ByteToUnicodeStr([0]));var t=Cr.Utils.chat2html(e.inMsg.msg,e.inMsg.font.color,e.inMsg.font.size),i=e.srcNickname.split("\0"),n={type:t[0],index:e.index,msg:t[2],head:t[1],sendTime:e.inMsg.sendTime,targetNickname:e.inMsg.targetNickname,targetTermId:e.inMsg.targetTermId,srcNickname:i[0],srcTermId:e.srcTermId,ishost:i.length>1};this.proxy.callCallback("receiveIMMsg",[new Cr.MsgInfo(n)]),Cr.Utils.log("receiveIMMsg(srcNickname:%s)",e.srcNickname)},notifyIMForbidStatus:function(e,t,i){this.proxy.callCallback("notifyIMForbidStatus",[t,i])},notifyClearIMMsg:function(e){this.proxy.callCallback("notifyClearIMMsg")},notifyDeleteIMMsg:function(e){this.proxy.callCallback("notifyDeleteIMMsg",[e])}}),VideoReceptor=Ice.Class(Conference.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall:function(e,t){this.proxy.callCallback("notifyAllowVideoWall",[e,t])},updateStatus:function(e,t,i){this.proxy.callCallback("VideoUpdateStatus",[e,t,i])},notifyOpenVideo:function(e){this.proxy.callCallback("notifyOpenVideo",[e])},startVideoByManager:function(){this.proxy.callCallback("startVideoByManager")},notifyEnableVideo:function(e,t,i){this.proxy.callCallback("notifyEnableVideo",[e,t,i])},updateFocusWindow:function(e,t){this.proxy.callCallback("updateFocusWindow",[e,t])},updateVLayout:function(e,t){this.proxy.callCallback("updateVLayout",[e,t])},updateMainVideoShowMode:function(e,t){this.proxy.callCallback("updateMainVideoShowMode",[e,t])},updateVideoListMode:function(e,t){this.proxy.callCallback("updateVideoListMode",[e,t])},enableUpload:function(e,t){this.proxy.callCallback("enableUpload",[e,t])},enableUpload2:function(e,t){this.proxy.callCallback("enableUpload2",[e,t])},generateIFrame:function(e){this.proxy.callCallback("generateIFrame",[e])},notifyRefuseOpenVideo:function(e){this.proxy.callCallback("notifyRefuseOpenVideo",[e])},getVideoSetting:function(){this.proxy.callCallback("getVideoSetting")},setCamera:function(e,t){this.proxy.callCallback("setCamera",[e,t])},setCameraById:function(){this.proxy.callCallback("setCameraById")},notifyVideoPolling:function(e,t,i){this.proxy.callCallback("notifyVideoPolling",[e,t,i])},notifyPollingVideo:function(e,t){this.proxy.callCallback("notifyPollingVideo",[e,t])},notifyVideoList:function(e,t){this.proxy.callCallback("notifyVideoList",[e,t])},notifyUpdateAllCameraInfos:function(e,t){this.proxy.callCallback("notifyUpdateAllCameraInfos",[e,t])},notifySetOpenedCameraNumber:function(e,t){this.proxy.callCallback("notifySetOpenedCameraNumber",[e,t])},notifyStartAdjustDirection:function(e,t){this.proxy.callCallback("notifyStartAdjustDirection",[e,t])},notifyStartAdjustZoom:function(e,t){this.proxy.callCallback("notifyStartAdjustZoom",[e,t])},notifyStopAdjustDirection:function(e){this.proxy.callCallback("notifyStopAdjustDirection",[e])},notifyStopAdjustZoom:function(e){this.proxy.callCallback("notifyStopAdjustZoom",[e])}}),AudioReceptor=Ice.Class(Conference.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus:function(e,t,i){this.proxy.callCallback("AudioUpdateStatus",[e,t,i])},updateVoiceEnergy:function(e){this.proxy.callCallback("updateVoiceEnergy",[e])},updateSpeaker:function(e){this.proxy.callCallback("updateSpeaker",[e])},closeAll:function(e){this.proxy.callCallback("closeAll",[e])},playBackgroundMusic:function(e,t){this.proxy.callCallback("playBackgroundMusic",[e,t])},notifyVoiceHowling:function(e,t){this.proxy.callCallback("notifyVoiceHowling",[e,t])},notifyVoiceNoise:function(e,t){this.proxy.callCallback("notifyVoiceNoise",[e,t])},getRemoteAudioInfNotify:function(e,t){e.ice_response(),this.proxy.callCallback("getRemoteAudioInfNotify",[t])},remoteAudioSetNotify:function(e,t){this.proxy.callCallback("remoteAudioSetNotify",[e,t])},notifyLanLessMicOpen:function(){this.proxy.callCallback("notifyLanLessMicOpen")}}),Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1,Cr.__init=!0},Cr.LHProxy.prototype.init=function(){var e=new Cr.AsyncResult;CR_NOERR;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),e.complete([CR_NOERR,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"已经存在的注册对象";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var i=this.callbackDict[e];i&&"function"==typeof i&&i.call(null,t)},Cr.LHProxy.prototype.initCon=function(){this._communicator&&this._communicator.shutdown(),this._communicator=null,this._connection&&this._connection.destroy(0),this._connection=null,this._adapter&&this._adapter.destroy(),this._adapter=null,this._routerPrx&&this._routerPrx.destroySession(),this._routerPrx=null},Cr.LHProxy.prototype.login=function(e,t,i,n,r){var o=function(o){var s={};this._routerPrx.createSession("T"+Cr.crmt.MEET[0],"").then(function(e){return this._session=e,this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx)}.bind(this)).then(function(e){return this._adapter=e,this._adapter.activate(),this._routerPrx.ice_getConnection()}.bind(this)).then(function(e){return this._connection=e,this._connection.setAdapter(this._adapter),this._routerPrx.getCategoryForClient()}.bind(this)).then(function(e){this._category=e;var s="c"+Cr.crmt.MEET[0]+"/ConferenceRoom  @ c"+Cr.crmt.MEET[0]+"-ReplicaConfCtrlAdapters",c=Conference.ConferenceRoomPrx.uncheckedCast(this._communicator.stringToProxy(s)),a=new Conference.LoginRequest;a.confId=Cr.crmt.MEET[0],a.confKey=Cr.crmt.MEET[1],a.termId=t||0,i?(a.memberId=i.id,a.memberType=i.type,a.nickname=i.nickname):(a.memberId=Cr.crmt.ACNT[0],a.memberType=Cr.crmt.ACNT[1],a.nickname=Cr.crmt.ACNT[3]),a.accessNo=o,a.callbacks=new Ice.HashMap,a.extProperty=new Ice.HashMap,a.extProperty.set("client_pcid",n),i?a.extProperty.set(Conference.CLIETN_PRIV_DAT,i.nickname):a.extProperty.set(Conference.CLIETN_PRIV_DAT,Cr.crmt.ACNT[3]);var l=/macintosh|mac os x/i.test(navigator.userAgent),d=/windows|win32/i.test(navigator.userAgent),u=/linux/i.test(navigator.userAgent),h=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,p=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),f="";l?f=Conference.PLATFORMTYPE_MAC:d?f=Conference.PLATFORMTYPE_WIN32:u?f=Conference.PLATFORMTYPE_LINUX:h?f=Conference.PLATFORMTYPE_ANDROID:p&&(f=Conference.PLATFORMTYPE_IOS),a.extProperty.set(Conference.CLINET_PLATFORM,f);var _=navigator.userAgent.toLowerCase(),C={},m="";window.ActiveXObject?C.ie=_.match(/msie ([\d.]+)/)[1]:document.getBoxObjectFor?C.firefox=_.match(/firefox\/([\d.]+)/)[1]:window.MessageEvent&&!document.getBoxObjectFor?_.match(/chrome\/([\d.]+)/)?C.chrome=_.match(/chrome\/([\d.]+)/)[1]:C.chrome="chrome0":window.opera?C.opera=_.match(/opera.([\d.]+)/)[1]:window.openDatabase?C.safari=_.match(/version\/([\d.]+)/)[1]:navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)?C.weixin=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)[1]:"qq"==_.match(/QQ/i)&&(C.QQ="QQbrow"),C.ie?m="IE:"+C.ie:C.firefox?m="firefox:"+C.firefox:C.chrome?m="chrome:"+C.chrome:C.opera?m="opera:"+C.opera:C.safari?m="safari:"+C.safari:C.weixin?m="weixin:"+wechatInfo[1]:C.QQ&&(m="QQbrow:"),a.extProperty.set(Conference.CLINET_BROWSER_INFO,m);var g="",y="",v="";window.loginConnection=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.loginConnection.createOffer(function(e){-1!=e.sdp.indexOf("H264")&&(v="H264"),-1!=e.sdp.indexOf("VP8")&&(y="vp8"),y&&v?g="vp8,H264":y?g="vp8":v&&(g="H264"),a.extProperty.set(Conference.CLINET_WEBRTC_CODECS,g),"vp8"==y&&a.extProperty.set(Conference.CLINET_VP8_SUPPORT,y)},function(e){console.log(e)},{offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1}),a.extProperty.set(Conference.CLINET_OPENID,r),a.extProperty.set(Conference.CLINET_DEVICETYPE,Conference.DEVICETYPE_WEBRTC);var I=new Ice.Identity;I.name="ConferenceCallback",I.category=this._category,this._conferenceReceptor=new ConferenceReceptor,this._conferenceReceptor.setProxy(this),this._adapter.add(this._conferenceReceptor,I);var S=Conference.ConferenceCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(I));a.callbacks.set("ConferenceCallback",S);var R=new Ice.Identity;R.name="IMCallback",R.category=this._category,this._chatReceptor=new ChatReceptor,this._chatReceptor.setProxy(this),this._adapter.add(this._chatReceptor,R);var E=Conference.IMCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(R));a.callbacks.set("IMCallback",E);var w=new Ice.Identity;w.name="AnsQueCallback",w.category=this._category,this._ansQueReceptor=new AnsQueReceptor,this._ansQueReceptor.setProxy(this),this._adapter.add(this._ansQueReceptor,w);var b=Conference.AnsQueCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(w));a.callbacks.set("AnsQueCallback",b);var x=new Ice.Identity;x.name="VideoCallback",x.category=this._category,this._videoReceptor=new VideoReceptor,this._videoReceptor.setProxy(this),this._adapter.add(this._videoReceptor,x);var P=Conference.VideoCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(x));a.callbacks.set("VideoCallback",P);var O=new Ice.Identity;O.name="AudioCallback",O.category=this._category,this._audioReceptor=new AudioReceptor,this._audioReceptor.setProxy(this),this._adapter.add(this._audioReceptor,O);var T=Conference.AudioCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(O));a.callbacks.set("AudioCallback",T);var A=new Ice.Identity;A.name="MS.MSClient",A.category=this._category,this._mSClientI=new MSClientI,this._mSClientI.setProxy(this),this._adapter.add(this._mSClientI,A);var M=MS.MSClientPrx.uncheckedCast(this._adapter.createDirectProxy(A));return a.callbacks.set("MS.MSClient",M),c.login(a)}.bind(this)).then(function(e){for(var t in s.termId=e.termId,s.activeMembers=e.activeMembers,s.myDetail=e.myDetail,s.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),s.isBegan=e.isBegan,s.countdown=e.countdown,s.mainVideoTermID=e.mainVideoTermID,s.pstnnum=e.confInfo.get(Conference.CONFINFO_PSTNNUM),s.pstnpwd=e.confInfo.get(Conference.CONFINFO_PSTNPWD),s.freeConf=e.confInfo.get(Conference.CONFINFO_FREECONF),s.isBroadcating=e.confInfo.get(Conference.CONFINFO_IS_BROADCATING),s.webviewerQues=e.confInfo.get(Conference.CONFINFO_WEBVIEWER_QUES),s.activeMembers){var i=s.activeMembers[t];i.termId==s.termId&&(s.nickname=i.nickname,s.bindId=i.bindId,s.openedCamIDs=i.extProperty.get(Conference.MINFO_OPENEDCAMIDS))}this._conferenceRequest=Conference.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),this._chatRequest=Conference.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),this._ansQuesCtrl=Conference.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),this._videoCtrl=Conference.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),this._audioCtrl=Conference.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),this._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("ClientReport")),this._logining=!1,window.loginConnection&&window.loginConnection.close(),window.loginConnection=null,l.complete([CR_NOERR,"",new Cr.MeetInfo(s)]),Cr.Utils.log("登陆耗时："+((new Date).getTime()-Cr.startTime))}.bind(this)).exception(function(r){this._logining=!1,r instanceof Ice.SocketException?l.complete([CR_SOCKETEXCEPTION,"socket错误"]):r instanceof Conference.MemberAlreadyInCanTryVisitor||r instanceof Conference.MemberAlreadyInMeet?l.complete([CR_MEMBER_ALREADY_IN_MEET,"用户已存在"]):r instanceof Conference.MemberOverflowError?l.complete([CR_CONCURRENCY_OVER,"并发数超出"]):r instanceof Conference.ConferencePrepareError?(l.complete([CR_MEET_IS_OPEN_ING,"会议正在打开中"]),setTimeout(function(){CR__Login(e,t,i,n,openId,livetype,livemobile,loginserver)},1e4)):l.complete([CR_INNER_ERR,r.toString()]),Cr.Utils.log(r.toString()),Cr.Utils.log(r.stack)}.bind(this))}.bind(this),s=function(e){var t=f[e];if("https:"==document.location.protocol)var i=2066;else i=13111;var n=Glacier2.RouterPrx.uncheckedCast(this._communicator.stringToProxy("s"+t[0]+"/Access:"+this._protocol+" -h "+t[1]+" -p "+i));n.ice_ping().then(function(){Cr.Utils.log("结束 ping("+this._protocol+"://"+t[1]+":"+i+")耗时："+((new Date).getTime()-h)),u||(u=!0,this._routerPrx=n,this._communicator.setDefaultRouter(this._routerPrx),o(t[0]),Cr.Utils.log(t[0]))}.bind(this)).exception(function(e){Cr.Utils.log("结束 ping("+this._protocol+"://"+t[1]+":"+i+")网络不好"),u&&++d==p&&(this._logining=!1,l.complete([CR_NOTAVAILABLESERVER,"没有可用服务器"]))}.bind(this))}.bind(this),c=function(){Ice.Promise.try2(function(){this._communicator=Ice.initialize(this._initData),h=(new Date).getTime(),f=Cr.crmt.ACSSVR,p=f.length,u=!1,d=0;for(var e=0;e<p;e++)s(e)}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,l.complete([CR_UNKNOWERR,"未知错误"])}.bind(this))}.bind(this),a=function(e){Cr.crmt={};var t=atob(e.substr(5)).split("\n");for(var i in t){var n=t[i].match(/-(\w+?)=(\S+)/);null!=n&&3==n.length&&(Cr.crmt[n[1]]=n[2],Cr.Utils.log("key:%s value:%s",n[1],n[2]))}for(var r=Cr.crmt.ACNT.split(";"),o=r[3].match(/../g),s=new ArrayBuffer(o.length),c=new DataView(s),a=[],l=0;l<o.length;l++)c.setUint8(l,parseInt(o[l],16)),a[l]=c.getUint8(l);var d=Cr.Utils.utf8ByteToUnicodeStr(a);r[3]=d,Cr.crmt.ACNT=r,Cr.crmt.MEET=Cr.crmt.MEET.split(";");var u=Cr.crmt.ACSSVR.split(";");u.pop();for(l=0;l<u.length;l++)u[l]=u[l].split(":");Cr.crmt.ACSSVR=u}.bind(this);if(!this._logining){var l=new Cr.AsyncResult;try{this._logining=!0;var d=0,u=!1,h=0,p=0,f=null;if(Cr.startTime=(new Date).getTime(),this.initCon(),Cr.crmt)Ice.Promise.try2(function(){c()}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),l.complete([CR_UNKNOWERR,"未知错误"])}.bind(this));else{var _=atob(e),C=_.match(/-MEETURL=(.*)/)[1];C="https:"==document.location.protocol?C.replace("10.8.8.220","10.8.8.220:543"):C.replace("10.8.8.220","10.8.8.220:80");var m=document.location.protocol+"//"+C;m=(m=m.replace("getLiveAccKey","getWebrtcAccKey")).replace("www.cloudroom.com","rtc.cloudroom.com");var g="crmt:"+btoa(_+"\r\n-PRODUCT=win32_net").replace(/\r\n/g,"");Ice.Promise.try2(function(){$.ajax({type:"POST",url:m,data:g,dataType:"text",success:function(e,t){"success"==t?-1!=e.indexOf("erro:")?(this._logining=!1,l.complete([CR_AUTHERROR,e])):(a(e),c()):(this._logining=!1,l.complete([CR_NOSERVER_RSP,"服务器没有响应"]))}.bind(this)})}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,l.complete([CR_UNKNOWERR,"未知错误"])}.bind(this))}}catch(e){l.complete([CR_INNER_ERR,e.toString()])}return l}},Cr.LHProxy.prototype.refreshSession=function(){var e=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,statusDict.set("w",e.toString()),this._conferenceRequest.keepAlive(statusDict).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.exit(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var e=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,this._conferenceRequest.getActiveMembers().then(function(t){for(var i in t){var n=t[i].extProperty.get(Conference.MINFO_OPENEDCAMIDS);void 0!=n&&(n=n.split(";")[0]),t[i].openedCamIDs=n}e.complete([CR_NOERR,"",t])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.snedIMMsg=function(e,t,i,n,r){var o=new Cr.AsyncResult;try{var s=new Ice.Context;s._fwd="z";var c=new Conference.InIMMsgInfo;c.targetTermId=e,c.targetNickname=t,c.font=i,c.msg=Cr.Utils.html2chat(n),c.sendTime=r,this._chatRequest.sendIMMsg(c,s).then(function(){o.complete([CR_NOERR,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?o.complete([CR_CONTAINSSENSITIVEWORDS,"包含了敏感词"]):e instanceof Conference.NotPermitError?o.complete([CR_NOT_CHAT_PERMIT,"没有聊天权限"]):o.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){o.complete([CR_INNER_ERR,e.toString()])}return o},Cr.LHProxy.prototype.getIMMsgCount=function(){var e=new Cr.AsyncResult;try{this._chatRequest.getIMMsgCount().then(function(t){e.complete([CR_NOERR,"",t])}.bind(this)).exception(function(t){e.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.getLastMsg=function(e){var t=new Cr.AsyncResult;try{var i=new Ice.Context;i._fwd="z",this._chatRequest.getLastMsg(e,i).then(function(e){var i=[];for(var n in e){var r=e[n],o=r.srcNickname.split("\0"),s=Cr.Utils.chat2html(r.inMsg.msg,r.inMsg.font.color,r.inMsg.font.size),c={type:s[0],index:r.index,msg:s[2],head:s[1],sendTime:r.inMsg.sendTime,targetNickname:r.inMsg.targetNickname,targetTermId:r.inMsg.targetTermId,srcNickname:o[0],srcTermId:r.srcTermId,ishost:o.length>1};i.push(new Cr.MsgInfo(c))}t.complete([CR_NOERR,"",i])}.bind(this)).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getLastNMsg=function(e,t){var i=new Cr.AsyncResult;try{var n=new Ice.Context;n._fwd="z",this._chatRequest.getLastNMsg(e,t,n).then(function(e){var t=[];for(var n in e){var r=e[n],o=r.srcNickname.split("\0"),s=Cr.Utils.chat2html(r.inMsg.msg,r.inMsg.font.color,r.inMsg.font.size),c={type:s[0],index:r.index,msg:s[2],head:s[1],sendTime:r.inMsg.sendTime,targetNickname:r.inMsg.targetNickname,targetTermId:r.inMsg.targetTermId,srcNickname:o[0],srcTermId:r.srcTermId,ishost:o.length>1};t.push(new Cr.MsgInfo(c))}i.complete([CR_NOERR,"",t]),Cr.Utils.log("获取聊天记录耗时："+((new Date).getTime()-Cr.startTime))}.bind(this)).exception(function(e){i.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.getBroadCastUrl=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getBroadCastUrl().then(function(t){var i={rtmp:t.get(Conference.BOARDCAST_RTMP),hls:t.get(Conference.BOARDCAST_HLS)};e.complete([CR_NOERR,"",i])}).exception(function(t){e.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)})}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.askQues=function(e,t,i,n,r,o){var s=new Cr.AsyncResult;try{var c=new Conference.QuesAsk;c.typeID=e,c.asktime=t,c.termID=i,n&&""!=n&&(r='<headimg src="'+n+'"/>'+ +r),c.content=r,c.nickname=o,this._ansQuesCtrl.askQues(c).then(function(e){s.complete([CR_NOERR,"",e])}).exception(function(e){s.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)})}catch(e){s.complete([CR_INNER_ERR,e.toString()])}return s},Cr.LHProxy.prototype.getQuesList=function(){var e=new Cr.AsyncResult;try{this._ansQuesCtrl.getQuesList().then(function(t){for(var i in quesList=[],t){var n=t[i];quesList.push(new Cr.QuesInf(n))}e.complete([CR_NOERR,"",quesList])}).exception(function(t){e.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)})}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.getLuckyDrawCfg=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getLuckyDrawCfg().then(function(t){var i=t;e.complete([CR_NOERR,"",i])}).exception(function(t){e.complete([CR_UNKNOWERR,"未知错误"])})}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.joinLuckyDrawMembers=function(e,t){var i=new Cr.AsyncResult;try{this._conferenceRequest.joinLuckyDrawMembers(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.startSvrRecord=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.startSvrRecord(e).then(function(){t.complete([CR_NOERR])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.updateSvrRecCfg=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.updateSvrRecCfg(e).then(function(){t.complete([CR_NOERR,""])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopSvrRecord=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.stopSvrRecord().then(function(){e.complete([CR_NOERR,""])}).exception(function(t){e.complete([CR_UNKNOWERR,"未知错误"])})}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.setVideoDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setDeviceStatus(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.allowVideoWall=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.allowVideoWall(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.startVideo=function(){var e=new Cr.AsyncResult;try{this._videoCtrl.startVideo().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.stopVideo=function(){var e=new Cr.AsyncResult;try{this._videoCtrl.stopVideo().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.reqOpenVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.reqOpenVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.startVideoEx=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.startVideoEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopVideoEx=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopVideoEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.enableVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.enableVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setFocusWindow=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.setFocusWindow(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.batchSubscribeVideo=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.batchSubscribeVideo(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.batchSubscribeVideo2=function(e,t,i){var n=new Cr.AsyncResult,r=[new Conference.UsrCamSize(Number(e),Number(t),Number(Conference.VIDEO_SS_1M))],o=new Ice.Context;o._fwd="z",console.log("向后台报数据了",r);try{this._videoCtrl.batchSubscribeVideo2(r,o).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.subscribeFocusWindow=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.subscribeFocusWindow2=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow2(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVLayout=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVLayout(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setMainVideoShowMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setMainVideoShowMode(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVideoListMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVideoListMode(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.refuseOpenVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.refuseOpenVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getVideoSetting=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.getVideoSetting(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setCamera=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.setCamera(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.setCameraById=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setCameraById(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVideoPolling=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.setVideoPolling(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.updatePollingVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updatePollingVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.updateVideoList=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updateVideoList(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getVideoPollingState=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.getVideoPollingState(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.updateAllCameraInfos=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updateAllCameraInfos(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setOpenedCameraNumber=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setOpenedCameraNumber(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.startAdjustDirection=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.startAdjustDirection(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.startAdjustZoom=function(e,t){var i=new Cr.AsyncResult;try{this._videoCtrl.startAdjustZoom(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setAudioDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setDeviceStatus(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.askForMic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.askForMic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.openMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.openMicEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.closeMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.closeMicEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.closeAll=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.closeAll().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.setVoiceEnergy=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setVoiceEnergy(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.pstnSwitchMicStatus=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.pstnSwitchMicStatus().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.startRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.startRecord().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.isRecording=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.isRecording().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.stopRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopRecord().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.playApplause=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.playApplause().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.getMusicList=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getMusicList().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.getPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusic().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.startBGMusic=function(e,t){var i=new Cr.AsyncResult;try{this._audioCtrl.startBGMusic(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.stopPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopPlayBGMusic().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.setPlayBGMusicVolumn=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setPlayBGMusicVolumn(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusicVolumn=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusicVolumn().then(function(){e.complete([CR_NOERR,""])}.bind(this)).exception(function(t){e.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([CR_INNER_ERR,t.toString()])}return e},Cr.LHProxy.prototype.voiceHowling=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceHowling(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.voiceNoise=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceNoise(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.remoteAudioSet=function(e,t){var i=new Cr.AsyncResult;try{this._audioCtrl.remoteAudioSet(e,t).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t};var CRVideo=function(){window;var e=document,t=navigator,i=void 0!==e.getElementById&&void 0!==e.getElementsByTagName&&void 0!==e.createElement,n=t.userAgent.toLowerCase(),r=t.platform.toLowerCase(),o=/win/.test(r||n),s=/mac/.test(r||n),c=!!/webkit/.test(n)&&parseFloat(n.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=n.indexOf("firefox")>-1;ie="Microsoft Internet Explorer"===t.appName;var l=navigator.userAgent.toLowerCase();if(ie)var d=l.match(/msie ([\d.])+/gi)[0].split(" ")[1];return{w3:i,wk:c,ie:ie,ff:a,win:o,mac:s,v:d}}();CRVideo.addEventListener=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent&&e.attachEvent("on"+t,i)},CRVideo.ic=null,CRVideo.callserverName=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queInfo=null,CRVideo.queuingID=null,CRVideo.Server=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.LoginFlag=0,CRVideo.meetSubject="test",CRVideo.queStatusInfo=[],CRVideo.queServiceInfo="demo-queID",CRVideo.IceAddr=null,CRVideo.inviteID="",CRVideo.protocol=document.location.protocol,CRVideo.logServer=null,CRVideo.logUUID="",CRVideo_initIce=function(e,t){this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.ACM.Server","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),CRVideo.ic=Ice.initialize(this._initData);var i="jserver:wss -h "+e+" -p "+t;CRVideo.proxy=CRVideo.ic.stringToProxy(i),console.log(i)},CRVideo.CbProxy=function(e){this.name=e,this.callback=null};var CRVideo_QueueStatusChanged=new CRVideo.CbProxy("CRVideo_QueueStatusChanged"),CRVideo_QueuingInfoChanged=new CRVideo.CbProxy("CRVideo_QueuingInfoChanged"),CRVideo_AutoAssignUser=new CRVideo.CbProxy("CRVideo_AutoAssignUser"),CRVideo_CancelAssignUser=new CRVideo.CbProxy("CRVideo_CancelAssignUser"),CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),CRVideo_NotifyCallAccepted=new CRVideo.CbProxy("CRVideo_NotifyCallAccepted"),CRVideo_NotifyUserStatus=new CRVideo.CbProxy("CRVideo_NotifyUserStatus"),CRVideo_LineOff=new CRVideo.CbProxy("CRVideo_LineOff"),CRVideo_LoginSuccess=new CRVideo.CbProxy("CRVideo_LoginSuccess"),CRVideo_LoginFail=new CRVideo.CbProxy("CRVideo_LoginFail"),CRVideo_ShakeHandRslt=new CRVideo.CbProxy("CRVideo_ShakeHandRslt"),CRVideo_SetDNDStatusSuccess=new CRVideo.CbProxy("CRVideo_SetDNDStatusSuccess"),CRVideo_SetDNDStatusFail=new CRVideo.CbProxy("CRVideo_SetDNDStatusFail"),CRVideo_StartUserStatusNotifyRslt=new CRVideo.CbProxy("CRVideo_StartUserStatusNotifyRslt"),CRVideo_StopUserStatusNotifyRslt=new CRVideo.CbProxy("CRVideo_StopUserStatusNotifyRslt"),CRVideo_GetUserStatusSuccess=new CRVideo.CbProxy("CRVideo_GetUserStatusSuccess"),CRVideo_GetUserStatusFail=new CRVideo.CbProxy("CRVideo_GetUserStatusFail"),CRVideo_CallSuccess=new CRVideo.CbProxy("CRVideo_CallSuccess"),CRVideo_CallFail=new CRVideo.CbProxy("CRVideo_CallFail"),CRVideo_InitQueueDatRslt=new CRVideo.CbProxy("CRVideo_InitQueueDatRslt"),CRVideo_GetQueueStatusRslt=new CRVideo.CbProxy("CRVideo_GetQueueStatusRslt"),CRVideo_StartQueuingRslt=new CRVideo.CbProxy("CRVideo_StartQueuingRslt"),CRVideo_StartServiceRslt=new CRVideo.CbProxy("CRVideo_StartServiceRslt"),CRVideo_StopServiceRslt=new CRVideo.CbProxy("CRVideo_StopServiceRslt"),CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected"),CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),CRVideo_GetCallServerInfoFail=new CRVideo.CbProxy("CRVideo_GetCallServerInfoFail"),CRVideo_GetCallServerInfoSuccess=new CRVideo.CbProxy("CRVideo_GetCallServerInfoSuccess"),CRVideo_VideoStatusChanged=new CRVideo.CbProxy("CRVideo_VideoStatusChanged"),CRVideo_DefVideoChanged=new CRVideo.CbProxy("CRVideo_DefVideoChanged"),CRVideo_VideoDevChanged=new CRVideo.CbProxy("CRVideo_VideoDevChanged"),CRVideo_EnterMeetingRslt=new CRVideo.CbProxy("CRVideo_EnterMeetingRslt"),CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped"),CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),CRVideo_StopQueuingRslt=new CRVideo.CbProxy("CRVideo_StopQueuingRslt"),CRVideo_CreateMeetingSuccess=new CRVideo.CbProxy("CRVideo_CreateMeetingSuccess"),CRVideo_CreateMeetingFail=new CRVideo.CbProxy("CRVideo_CreateMeetingFail"),CRVideo_CallMorePartyRslt=new CRVideo.CbProxy("CRVideo_CallMorePartyRslt"),CRVideo_CancelCallMorePartyRslt=new CRVideo.CbProxy("CRVideo_CancelCallMorePartyRslt"),CRVideo_NotifyCallMorePartyStatus=new CRVideo.CbProxy("CRVideo_NotifyCallMorePartyStatus"),CRVideo_UserLeftMeeting=new CRVideo.CbProxy("CRVideo_UserLeftMeeting"),CRVideo_UserEnterMeeting=new CRVideo.CbProxy("CRVideo_UserEnterMeeting"),CRVideo_sendCmdNameFunc={NotifyQueueStatus:function(e){CRVideo_QueueStatusChanged.callback(e.status)},NotifyPosition:function(e){CRVideo_QueueStatusChanged.callback(e.status),CRVideo_QueuingInfoChanged.callback(e)},AssignUser:function(e){CRVideo_AutoAssignUser.callback(e),console.log("CRVideo_AutoAssignUser："+e),CRVideo.remoteinfo.nickname=e.userName,CRVideo.remoteinfo.userID=e.userID},AssignCancel:function(e){CRVideo_CancelAssignUser.callback(e.queID,e.userID)},ServerAccept:function(e){CRVideo_NotifyCallAccepted.callback(e.callID,e.meeting,"")},ServerCall:function(e){CRVideo_NotifyCallIn.callback(e.callID,e.meeting,e.caller,e.usrExDat),console.log("CRVideo_AutoAssignUser："+e),CRVideo.remoteinfo.nickname=e.callerName,CRVideo.remoteinfo.userID=e.caller},ServerPushUserStatus:function(e){CRVideo_NotifyUserStatus.callback(e.usersStatus,"")},ServerDecline:function(e){CRVideo_NotifyCallRejected.callback(e.callID,"","")},ServerKickoutUser:function(e){CRVideo_LineOff.callback(e)},ServerReleaseCall:function(e){console.log("ServerReleaseCall："+e),CRVideo_NotifyCallHungup.callback(CRVideo.CallID),CRVideo.CallID=""},ServerCancelCall:function(e){console.log("ServerReleaseCall："+e)},ServerNotifyInvite:function(e){CRVideo_NotifyCallMorePartyStatus.callback(e.inviteID,e.callProgress)}},CRVideo_webSendCmdNameFunc={Login:function(e,t){0==e.RspCode?(CRVideo.LoginFlag=1,CRVideo_LoginSuccess.callback(e.sessionID,""),setInterval(function(){CRVideo_ShakeHand()},3e4)):CRVideo_LoginFail.callback(e.RspDesc,"")},ShakeHand:function(e,t){0==e.RspCode&&CRVideo_ShakeHandRslt.callback(e)},GetServiceData:function(json,jsonName){0==json.RspCode&&(CRVideo.queInfo=eval(json.ques)),CRVideo_InitQueueDatRslt.callback(json.RspCode,"")},GetQueueStatus:function(json,jsonName){if(0==json.RspCode){for(var length=CRVideo.queStatusInfo.length,hasque=!1,obj=eval(json.status),i=0;i<CRVideo.queStatusInfo.length;i++){var quetmp=CRVideo.queStatusInfo[i];quetmp.queID!=obj.queID||(CRVideo.queStatusInfo[i]=obj,hasque=!0)}hasque||CRVideo.queStatusInfo.push(obj)}CRVideo_GetQueueStatusRslt.callback(json.status)},UserEnter:function(e,t){CRVideo_StartQueuingRslt.callback(e,e.RspCode,"")},UserLeave:function(e,t){CRVideo_StopQueuingRslt.CallBack(e)},AgentEnter:function(e,t){0==e.RspCode&&(CRVideo.queServiceInfo=CRVideo.queServiceInfo+","+t.queID+"-queID",console.log("queServiceInfo ="+CRVideo.queServiceInfo)),CRVideo_StartServiceRslt.callback(t.queID,e.RspCode,"")},AgentLeave:function(e,t){if(0==e.RspCode){var i=","+t.queID+"-queID";CRVideo.queServiceInfo=CRVideo.queServiceInfo.replace(i,"")}CRVideo_StopServiceRslt.callback(t.queID,e.RspCode,"")},StartStatusPush:function(e,t){CRVideo_StartUserStatusNotifyRslt.callback(e.RspCode,"")},StopStatusPush:function(e,t){CRVideo_StopUserStatusNotifyRslt.callback(e.RspCode,"")},GetUserStatus:function(e,t){0==e.RspCode?CRVideo_GetUserStatusSuccess.callback(e.userStatus,""):CRVideo_GetUserStatusFail.callback(e.RspCode,"")},ClientCustomStatusUpdate:function(e,t){0==e.RspCode?CRVideo_SetDNDStatusSuccess.callback(e):CRVideo_SetDNDStatusFail.callback(e)},RequestUser:function(e,t){CRVideo_ReqAssignUserRslt.callback(e.RspCode,e,"")},AcceptCall:function(e,t){console.log(e),0==e.RspCode?CRVideo_AcceptCallSuccess.callback(e.RspCode,t,""):CRVideo_AcceptCallFail.callback(e.RspCode,e,"")},ClientCall:function(e,t){console.log(e),0==e.RspCode?CRVideo_CallSuccess.callback(t.callID,""):CRVideo_CallFail.callback(e.RspCode,e.RspCode,"")},ClientCancelInvite:function(e,t){CRVideo_CancelCallMorePartyRslt.callback(t.inviteID,e.RspCode,"")},ClientReleaseCall:function(e,t){0==e.RspCode?CRVideo_HangupCallSuccess.callback(e.callID,""):CRVideo_HangupCallFail.callback(e.RspCode,e.RspCode,"")}},CRVideo_SetServerAddr=function(e){CRVideo.callserverName=e},CRVideo_sendCmdName={NotifyQueueStatus:CRVideo_sendCmdNameFunc.NotifyQueueStatus,NotifyPosition:CRVideo_sendCmdNameFunc.NotifyPosition,AssignUser:CRVideo_sendCmdNameFunc.AssignUser,AssignCancel:CRVideo_sendCmdNameFunc.AssignCancel,ServerAccept:CRVideo_sendCmdNameFunc.ServerAccept,ServerCall:CRVideo_sendCmdNameFunc.ServerCall,ServerPushUserStatus:CRVideo_sendCmdNameFunc.ServerPushUserStatus,ServerDecline:CRVideo_sendCmdNameFunc.ServerDecline,ServerKickoutUser:CRVideo_sendCmdNameFunc.ServerKickoutUser,ServerReleaseCall:CRVideo_sendCmdNameFunc.ServerReleaseCall,ServerCancelCall:CRVideo_sendCmdNameFunc.ServerCancelCall,ServerNotifyInvite:CRVideo_sendCmdNameFunc.ServerNotifyInvite},CRVideo_webSendCmdName={Login:CRVideo_webSendCmdNameFunc.Login,ShakeHand:CRVideo_webSendCmdNameFunc.ShakeHand,GetServiceData:CRVideo_webSendCmdNameFunc.GetServiceData,GetQueueStatus:CRVideo_webSendCmdNameFunc.GetQueueStatus,UserEnter:CRVideo_webSendCmdNameFunc.UserEnter,UserLeave:CRVideo_webSendCmdNameFunc.UserLeave,AgentEnter:CRVideo_webSendCmdNameFunc.AgentEnter,AgentLeave:CRVideo_webSendCmdNameFunc.AgentLeave,StartStatusPush:CRVideo_webSendCmdNameFunc.StartStatusPush,StopStatusPush:CRVideo_webSendCmdNameFunc.StopStatusPush,GetUserStatus:CRVideo_webSendCmdNameFunc.GetUserStatus,ClientCustomStatusUpdate:CRVideo_webSendCmdNameFunc.ClientCustomStatusUpdate,RequestUser:CRVideo_webSendCmdNameFunc.RequestUser,AcceptCall:CRVideo_webSendCmdNameFunc.AcceptCall,ClientCall:CRVideo_webSendCmdNameFunc.ClientCall,clientInvite:CRVideo_webSendCmdNameFunc.clientInvite,ClientCancelInvite:CRVideo_webSendCmdNameFunc.ClientCancelInvite,ClientReleaseCall:CRVideo_webSendCmdNameFunc.ClientReleaseCall};CRVideo_GetAllQueueInfo=function(){return CRVideo.queInfo};var CmdI=Ice.Class(SendCmd.Cmd,{sendCmd:function(e,t){var i=JSON.parse(e);console.log("received callback #"+e);var n=i.cmd;i.module;void 0!=n&&(console.log(n),CRVideo_sendCmdName[n](i))},sendBuffer:function(e,t,i){console.log("sendBuffer  received callback #"+e)}}),LoggerI=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.log(e)},logFatal:function(e){console.log(e)},usrReport:function(e){console.log(e)},logDetail:function(e){console.log(e)}});function GetCallServerInfoCallBack(e){console.log("CRVideo.GetCallServerInfoCallBack  result "+JSON.stringify(e)),0==e.RspCode?CRVideo_GetCallServerInfoSuccess.callback(e):CRVideo_GetCallServerInfoFail.callback(e)}CRVideo_SetAdapter=function(){Ice.Promise.try2(function(){CRVideo.Server=SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then(function(e){CRVideo.ic.createObjectAdapter("").then(function(e){var t=e.add(new CmdI,Ice.stringToIdentity("jclient"));console.log("adapter = "+t.ice_getIdentity().category+t.ice_getIdentity().name),CRVideo.proxy.ice_getCachedConnection().setAdapter(e),console.log("adapter getName = "+e.getName()),console.log("SendCmd finidhed ")})})}).exception(function(e){console.log(e.toString()),Ice.Promise.try2(function(){CRVideo.ic&&CRVideo.ic.destroy()}).finally(function(){process.exit(1)})})},CRVideo_LoggerAdapter=function(){Ice.Promise.try2(function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then(function(e){CRVideo.ic.createObjectAdapter("").then(function(e){var t=e.add(new LoggerI,Ice.stringToIdentity("jclient"));console.log("adapter = "+t.ice_getIdentity().category+t.ice_getIdentity().name),CRVideo.logproxy.ice_getCachedConnection().setAdapter(e),console.log("adapter getName = "+e.getName()),console.log("ClientLogServerPrx finidhed ")})})}).exception(function(e){console.log(e.toString()),Ice.Promise.try2(function(){CRVideo.ic&&CRVideo.ic.destroy()}).finally(function(){process.exit(1)})})},CRVideo_SendBufferTest=function(){for(var e={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:"qq",targetUserId:"dd"},t=[],i=0;i<"d".length;i+=2)t.push(parseInt("d".substring(i,i+2),16));t=Uint8Array.from(t),CRVideo.webSendBuffer(e,t),console.log("CRVideo_SendBuffer finished"+JSON.stringify(e))},CRVideo_SendBuffer=function(e,t){for(var i=[],n=0;n<t.length;n+=2)i.push(parseInt(t.substring(n,n+2),16));i=Uint8Array.from(i),CRVideo.webSendBuffer(e,i),console.log("CRVideo_SendBuffer finished"+JSON.stringify(e))},CRVideo.webSendBuffer=function(e,t){Ice.Promise.try2(function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then(function(i){i.sendBuffer(JSON.stringify(e),t).then(function(t){e.cmd;console.log("webSendBuffer result"+t)}).exception(function(e){console.log("ex = "+e),console.log("reason = "+e.reason)})})}).exception(function(e){console.log(e.toString()),Ice.Promise.try(function(){CRVideo.ic&&CRVideo.ic.destroy()}).finally(function(){process.exit(1)})})},CRVideo.webSendcmd=function(e){Ice.Promise.try2(function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then(function(t){t.sendCmd(JSON.stringify(e)).then(function(t){var i=e.cmd,n=(e.module,JSON.parse(t));CRVideo_webSendCmdName[i](n,e)})})}).exception(function(e){console.log(e.toString()),Ice.Promise.try(function(){CRVideo.ic&&CRVideo.ic.destroy()}).finally(function(){process.exit(1)})})},CRVideo.webLogDetail=function(e,t,i){Ice.Promise.try2(function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then(function(n){n.logDetail(e,t,i).then(function(e){console.log("上传日志成功")})})}).exception(function(e){console.log(e.toString()),Ice.Promise.try(function(){CRVideo.ic&&CRVideo.ic.destroy()}).finally(function(){process.exit(1)})})},CRVideo_Login=function(e,t,i,n,r){CRVideo.LoginParam={account:e,psw:t,nick_name:i,user_id:n,cookie:r},CRVideo_GetCallServerInfo(CRVideo.callserverName,e,t),console.log("CRVideo.Login begin")},CRVideo_InitQueueDat=function(){console.log("CRVideo.InitQueueDat begin");var e={cmd:"GetServiceData",module:"Queue",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("initQueueJson =  "+JSON.stringify(e)),console.log("CRVideo.InitQueueDat finished")},CRVideo_GetQueueStatus=function(e){var t={cmd:"GetQueueStatus",module:"Queue",queID:e,sessionID:CRVideo.sessionID};CRVideo.webSendcmd(t)},CRVideo_RefreshAllQueueStatus=function(){console.log("RefreshAllQueueStatus begin");var e=CRVideo.queInfo,t=e.length;console.log("queInfos_length "+t);for(var i=0;i<t;i++){var n=e[i];CRVideo_GetQueueStatus(n.queID)}console.log("RefreshAllQueueStatus finished")},CRVideo_StartQueuing=function(e){console.log("CRVideo_StartQueuing begin");var t={cmd:"UserEnter",module:"Queue",queID:e,sessionID:CRVideo.sessionID,usrExDat:"hahh"};CRVideo.webSendcmd(t),CRVideo.queuingID=e,console.log("CRVideo_StartQueuing finished "+JSON.stringify(t))},CRVideo_StopQueuing=function(){console.log("StopQueuing begin");var e={cmd:"UserLeave",module:"Queue",queID:CRVideo.queuingID,sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("CRVideo StopQueuing finished "+JSON.stringify(e))},CRVideo_StartService=function(e){console.log("CRVideo_StartService begin");var t={cmd:"AgentEnter",module:"Queue",queID:e,sessionID:CRVideo.sessionID};CRVideo.webSendcmd(t),CRVideo.queuingID=e,console.log("CRVideo_StartService finished"+JSON.stringify(t))},CRVideo_StopService=function(e){console.log("StopService begin");var t={cmd:"AgentLeave",module:"Queue",queID:e,sessionID:CRVideo.sessionID};CRVideo.webSendcmd(t),CRVideo.queuingID=e,console.log("StopService finished"+JSON.stringify(t))},CRVideo_SetDNDStatus=function(e){console.log("setSrvDNDState begin");var t={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:e,sessionID:CRVideo.sessionID};CRVideo.webSendcmd(t),console.log("setSrvDNDState finished"+JSON.stringify(t))},CRVideo_StartUserStatusNotify=function(){console.log("StartUserStatusNotify begin");var e={cmd:"StartStatusPush",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("StartUserStatusNotify finished"+JSON.stringify(e))},CRVideo_StopUserStatusNotify=function(){console.log("StopUserStatusNotify begin");var e={cmd:"StopStatusPush",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("StopUserStatusNotify finished"+JSON.stringify(e))},CRVideo_GetUserStatus=function(){console.log("GetUserStatus begin");var e={cmd:"GetUserStatus",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("GetUserStatus finished"+JSON.stringify(e))},CRVideo_ShakeHand=function(){if(0!=CRVideo.LoginFlag)if(CRVideo.HandErrTimes>4)CRVideo.LoginFlag=0,CRVideo.HandErrTimes=0,CRVideo_LineOff.callback("");else{var e={};e=CRVideo.CallID?{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID,callID:CRVideo.CallID,timeStamp:Math.round((new Date).getTime()/1e3)}:{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID,timeStamp:Math.round((new Date).getTime()/1e3)},CRVideo.webSendcmd(e),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}},CRVideo_RejectAssignUser=function(e,t){console.log("CRVideo.RejectAssignUser begin");var i={accept:0,cmd:"AssignResponse",module:"Queue",queID:e,sessionID:CRVideo.sessionID,userID:t};CRVideo.webSendcmd(i),console.log("CRVideo.RejectAssignUser finished"+JSON.stringify(i))},CRVideo_Call=function(e,t){console.log("会议ID值："+t.ID),console.log("会议地址："+t.pubMeetUrl),CRVideo.pubMeetUrl=t.pubMeetUrl,console.log("CRVideo.Call begin");var i={callID:Ice.generateUUID(),called:e,calledOEMKey:"CLOUDROOM",calledType:0,cmd:"ClientCall",meeting:{ID:t.ID,pswd:t.pswd,pubMeetUrl:t.pubMeetUrl,subject:CRVideo.meetSubject},module:"CallServer",sessionID:CRVideo.sessionID,usrExDat:""};CRVideo.webSendcmd(i),console.log("CRVideo.Call finished"+JSON.stringify(i))},CRVideo_ClientReleaseCall=function(e){var t={callID:e,sessionID:CRVideo.sessionID,cmd:"ClientReleaseCall",module:"CallServer"};CRVideo.webSendcmd(t),console.log("CRVideo_ClientReleaseCall"+JSON.stringify(t))},CRVideo_AcceptAssignUser=function(e,t){console.log("CRVideo.AcceptAssignUser begin");var i={accept:1,cmd:"AssignResponse",module:"Queue",queID:e,sessionID:CRVideo.sessionID,userID:t};CRVideo.webSendcmd(i),console.log("CRVideo.AcceptAssignUser finished"+JSON.stringify(i))},CRVideo_AcceptCall=function(e,t){console.log("CRVideo_AcceptCall："+t),CRVideo.pubMeetUrl=t.pubMeetUrl,console.log("会议ID值："+t.ID),console.log("会议地址："+t.pubMeetUrl);var i={callID:e,cmd:"ClientAccept",meeting:t,module:"CallServer",sessionID:CRVideo.sessionID,usrExDat:""};CRVideo.webSendcmd(i),CRVideo.CallID=e,console.log("CRVideo.AcceptCall CRVideo.CallID="+e),console.log("CRVideo.AcceptCall finished"+JSON.stringify(i))},CRVideo_ReqAssignUser=function(){var e={cmd:"RequestUser",module:"Queue",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),console.log("CRVideo.RequestUser finished"+JSON.stringify(e))},CRVideo_CallMoreParty=function(e,t,i,n){var r=Ice.generateUUID(),o={callID:CRVideo.CallID,called:"called",calledOEMKey:"CLOUDROOM",cmd:"ClientInvite",inviteID:CRVideo.inviteID,meeting:t,module:"CallServer",sessionID:CRVideo.sessionID,usrExDat:'{\n    "clientInvite": 1\n}\n'};return CRVideo.webSendcmd(o),r},CRVideo_ClientCancelInvite=function(e,t){var i={cmd:"ClientCancelInvite",inviteID:e,module:"CallServer",reason:"cancel",sessionID:CRVideo.sessionID,usrExDat:""};return CRVideo.webSendcmd(i),e},CRVideo_CreateMeeting=function(e,t,i,n){var r=CRVideo.protocol+"//"+e+"/servlet/ClientCreateNetMeet",o={RequestId:Ice.generateUUID(),UserName:t,UserPswd:i,MeetSubject:encodeURI(n),IsRegular:0,NeedPswd:"0"},s={jsoncallback:"CreateMeetingCallBack",_data_:JSON.stringify(o)};CRVideo.meetSubject=n,$.ajax({url:r,data:s,dataType:"jsonp",success:function(e){}})},CRVideo_GetCallServerInfoSuccess.callback=function(e){console.log("GetCallServerInfoSuccessCallBack："+JSON.stringify(e));var t=e.callSvrList,i=new Array;i=t.split(":");var n=new Array;if(2==i.length){if(n=i[0].split(";"),CRVideo_initIce(n[0],i[1]),e.uploadUrl){var r=e.uploadUrl.split(";")[0]?e.uploadUrl.split(";")[0]:e.uploadUrl.split(";")[1],o=r.split(":")[0],s=parseInt(r.split(":")[1])+1,c=CRVideo.logServer||"Log.ClientLogServer:wss -h "+o+" -p "+s;console.log("logserver: "+c),CRVideo.logproxy=CRVideo.ic.stringToProxy(c),CRVideo_LoggerAdapter();var a="";window.localStorage&&((a=window.localStorage.getItem("logUUID"))||(a=Ice.generateUUID(),window.localStorage.setItem("logUUID",a))),CRVideo.logUUID=a,CRVideo.isPlantForm()&&CRVideo_UploadingReport()}CRVideo_SetAdapter();var l={OEMKey:"CLOUDROOM",SDKVersion:"",cmd:"Login",crAcnt:CRVideo.LoginParam.account,crPswd:CRVideo.LoginParam.psw,deviceType:"",language:"",module:"CallServer",productType:"win32_net",userID:CRVideo.LoginParam.user_id,userName:CRVideo.LoginParam.nick_name};CRVideo.webSendcmd(l),console.log("loginJson =  "+JSON.stringify(l)),console.log("CRVideo.Login finished")}else console.log("获取服务列表失败")},CRVideo_Logout=function(){var e={cmd:"Logout",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.webSendcmd(e),CRVideo.CallID="",CRVideo.HandErrTimes=0,console.log("CRVideo.Logout finished"+JSON.stringify(e))};var CRVideo_GetCallServerInfo=function(e,t,i){var n=CRVideo.protocol+"//"+e+"/servlet/getJsCallServerInfo",r={ClientVer:"",IpAddr:"192.168.199.139",Language:"",MacAddr:"DC-A9-71-9E-EE-3C",MgrSDKVer:"1.4.0 2018-1-15_11:41:09",OEMKey:"CLOUDROOM",PRODUCT:"win32_net",RequestId:Ice.generateUUID(),UserName:t,UserPswd:i};$.ajax({url:n,type:"get",data:r,success:function(e){GetCallServerInfoCallBack(e)}})};function CreateMeetingCallBack(e){var t={ID:e.MeetID,pswd:e.MeetPswd,pubMeetUrl:e.PublicUrl,subject:CRVideo.meetSubject};0==e.RspCode?CRVideo_CreateMeetingSuccess.callback(t,""):CRVideo_CreateMeetingFail.callback(e.RspCode,"")}function EnterMeetingCallBack(e){console.log("EnterMeetingCallBack"),0==e.RspCode?CRVideo.initweb():console.log("入会失败")}CRVideo_EnterMeeting=function(e,t,i,n,r){var o=CRVideo.protocol+"//"+CRVideo.callserverName+"/servlet/joinMeetingAPI";console.log("CRVideo.EnterMeeting  begin： "+e);var s={ClientVer:"",RequestId:Ice.generateUUID(),MeetID:e,UserPswd:t,NickName:encodeURI(n),OEMKey:"CLOUDROOM",PRODUCT:"win32_net",UserType:4};console.log("CRVideo.EnterMeeting  "+JSON.stringify(s));var c={jsoncallback:"EnterMeetingCallBack",_data_:JSON.stringify(s)};$.ajax({url:o,data:c,dataType:"jsonp",success:function(e){}})},CRVideo_ShakeHandRslt.callback=function(e){console.log("CRVideo_ShakeHandRslt callback"+JSON.stringify(e)),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1,console.log("CRVideo_ShakeHandRslt HandErrTimes"+CRVideo.HandErrTimes)},CRVideo_AcceptCallSuccess.callback=function(e,t,i){},CRVideo_AcceptCallFail.callback=function(e,t,i){};var CRVideo_Init2=function(e){return"0"},CRVideo_HungupCall=function(e){console.log("CRVideo_HungupCall:"+e),CRVideo_ClientReleaseCall(e)};CRVideo_ShakeHandRslt.callback=function(e){CRVideo.HandErrTimes=CRVideo.HandErrTimes-1},CRVideo.Container=function(){},CRVideo._containerList=[],CRVideo.Container.prototype.handler=function(e){if(void 0===e)return this._handler;this._handler=e},CRVideo.Container.prototype.__addCallBack=function(){},CRVideo.Container.prototype.id=function(e){if(void 0===e)return this._handler.id;this._handler.id=e},CRVideo.Container.prototype.width=function(e){if(void 0===e)return this._handler.style.width+"px";this._handler.style.width=e+"px"},CRVideo.Container.prototype.height=function(e){if(void 0===e)return this._handler.style.height+"px";this._handler.style.height=e+"px"},CRVideo.Container.prototype.left=function(e){if(void 0===e)return this._handler.style.left+"px";this._handler.style.left=e+"px"},CRVideo.Container.prototype.top=function(e){if(void 0===e)return this._handler.style.top+"px";this._handler.style.top=e+"px"},CRVideo.Container.prototype.shows=function(){if(void 0===value)return this._handler.style.display;this._handler.style.display="block"},CRVideo.Container.prototype.hidden=function(){if(void 0===value)return this._handler.style.display;this._handler.style.display="hidden"},CRVideo.VideoContainer=function(){this._videoID=-1,this._usrID="",this._visibleNickName=!0,CRVideo._containerList.push(this)},CRVideo.VideoContainer.prototype=new CRVideo.Container,CRVideo.VideoContainer.prototype.setVideo=function(e,t){void 0==t&&(t=-1),this._usrID=e,this._videoID=t,this._title=e;for(var i=this._handler.childNodes,n=0;n<i.length;n++)"VIDEO"==i[n].nodeName?i[n].id="video"+e:"DIV"==i[n].nodeName&&(i[n].id="nickname"+e);var r=document.getElementById("video"+e);document.getElementById("nickname"+e).innerHTML=e,e==CRVideo.userinfo.userID?CRVideo.userinfo.stream&&(r.srcObject=CRVideo.userinfo.stream):e==CRVideo.userinfo.userID&&CRVideo.remoteinfo.stream&&(r.srcObject=CRVideo.remoteinfo.stream)},CRVideo.VideoContainer.prototype.getVideoID=function(){return window.videotrack},CRVideo.VideoContainer.prototype.clear=function(){for(var e=this._handler.childNodes,t=0;t<e.length;t++)"VIDEO"==e[t].nodeName&&e[t]},CRVideo.VideoContainer.prototype.setVisibleNickName=function(e){this._visibleNickName=e,this._handler.visibleNickName=e;var t=document.getElementById("nickname"+this._usrID);t.style.display=e?"block":"none"},CRVideo.VideoContainer.prototype.getVisibleNickName=function(){return this._handler.visibleNickName},CRVideo.VideoContainer.prototype.savePic=function(e){return this._handler.savePic(e)},CRVideo.VideoContainer.prototype.isPicEmpty=function(){return!!CRVideo.userinfo.stream},CRVideo.VideoContainer.prototype.keepAspectRatio=function(e){if(void 0===e)return this._handler.keepAspectRatio;this._handler.keepAspectRatio=e},CRVideo.VideoContainer.prototype.visibleNickName=function(e){if(void 0===e)return this._handler.visibleNickName;this._handler.visibleNickName=e},CRVideo_CreatVideoObj=function(){var e,t;(e=document.createElement("div")).style.width="100%",e.style.height="100%",e.className="CRVideo_VideoObj",(t=document.createElement("video")).style.width="100%",t.style.height="100%",t.poster="/webrtc/image/ycBg.jpg",t.autoplay=!0,t.setAttribute("muted",""),t.setAttribute("playsinline","");var i=document.createElement("div");i.style.width="100px",i.style.height="30px",i.style.color="#fff",i.style.position="absolute",i.name="nodename",i.style.display="none",i.style.left="30px",i.style.top="30px",i.style.zIndex="2",i.style.opacity="0.5",i.style.filter="alpha(opacity:50)",i.style.fontWeight="800",e.appendChild(i),e.appendChild(t);var n=new CRVideo.VideoContainer;return n.handler(e),n},CRVideo.LOCAL_KEY,CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION=-1,CRVideo.COUNT_VIDEO_PLAY=1,CRVideo.DOMAIN_MAIN="",CRVideo.isLine=0,CRVideo.roominfo={},CRVideo.userinfo={},CRVideo.remoteinfo={},CRVideo.isMyVideoStream=!1,CRVideo.configuration={iceServers:[{urls:"stun:121.42.156.84:3478"}]},CRVideo.videotrack={},CRVideo.videotrack.id="",CRVideo.getAllMemberInfo=null,CRVideo.maxBps="512",CRVideo.sizeTypeArry=[[0,0,0],[144,80,56],[224,128,72],[288,160,100],[336,192,150],[448,256,200],[512,288,250],[576,320,300],[640,360,350],[720,400,420],[848,480,500],[1024,576,650],[1280,720,1024],[1920,1080,2048]],CRVideo.initweb=function(){CRVideo.callserverName;var e=CRVideo.pubMeetUrl.substr(CRVideo.pubMeetUrl.length-6),t=CRVideo.LoginParam.nick_name;CRVideo.roominfo.roomid=e;var i=window.localStorage.getItem("client_pcid")?window.localStorage.getItem("client_pcid"):Ice.generateUUID();CRVideo.userinfo={nickname:t,userID:CRVideo.LoginParam.user_id,headerUrl:"",userCode:i,openId:""},CRVideo.urlHref=CRVideo.callserverName;var n={LiveCode:e,NickName:t,headerUrl:"",userCode:i,openId:""};window.localStorage.setItem("client_pcid",i),CRVideo.DOMAIN_MAIN=CRVideo.protocol+"//"+CRVideo.urlHref;var r=n||{};r._callback_="CRVideo.initLive",$.ajax({url:CRVideo.DOMAIN_MAIN+"/api/getLiveInfoAPI",type:"get",data:r,dataType:"jsonp",jsonp:"callback",error:function(e,t){},success:function(e){}})},CRVideo.initLive=function(e){CRVideo.LIVE_INFO=e.liveInfo,"https:"==CRVideo.protocol?CR__Init("js",{protocol:"wss",CheckFlash:!1}):CR__Init("js",{protocol:"ws",CheckFlash:!1})},CR_InitRslt.callback=function(e,t){0==e&&(console.log("初始化成功"),CRVideo.loginWebMeeting())},CRVideo.isPlantForm=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),i=null,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){i=e;break}return!i},CRVideo.loginWebMeeting=function(){var e={};e.nickname=CRVideo.userinfo.nickname||"";var t=CRVideo.userinfo.userCode;CRVideo.userinfo.openId&&CRVideo.userinfo.openId;CRVideo.KEEPLIVE_COMMIT=!0,Cr.crmt=null,CR__Login(CRVideo.LIVE_INFO.dataStr,localStorage.getItem(CRVideo.LOCAL_KEY+"_USERID_"+CRVideo.roominfo.roomid),e,t,CRVideo.userinfo.openId)},CR_LoginRslt.callback=function(e,t,i){if(console.log("登录回调 errCode: "+e+" ----errDesc: \n"+t),CRVideo.meetingInfo=i,console.log(CRVideo.meetingInfo),"1"!=e){if("4"==e)console.log("初始化成功，昵称重复");else if("0"==e){console.log("登录成功"),CRVideo.userinfo.detail=i.myDetail,CRVideo.userinfo.termId=i.termId,CRVideo.KEEPALIVE_TIMER=setTimeout(function(){CR__KeepAlive(CRVideo.COUNT_VIDEO_PLAY)},3e4),CRVideo.REFRESH_SESSION=setTimeout(function(){CR__RefreshSession()},15e3),CR__GetActiveMembers();var n=navigator.mediaDevices.enumerateDevices();CRVideo.getDevicesMedia(n);for(var r=i.activeMembers,o=0;o<r.length;o++)r[o].termId!=i.termId&&(CRVideo.remoteinfo.termId=r[o].termId,CRVideo.remoteinfo.nickname=r[o].nickname)}else console.log("初始化失败");CRVideo_EnterMeetingRslt.callback(e)}else console.log("超过并发数")},CR__RefreshSessionRslt.callback=function(e,t){e==CR_NOERR&&-1!=CRVideo.REFRESH_SESSION&&(CRVideo.REFRESH_SESSION=setTimeout(function(){CR__RefreshSession()},15e3))},CR__KeepAliveRslt.callback=function(e,t){e==CR_NOERR&&-1!=CRVideo.KEEPALIVE_TIMER&&(CRVideo.KEEPALIVE_TIMER=setTimeout(function(){CR__KeepAlive(CRVideo.COUNT_VIDEO_PLAY)},3e4))},CR__MeetEnded.callback=function(e){CR__UnInit()};var CRVideo_Uninit=function(){CR__UnInit()};$(function(){var e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,t=e.replace(/hidden/i,"visibilitychange");document.addEventListener(t,function(){document[e]||CRVideo.KEEPLIVE_COMMIT&&-1!=CRVideo.KEEPALIVE_TIMER&&-1!=CRVideo.REFRESH_SESSION&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,CR__KeepAlive(CRVideo.COUNT_VIDEO_PLAY),clearTimeout(CRVideo.REFRESH_SESSION),CRVideo.REFRESH_SESSION=-1,CR__RefreshSession())})}),navigator.mediaDevices.enumerateDevices().then(CRVideo.getDevicesMedia).catch(function(e){console.log("navigator.getUserMedia error: ",e)}),CRVideo.getDevicesMedia=function(e){console.log({"===204==deviceInfos=====: ":e}),CRVideo.audioInput=[],CRVideo.audioOutput=[],CRVideo.videoInput=[];for(var t=0;t<e.length;t++){var i=e[t];if("audioinput"==i.kind&&i.deviceId.length>20){var n={};n.id=i.deviceId,n.name=i.label,CRVideo.audioInput.push(n)}else if("audiooutput"==i.kind&&i.deviceId.length>20){var r={};r.id=i.deviceId,r.name=i.label,CRVideo.audioOutput.push(r)}else if("videoinput"==i.kind&&i.deviceId.length>20){var o={};o.id=i.deviceId,o.name=i.label,CRVideo.videoInput.push(o)}}};var CRVideo_GetAudioMicNames=function(){return CRVideo.audioInput},CRVideo_GetAudioSpkNames=function(){return CRVideo.audioOutput},CRVideo_GetAllVideoInfo=function(){return CRVideo.videoInput},CRVideo_OpenMic=function(e){var t=document.createElement("audio");t.autoplay=!0,t.style.display="none",t.id="mainAudio",document.body.appendChild(t),window.audioConstraints={video:!1,audio:!0},openAndChangeAudioDevices(window.audioConstraints)},CRVideo_CloseMic=function(e){window.audioStream&&window.audioStream.getTracks().forEach(function(e){e.stop()}),CR__CloseMicEx(CRVideo.userinfo.termId)},CRVideo_OpenVideo=function(e){CRVideo.isPlantForm()?CRVideo.videotrack&&CRVideo.videotrack.id&&""!=CRVideo.videotrack.id?window.videoConstraints={video:{width:{exact:640},aspectRatio:{exact:16/9},deviceId:{exact:CRVideo.videotrack.id}},audio:!1}:window.videoConstraints={video:{width:{exact:640},aspectRatio:{exact:16/9}},audio:!1}:window.videoConstraints={video:{facingMode:"user"},audio:!1},CRVideo.maxBps="350",openAndChangeVideoDevices(window.videoConstraints)},CRVideo_CloseVideo=function(){window.videoStream&&window.videoStream.getTracks().forEach(function(e){e.stop()}),CR__StopVideo()},CRVideo_UpdateVideoRate=function(){window.videoStream&&window.videoStream.getTracks().forEach(function(e){e.stop()}),CR__StopVideo(),window.videotrack&&window.videotrack.stop(),window.myVideoConnection&&(window.myVideoConnection.close(),window.myVideoConnection=null),window.localVideoOffer="",window.myvideo_cb=null},setupVideoPeerConnection=function(e){window.myVideoConnection=new RTCPeerConnection(CRVideo.configuration),window.myVideoConnection.addStream(e),window.myVideoConnection.createOffer(function(e){CRVideo.maxBps=CRVideo.maxBps?CRVideo.maxBps:"512",console.log("c=IN IP4 0.0.0.0\r\nb=AS:"+CRVideo.maxBps),e.sdp=e.sdp.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:"+CRVideo.maxBps),window.localVideoOffer=e,window.myVideoConnection.setLocalDescription(e)},function(e){alert("An error has occurred.")}),window.myVideoConnection.onaddstream=function(e){};var t=[],i=0;window.myVideoConnection.onicecandidate=function(e){if(e.candidate&&!i){var n=e.candidate.candidate.split(" ")[4],r=e.candidate.candidate.split(" ")[1];if(n&&"1"==r&&n.length<=15&&!n.match("10\\.")&&!n.match("172\\.")&&!n.match("192\\.")&&!n.match("169\\.254\\.")){t.push(e.candidate),console.log("ICE GATHERING NOT COMPLETED, BUT HAVE NOT NAT IP ADDRESS!"),CRVideo.myVideoMsid=0,t=JSON.stringify(t),console.log("myVideoConnection--candidates:"+t);var o=new Ice.HashMap;o.set("sdp",window.localVideoOffer.sdp),o.set("icecandidate",t),window.myvideo_cb.ice_response(CRVideo.myVideoMsid,o),i=1}}}},setupAudioPeerConnection=function(e){window.myAudioConnection=new RTCPeerConnection(CRVideo.configuration),window.myAudioConnection.addStream(e),window.myAudioConnection.createOffer(function(e){window.localAudioOffer=e,window.myAudioConnection.setLocalDescription(e)},function(e){alert("An error has occurred.")}),window.myAudioConnection.onaddstream=function(e){document.getElementById("mainAudio").srcObject=e.stream};var t=[],i=0;window.myAudioConnection.onicecandidate=function(e){if(e.candidate&&!i){var n=e.candidate.candidate.split(" ")[4],r=e.candidate.candidate.split(" ")[1];if(n&&"1"==r&&n.length<=15&&!n.match("10\\.")&&!n.match("172\\.")&&!n.match("192\\.")&&!n.match("169\\.254\\.")){t.push(e.candidate),console.log("ICE GATHERING NOT COMPLETED, BUT HAVE NOT NAT IP ADDRESS!"),CRVideo.myAudioMsid=2,t=JSON.stringify(t),console.log("myAudioConnection--candidates:"+t);var o=new Ice.HashMap;o.set("sdp",window.localAudioOffer.sdp),o.set("icecandidate",t),window.myaudio_cb.ice_response(CRVideo.myAudioMsid,o),i=1}}}};function initRemotVideo(){window.pcVideoRemote=new RTCPeerConnection(CRVideo.configuration);window.pcVideoRemote.createOffer(function(e){e.sdp=e.sdp.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:512"),window.remoteVideoOffer=e,window.pcVideoRemote.setLocalDescription(e)},function(e){console.log("An error has occurred.")},{offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1}),window.pcVideoRemote.onaddstream=function(e){CRVideo.remoteinfo.stream=e.stream,console.log("mainVideo："+e.stream),document.getElementById("video"+CRVideo.remoteinfo.userID)&&(document.getElementById("video"+CRVideo.remoteinfo.userID).srcObject=e.stream)};var e=[],t=0;window.pcVideoRemote.onicecandidate=function(i){if(i.candidate&&!t){var n=i.candidate.candidate.split(" ")[4],r=i.candidate.candidate.split(" ")[1];if(n&&"1"==r&&n.length<=15&&!n.match("10\\.")&&!n.match("172\\.")&&!n.match("192\\.")&&!n.match("169\\.254\\.")){e.push(i.candidate),console.log("ICE GATHERING NOT COMPLETED, BUT HAVE NOT NAT IP ADDRESS!"),CRVideo.remoteVideoMsid=1,e=JSON.stringify(e),console.log("pcVideoRemote--candidates："+e);var o=new Ice.HashMap;o.set("sdp",window.remoteVideoOffer.sdp),o.set("icecandidate",e),window.remotevideo_cb.ice_response(CRVideo.remoteVideoMsid,o),t=1}}}}function initRemotAudio(){window.pcAudioRemote=new RTCPeerConnection(CRVideo.configuration),window.pcAudioRemote.createOffer(function(e){window.remoteAudioOffer=e,window.pcAudioRemote.setLocalDescription(e)},function(e){console.log("An error has occurred.")}),window.pcAudioRemote.onaddstream=function(e){console.log("mainAudio："+e.stream),document.getElementById("mainAudio").srcObject=e.stream};var e=[],t=0;window.pcAudioRemote.onicecandidate=function(i){if(i.candidate&&!t){var n=i.candidate.candidate.split(" ")[4],r=i.candidate.candidate.split(" ")[1];if(n&&"1"==r&&n.length<=15&&!n.match("10\\.")&&!n.match("172\\.")&&!n.match("192\\.")&&!n.match("169\\.254\\.")){e.push(i.candidate),console.log("ICE GATHERING NOT COMPLETED, BUT HAVE NOT NAT IP ADDRESS!"),CRVideo.remoteAudioMsid=3,e=JSON.stringify(e),console.log("pcVideoRemote--candidates："+e);var o=new Ice.HashMap;o.set("sdp",window.remoteAudioOffer.sdp),o.set("icecandidate",e),window.remoteaudio_cb.ice_response(CRVideo.remoteAudioMsid,o),t=1}}}}function getCamereInfo(){console.log("CR__UpdateAllCameraInfos---1;WebCam;0;0\n"),CR__UpdateAllCameraInfos("1;WebCam;0;0\n"),CR__SetOpenedCameraNumber([1,1])}function openAndChangeVideoDevices(e){window.videoStream&&CRVideo_UpdateVideoRate(),navigator.mediaDevices.getUserMedia(e).then(function(e){return console.log("myVideostream--:",e),document.getElementById("video"+CRVideo.userinfo.userID)&&(document.getElementById("video"+CRVideo.userinfo.userID).srcObject=e),CR__SetVideoDeviceStatus(!0),window.videoStream=e,CRVideo.userinfo.stream=e,window.videotrack=e.getVideoTracks()[0],CRVideo.isPlantForm()&&(window.capabilities=e.getVideoTracks()[0].getCapabilities()),CRVideo.isMyVideoStream=!0,window.myVideoName=CRVideo.meetingInfo.myDetail.nickname,e.oninactive=function(){console.log("Stream inactive")},getCamereInfo(),console.log("CRVideo_OpenVideo",window.videotrack),navigator.mediaDevices.enumerateDevices()}).then(function(e){console.log("===deviceInfos===: ",e),CRVideo.getDevicesMedia(e)}).catch(function(e){CRVideo.videotrack&&CRVideo.videotrack.id&&""!=CRVideo.videotrack.id?window.videoConstraints={video:{width:{exact:640},aspectRatio:{exact:16/9},frameRate:{ideal:20,max:20},deviceId:{exact:CRVideo.videotrack.id}},audio:!1}:window.videoConstraints={video:{width:{exact:640},aspectRatio:{exact:16/9},frameRate:{ideal:20,max:20}},audio:!1},console.log(window.videoConstraints),CRVideo.maxBps="350",CRVideo_SetDefaultVideo(CRVideo.userinfo.userID,CRVideo.videotrack.id)})}function openAndChangeAudioDevices(e){navigator.mediaDevices.getUserMedia(e).then(function(e){console.log("localAudio--："+e),CR__SetAudioDeviceStatus(!0),window.audiotrack=e.getAudioTracks()[0];var t=window.audiotrack.getConstraints();console.log("Result constraints: "+JSON.stringify(t)),$("#mic_select").val(window.audiotrack.label),console.log("Using audio device: "+window.audiotrack.label),e.oninactive=function(){console.log("Stream inactive")},window.audioStream=e;var i={name:window.audiotrack.label,id:window.audiotrack.deviceId};return CRVideo.audioInput.push(i),navigator.mediaDevices.enumerateDevices()}).then(function(e){console.log(e),CRVideo.getDevicesMedia(e)}).catch(function(e){CR__SetAudioDeviceStatus(!1),console.log(e),"OverconstrainedError"==e.name?alert("当前设备不支持"+e.constraint):"AbortError"==e.name?alert("硬件异常"):"NotAllowedError"==e.name?alert("拒绝错误"):"NotFoundError"==e.name?alert("找不到满足请求参数的媒体类型"):"NotReadableError"==e.name?alert("无法读取硬件"):"SecurityError"==e.name?alert("安全错误"):"TypeError"==e.name&&alert("对象未设置")})}function CRVideo_GetMemberInfo(e){return e==CRVideo.remoteinfo.userID?CRVideo.remoteinfo.userID:CRVideo.userinfo.userID}function CRVideo_GetAllMembers(){var e=[];return e.push(CRVideo.userinfo),e.push(CRVideo.remoteinfo),e}function CRVideo_SetVideoCfg(e){var t=e.sizeType?e.sizeType:8,i=e.fps?e.fps:15;if(CRVideo.isMyVideoStream&&window.capabilities.width&&(window.capabilities.width.max<CRVideo.sizeTypeArry[t][0]||window.capabilities.height.max<CRVideo.sizeTypeArry[t][1]))alert("此设备不支持");else{CRVideo.videotrack&&CRVideo.videotrack.id&&""!=CRVideo.videotrack.id?window.videoConstraints={video:{width:{exact:CRVideo.sizeTypeArry[t][0]},aspectRatio:{exact:16/9},frameRate:{ideal:i,max:20},deviceId:{exact:CRVideo.videotrack.id}},audio:!1}:window.videoConstraints={video:{width:{exact:CRVideo.sizeTypeArry[t][0]},aspectRatio:{exact:16/9},frameRate:{ideal:i,max:20}},audio:!1},window.videoStream&&window.videoStream.getTracks().forEach(function(e){e.stop()}),e.maxbps=1e3==e.maxbps?1024:e.maxbps,e.maxbps=2e3==e.maxbps?2048:e.maxbps,CRVideo.maxBps=e.maxbps?e.maxbps:"512",openAndChangeVideoDevices(window.videoConstraints);var n=navigator.mediaDevices.getSupportedConstraints();console.log(n)}}function CRVideo_SetDefaultVideo(e,t){for(var i=0;i<CRVideo.videoInput.length;i++)t==CRVideo.videoInput[i].id&&(CRVideo.videoInput[i].id,CRVideo.videotrack=CRVideo.videoInput[i],console.log(CRVideo.videoInput[i]));CRVideo.videotrack&&CRVideo.videotrack.id&&""!=CRVideo.videotrack.id?window.videoConstraints={video:{width:{exact:CRVideo.sizeTypeArry[8][0]},height:{exact:CRVideo.sizeTypeArry[8][1]},aspectRatio:{exact:16/9},frameRate:{ideal:30,max:20},deviceId:{exact:CRVideo.videotrack.id}},audio:!1}:window.videoConstraints={video:{width:{exact:CRVideo.sizeTypeArry[8][0]},height:{exact:CRVideo.sizeTypeArry[8][1]},aspectRatio:{exact:16/9},frameRate:{ideal:30,max:20}},audio:!1},window.videoStream&&window.videoStream.getTracks().forEach(function(e){e.stop()}),CRVideo.maxBps="350",openAndChangeVideoDevices(window.videoConstraints)}CR__SetVideoDeviceStatusRslt.callback=function(e,t){e=0==e?"成功":"失败",console.log("CR__SetVideoDeviceStatusRslt----"+e)},CR__SetAudioDeviceStatusRslt.callback=function(e,t){"0"==e&&CR__AskForMic(),e=0==e?"成功":"失败",console.log("CR__SetAudioDeviceStatusRslt---"+e)},CR__SubscribeFocusWindow2Rslt.callback=function(e,t){e=0==e?"成功":"失败",console.log("CR__SubscribeFocusWindow2Rslt"+t)},CR__VideoAllocRawExt2.callback=function(e,t,i,n){i?(window.myvideo_cb=e,window.videoStream&&setupVideoPeerConnection(window.videoStream)):(window.remotevideo_cb=e,initRemotVideo())},CR__AudioAllocRawExt2.callback=function(e,t,i){console.log(t),t.shareListen?(window.remoteaudio_cb=e,initRemotAudio()):(window.myaudio_cb=e,setupAudioPeerConnection(window.audioStream))},CR__ModifyPeerAddrExt.callback=function(e,t){console.log("CR__ModifyPeerAddrExt: "+e+" "+t.get("sdp"));var i={type:"answer",sdp:t.get("sdp")};0==e?window.localSdp=i:1==e?(i.sdp=i.sdp.replace("a=sendrecv","a=sendonly"),window.pcVideoRemote.setRemoteDescription(new RTCSessionDescription(i)).then(function(){console.log("set remote video answer ok")},function(e){console.log("set remote video answer desc fail"+e)})):2==e?window.myAudioConnection.setRemoteDescription(new RTCSessionDescription(i)):3==e&&window.pcAudioRemote.setRemoteDescription(new RTCSessionDescription(i)).then(function(){console.log("set remote audio answer ok")},function(e){console.log("set remote audio answer desc fail"+e)})},CR__UpdateAllCameraInfosRslt.callback=function(e,t){e=0==e?"成功":"失败",console.log("CR__UpdateAllCameraInfos："+e)},CR__SetOpenedCameraNumberRslt.callback=function(e,t){e=0==e?"成功":"失败",console.log("CR__SetOpenedCameraNumberRslt："+e),CR__StartVideo()},CR__StartVideoRslt.callback=function(e,t){e=0==e?"成功":"失败",console.log("CR__StartVideoRslt："+e)},CR__DisableSendVideo2Internet.callback=function(e){console.log("CR__DisableSendVideo2Internet："+e)},CR__EnableSendVideo2Internet.callback=function(e){console.log("CR__EnableSendVideo2Internet："+e+" "+window.localSdp),window.myVideoConnection.setRemoteDescription(new RTCSessionDescription(window.localSdp))},CR__NotifySetOpenedCameraNumber.callback=function(e,t){console.log("CR__NotifySetOpenedCameraNumber："+e+" "+t),CRVideo.userinfo.termId!=e&&CR__BatchSubscribeVideo2(e,t[0],2)},CR__BatchSubscribeVideo2Rslt.callback=function(e,t){console.log(e)},CRVideo_UserEnter.callback=function(e){console.log(e);e.termId!=CRVideo.userinfo.termId&&(CRVideo.remoteinfo.nickname=e.nickname,CRVideo.remoteinfo.termId=e.termId),CRVideo_UserEnterMeeting.callback(e.nickname)},CR__UserLeftMeet.callback=function(e,t){var i="";e==CRVideo.userinfo.termId?i=CRVideo.userinfo.nickname:e==CRVideo.remoteinfo.termId&&(i=CRVideo.remoteinfo.nickname),CRVideo_UserLeftMeeting.callback(i),console.log(i+"离线，离线原因："+t)},CRVideo_ExitMeeting=function(){CR__StopVideo(),CR__CloseMicEx(CRVideo.userinfo.termId),window.videotrack&&window.videotrack.stop(),window.audiotrack&&window.audiotrack.stop(),window.myVideoConnection&&(window.myVideoConnection.close(),window.myVideoConnection=null),window.audioStream="",window.videoStream="",window.myVideoName="",window.pcVideoRemote&&(window.pcVideoRemote.close(),window.pcVideoRemote=null),window.localVideoOffer="",window.myAudioConnection&&(window.myAudioConnection.close(),window.myAudioConnection=null),window.localAudioOffer="",window.pcAudioRemote&&(window.pcAudioRemote.close(),window.pcAudioRemote=null),window.remoteAudioOffer=null,window.remoteaudio_cb=null,window.myvideo_cb=null,window.remoteaudio_cb=null,window.myaudio_cb=null,clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION),CRVideo.REFRESH_SESSION=-1,$("video").remove(),$("audio").remove(),$(".CRVideo_VideoObj").remove(),CR__Exit("退出会议")},CR__ExitRslt.callback=function(e,t){console.log("CR__ExitRslt："+e),CR__UnInit()},CR__Free.callback=function(e){console.log({"===msid===":e}),e==CRVideo.myAudioMsid||e==CRVideo.remoteAudioMsid||(e==CRVideo.myVideoMsid?document.getElementById("video"+CRVideo.userinfo.userID).src="":e==CRVideo.remoteVideoMsid&&(document.getElementById("video"+CRVideo.remoteinfo.userID).src=""))},CR__AskForMicRslt.callback=function(e,t){console.log("CR__AskForMicRslt："+e),CR__OpenMicEx(CRVideo.userinfo.termId)},CR__StopVideoRslt.callback=function(e,t){console.log("CR__StopVideoRslt："+e)},CR__CloseMicExRslt.callback=function(e,t){console.log("CR__CloseMicExRslt："+e)},CR__GetActiveMembersRslt.callback=function(e,t,i){if(console.log("CR__GetActiveMembersRsltdata："+i),0==e)for(var n=0;n<i.length;n++)void 0!=i[n].openedCamIDs&&i[n].termId!=CRVideo.userinfo.termId&&CR__BatchSubscribeVideo2(i[n].termId,i[n].openedCamIDs,2),i[n].termId!=CRVideo.userinfo.termId?(CRVideo.remoteinfo.termId=i[n].termId,CRVideo.remoteinfo.nickname=i[n].nickname,CRVideo.remoteinfo.audioStatus=i[n].audioStatus,CRVideo.remoteinfo.videoStatus=i[n].videoStatus):(CRVideo.userinfo.audioStatus=i[n].audioStatus,CRVideo.userinfo.videoStatus=i[n].videoStatus)};var CRVideo_SetAudioCfg=function(e){var t,i;console.log(e);for(var n=document.getElementById("mainAudio"),r=0;r<CRVideo.audioInput.length;r++)e.micName==CRVideo.audioInput[r].name&&(t=CRVideo.audioInput[r].id);for(r=0;r<CRVideo.audioOutput.length;r++)e.speakerName==CRVideo.audioOutput[r].name&&(i=CRVideo.audioOutput[r].id);window.audioConstraints={video:!1,audio:{deviceId:t?{exact:t}:void 0}},window.audioStream&&window.audioStream.getTracks().forEach(function(e){e.stop()}),openAndChangeAudioDevices(window.audioConstraints),n.setSinkId(i).then(function(){console.log("Success, audio output device attached: "+i)}).catch(function(e){var t=e;"SecurityError"===e.name&&(t="You need to use HTTPS for selecting audio output device: "+e),console.error(t)})};function CRVideo_GetVideoStatus(e){var t=0;if(window.videoStream){var i=window.videoStream.getVideoTracks()[0].readyState;console.log(i),t="live"==i?1:"ended"==i?2:0}else t=0;return t}function CRVideo_GetAudioStatus(e){var t=0;if(window.audioStream){var i=window.audioStream.getAudioTracks()[0].readyState;console.log(i),t="live"==i?1:"ended"==i?2:0}else t=0;return t}function CRVideo_GetMemberNickName(e){return e==CRVideo.userinfo.userID?CRVideo.userinfo.nickname:e==CRVideo.remoteinfo.userID?CRVideo.userinfo.nickname:void 0}function CRVideo_IsUserInMeeting(e){return e==CRVideo.remoteinfo.userID||e==CRVideo.userinfo.userID}function CRVideo_GetDefaultVideo(e){return 1}CR__NotifySvrRecordStateChanged.callback=function(e,t,i,n){console.log("CR__NotifySvrRecordStateChanged")},CR__NotifySvrRecordCfgChanged.callback=function(e,t,i){console.log("CR__NotifySvrRecordCfgChanged")},CR__StartSvrRecordRslt.callback=function(e,t){console.log("CR__StartSvrRecordRslt",e)},CR__UpdateSvrRecCfgRslt.callback=function(e,t){console.log("CR__UpdateSvrRecCfgRslt",e)},CR__StopSvrRecordRslt.callback=function(e,t){console.log("CR__StopSvrRecordRslt",e)};var CRVideo_StartSvrRecording=function(e,t){var i={};i.fileName=e.filePathName,i.dstResolutionWidth=e.recordWidth,i.dstResolutionHeight=e.recordHeight,i.fps=e.frameRate,i.maxBPS=e.bitRate,i.qp=e.defaultQP,i.isUploadOnRecording=!0,i.serverPathFileName=e.serverPathFileName,t.forEach(function(e){if(4==e.type&&(e.param={},e.param.bgcolor=null,e.param.prefixtext=null,e.param.resourceid="7865e862-67ef-4ae6-b6d8-1286220c03ab",e.param.textcolor=null),0==e.type){var t=e.param.camid,i=CRVideo.userinfo.userID,n=CRVideo.remoteinfo.userID;t.indexOf(i)>-1?(e.param={},e.param.camId=+t.substr(i.length+1),e.param.termId=CRVideo.userinfo.termId):t.indexOf(n)>-1&&(e.param={},e.param.camId=+t.substr(n.length+1),e.param.termId=CRVideo.remoteinfo.termId)}});var n={clientType:1};n.contents=t,n.recCfg=i,CRVideo.svr_recJsonCfg=n,CR__StartSvrRecord(JSON.stringify(n))},CRVideo_StopRecord=function(){CR__StopSvrRecord()},CRVideo_UpdateSvrRecordContents=function(e){e.forEach(function(e){if(4==e.type&&(e.param={},e.param.bgcolor=null,e.param.prefixtext=null,e.param.resourceid="7865e862-67ef-4ae6-b6d8-1286220c03ab",e.param.textcolor=null),0==e.type){var t=e.param.camid,i=CRVideo.userinfo.userID,n=CRVideo.remoteinfo.userID;t.indexOf(i)>-1?(e.param={},e.param.camId=+t.substr(i.length+1),e.param.termId=CRVideo.userinfo.termId):t.indexOf(n)>-1&&(e.param={},e.param.camId=+t.substr(n.length+1),e.param.termId=CRVideo.remoteinfo.termId)}});var t=CRVideo.svr_recJsonCfg;t.contents=e,CR__UpdateSvrRecCfg(JSON.stringify(t))};function sdkDebug(){var e=this;e.num=0,e.logFilename="sdkDebug.log",e.output="",this.getLog=function(){return e.output},this.clear=function(){e.output=""},this.downloadLog=function(){var t="data:text/plain;charset=utf-8,",i=e.getLog();t+=encodeURIComponent(i);var n=document.createElement("a");n.href=t,n.target="_blank",n.download=e.logFilename,document.body.appendChild(n),n.click(),n.remove()},this.log=function(t,i,n){var r="";i=i||"INF",n=n||"--";if(null!=t)if("object"==typeof object)var o=JSON.stringify(t);else o=t;var s=new Date;r+=e.formatTimestamp(s),r+="["+i+"] ",r+="["+n+":"+e.num+"] ",r+=o,e.output+=r+"\n",e.num++,256==e.num&&(e.num=0),(e.output.length/1024).toFixed(2)>500&&(alert("日志大于1M,请查后台日志是否大于1M"),CRVideo_UploadingLog())},this.formatTimestamp=function(e){var t=e.getFullYear(),i=e.getDate();return"["+t+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+i+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"] "}}CRVideo.isUploadLog=1,CRVideo.logAry=[],CRVideo.browserInfo="",console.oldLog=console.log;var sdkLog=new sdkDebug;function getBrowser(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(t.indexOf("liebao")>0)return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(t.indexOf("chrome")>0||t.indexOf("crios")>0)return e+"_chrome";if(t.indexOf("safari")>0)return e+"_safari"}else{var i=navigator.userAgent,n=i.indexOf("Opera")>-1,r=i.indexOf("compatible")>-1&&i.indexOf("MSIE")>-1&&!n,o=i.indexOf("Firefox")>-1,s=i.indexOf("Safari")>-1,c=i.indexOf("Chrome")>-1;if(o)return"PC_FF";if(n)return"PC_Opera";if(c){return function(e,t){var i=navigator.mimeTypes;for(var n in i)if(i[n][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(s)return"PC_Safari";if(r)return"IE"}}console.log=function(e,t,i){console.oldLog(e),sdkLog.log(e,t,i)},CRVideo.browserInfo=getBrowser(),console.log("浏览器信息"+CRVideo.browserInfo),CRVideo_EnableLog2File=function(e){CRVideo.isUploadLog=e},CRVideo_StartLogReport=function(e,t){CRVideo.isUploadLog=1,CRVideo.logServer=t,CRVideo_UploadingReport()},CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},CRVideo_UploadingReport=function(e){setTimeout(function(){CRVideo_UploadingLog(e),CRVideo_UploadingReport()},12e4)},CRVideo_UploadingLog=function(e,t){var i=sdkLog.getLog();if(t&&(i+=t.type+":"+t.info),sdkLog.clear(),0!=CRVideo.isUploadLog){var n=new Date,r=n.getMonth()+1;r=r<10?"0"+r:r;var o=n.getDate();o=o<10?"0"+o:o;var s=CRVideo.LoginParam.user_id,c=s;s.length>4&&(c=s.slice(-4)),e&&(c=e);var a=CRVideo.LoginParam.account+"/"+c+"/"+CRVideo.LoginParam.user_id+"_"+CRVideo.logUUID+"_webrtc_"+CRVideo.browserInfo+"_"+r+o+".log",l=new TextEncoder("utf-8").encode(i),d=new Zlib.Deflate(l).compress();CRVideo.webLogDetail(0,a,d)}},window.onerror=function(e,t,i,n,r){var o="\n出错的文件："+t;o+="\n出错的代码行号："+i,o+="\n错误的详细信息："+r,CRVideo_UploadingLog("",{type:"Error",info:o})},function(){"use strict";function e(e){throw e}var t=void 0,i=!0,n=this;function r(e,i){var r,o=e.split("."),s=n;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(r=o.shift());)o.length||i===t?s=s[r]?s[r]:s[r]={}:s[r]=i}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function s(t,i){this.index="number"==typeof i?i:0,this.i=0,this.buffer=t instanceof(o?Uint8Array:Array)?t:new(o?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}s.prototype.f=function(){var e,t=this.buffer,i=t.length,n=new(o?Uint8Array:Array)(i<<1);if(o)n.set(t);else for(e=0;e<i;++e)n[e]=t[e];return this.buffer=n},s.prototype.d=function(e,t,i){var n,r=this.buffer,o=this.index,s=this.i,c=r[o];if(i&&1<t&&(e=8<t?(h[255&e]<<24|h[e>>>8&255]<<16|h[e>>>16&255]<<8|h[e>>>24&255])>>32-t:h[e]>>8-t),8>t+s)c=c<<t|e,s+=t;else for(n=0;n<t;++n)c=c<<1|e>>t-n-1&1,8==++s&&(s=0,r[o++]=h[c],c=0,o===r.length&&(r=this.f()));r[o]=c,this.buffer=r,this.i=s,this.index=o},s.prototype.finish=function(){var e,t=this.buffer,i=this.index;return 0<this.i&&(t[i]<<=8-this.i,t[i]=h[t[i]],i++),o?e=t.subarray(0,i):(t.length=i,e=t),e};var c,a=new(o?Uint8Array:Array)(256);for(c=0;256>c;++c){for(var l=u=c,d=7,u=u>>>1;u;u>>>=1)l<<=1,l|=1&u,--d;a[c]=(l<<d&255)>>>0}var h=a;function p(e){this.buffer=new(o?Uint16Array:Array)(2*e),this.length=0}function f(e){var t,i,n,r,s,c,a,l,d,u,h=e.length,p=0,f=Number.POSITIVE_INFINITY;for(l=0;l<h;++l)e[l]>p&&(p=e[l]),e[l]<f&&(f=e[l]);for(t=1<<p,i=new(o?Uint32Array:Array)(t),n=1,r=0,s=2;n<=p;){for(l=0;l<h;++l)if(e[l]===n){for(c=0,a=r,d=0;d<n;++d)c=c<<1|1&a,a>>=1;for(u=n<<16|l,d=c;d<t;d+=s)i[d]=u;++r}++n,r<<=1,s<<=1}return[i,p,f]}function _(e,t){this.h=m,this.w=0,this.input=o&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=o&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(o?Uint8Array:Array)(32768))}p.prototype.getParent=function(e){return 2*((e-2)/4|0)},p.prototype.push=function(e,t){var i,n,r,o=this.buffer;for(i=this.length,o[this.length++]=t,o[this.length++]=e;0<i&&(n=this.getParent(i),o[i]>o[n]);)r=o[i],o[i]=o[n],o[n]=r,r=o[i+1],o[i+1]=o[n+1],o[n+1]=r,i=n;return this.length},p.prototype.pop=function(){var e,t,i,n,r,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],r=0;!((n=2*r+2)>=this.length)&&(n+2<this.length&&o[n+2]>o[n]&&(n+=2),o[n]>o[r]);)i=o[r],o[r]=o[n],o[n]=i,i=o[r+1],o[r+1]=o[n+1],o[n+1]=i,r=n;return{index:e,value:t,length:this.length}};var C,m=2,g={NONE:0,r:1,k:m,N:3},y=[];for(C=0;288>C;C++)switch(i){case 143>=C:y.push([C+48,8]);break;case 255>=C:y.push([C-144+400,9]);break;case 279>=C:y.push([C-256+0,7]);break;case 287>=C:y.push([C-280+192,8]);break;default:e("invalid literal: "+C)}_.prototype.j=function(){var n,r,c,a,l=this.input;switch(this.h){case 0:for(c=0,a=l.length;c<a;){var d,u,h,p=r=o?l.subarray(c,c+65535):l.slice(c,c+65535),f=(c+=r.length)===a,_=t,C=t,g=this.a,v=this.b;if(o){for(g=new Uint8Array(this.a.buffer);g.length<=v+p.length+5;)g=new Uint8Array(g.length<<1);g.set(this.a)}if(d=f?1:0,g[v++]=0|d,h=65536+~(u=p.length)&65535,g[v++]=255&u,g[v++]=u>>>8&255,g[v++]=255&h,g[v++]=h>>>8&255,o)g.set(p,v),v+=p.length,g=g.subarray(0,v);else{for(_=0,C=p.length;_<C;++_)g[v++]=p[_];g.length=v}this.b=v,this.a=g}break;case 1:var I=new s(o?new Uint8Array(this.a.buffer):this.a,this.b);I.d(1,1,i),I.d(1,2,i);var R,b,x,P=S(this,l);for(R=0,b=P.length;R<b;R++)if(x=P[R],s.prototype.d.apply(I,y[x]),256<x)I.d(P[++R],P[++R],i),I.d(P[++R],5),I.d(P[++R],P[++R],i);else if(256===x)break;this.a=I.finish(),this.b=this.a.length;break;case m:var O,T,A,M,k,N,D,V,L,U,F,j,B,H,q,z=new s(o?new Uint8Array(this.a.buffer):this.a,this.b),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(19);for(O=m,z.d(1,1,i),z.d(O,2,i),T=S(this,l),D=w(N=E(this.L,15)),L=w(V=E(this.K,7)),A=286;257<A&&0===N[A-1];A--);for(M=30;1<M&&0===V[M-1];M--);var Q,X,K,Y,J,Z,$=A,ee=M,te=new(o?Uint32Array:Array)($+ee),ie=new(o?Uint32Array:Array)(316),ne=new(o?Uint8Array:Array)(19);for(Q=X=0;Q<$;Q++)te[X++]=N[Q];for(Q=0;Q<ee;Q++)te[X++]=V[Q];if(!o)for(Q=0,Y=ne.length;Q<Y;++Q)ne[Q]=0;for(Q=J=0,Y=te.length;Q<Y;Q+=X){for(X=1;Q+X<Y&&te[Q+X]===te[Q];++X);if(K=X,0===te[Q])if(3>K)for(;0<K--;)ie[J++]=0,ne[0]++;else for(;0<K;)(Z=138>K?K:138)>K-3&&Z<K&&(Z=K-3),10>=Z?(ie[J++]=17,ie[J++]=Z-3,ne[17]++):(ie[J++]=18,ie[J++]=Z-11,ne[18]++),K-=Z;else if(ie[J++]=te[Q],ne[te[Q]]++,3>--K)for(;0<K--;)ie[J++]=te[Q],ne[te[Q]]++;else for(;0<K;)(Z=6>K?K:6)>K-3&&Z<K&&(Z=K-3),ie[J++]=16,ie[J++]=Z-3,ne[16]++,K-=Z}for(n=o?ie.subarray(0,J):ie.slice(0,J),U=E(ne,7),H=0;19>H;H++)G[H]=U[W[H]];for(k=19;4<k&&0===G[k-1];k--);for(F=w(U),z.d(A-257,5,i),z.d(M-1,5,i),z.d(k-4,4,i),H=0;H<k;H++)z.d(G[H],3,i);for(H=0,q=n.length;H<q;H++)if(j=n[H],z.d(F[j],U[j],i),16<=j){switch(H++,j){case 16:B=2;break;case 17:B=3;break;case 18:B=7;break;default:e("invalid code: "+j)}z.d(n[H],B,i)}var re,oe,se,ce,ae,le,de,ue,he=[D,N],pe=[L,V];for(ae=he[0],le=he[1],de=pe[0],ue=pe[1],re=0,oe=T.length;re<oe;++re)if(se=T[re],z.d(ae[se],le[se],i),256<se)z.d(T[++re],T[++re],i),ce=T[++re],z.d(de[ce],ue[ce],i),z.d(T[++re],T[++re],i);else if(256===se)break;this.a=z.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var v=function(){function t(t){switch(i){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var n,r,o=[];for(n=3;258>=n;n++)r=t(n),o[n]=r[2]<<24|r[1]<<16|r[0];return o}(),I=o?new Uint32Array(v):v;function S(n,r){function s(t,n){var r,o,s,c,a=t.G,l=[],d=0;switch(r=I[t.length],l[d++]=65535&r,l[d++]=r>>16&255,l[d++]=r>>24,i){case 1===a:o=[0,a-1,0];break;case 2===a:o=[1,a-2,0];break;case 3===a:o=[2,a-3,0];break;case 4===a:o=[3,a-4,0];break;case 6>=a:o=[4,a-5,1];break;case 8>=a:o=[5,a-7,1];break;case 12>=a:o=[6,a-9,2];break;case 16>=a:o=[7,a-13,2];break;case 24>=a:o=[8,a-17,3];break;case 32>=a:o=[9,a-25,3];break;case 48>=a:o=[10,a-33,4];break;case 64>=a:o=[11,a-49,4];break;case 96>=a:o=[12,a-65,5];break;case 128>=a:o=[13,a-97,5];break;case 192>=a:o=[14,a-129,6];break;case 256>=a:o=[15,a-193,6];break;case 384>=a:o=[16,a-257,7];break;case 512>=a:o=[17,a-385,7];break;case 768>=a:o=[18,a-513,8];break;case 1024>=a:o=[19,a-769,8];break;case 1536>=a:o=[20,a-1025,9];break;case 2048>=a:o=[21,a-1537,9];break;case 3072>=a:o=[22,a-2049,10];break;case 4096>=a:o=[23,a-3073,10];break;case 6144>=a:o=[24,a-4097,11];break;case 8192>=a:o=[25,a-6145,11];break;case 12288>=a:o=[26,a-8193,12];break;case 16384>=a:o=[27,a-12289,12];break;case 24576>=a:o=[28,a-16385,13];break;case 32768>=a:o=[29,a-24577,13];break;default:e("invalid distance")}for(r=o,l[d++]=r[0],l[d++]=r[1],l[d++]=r[2],s=0,c=l.length;s<c;++s)m[g++]=l[s];v[l[0]]++,S[l[3]]++,y=t.length+n-1,f=null}var c,a,l,d,u,h,p,f,_,C={},m=o?new Uint16Array(2*r.length):[],g=0,y=0,v=new(o?Uint32Array:Array)(286),S=new(o?Uint32Array:Array)(30),E=n.w;if(!o){for(l=0;285>=l;)v[l++]=0;for(l=0;29>=l;)S[l++]=0}for(v[256]=1,c=0,a=r.length;c<a;++c){for(l=u=0,d=3;l<d&&c+l!==a;++l)u=u<<8|r[c+l];if(C[u]===t&&(C[u]=[]),h=C[u],!(0<y--)){for(;0<h.length&&32768<c-h[0];)h.shift();if(c+3>=a){for(f&&s(f,-1),l=0,d=a-c;l<d;++l)_=r[c+l],m[g++]=_,++v[_];break}0<h.length?(p=R(r,c,h),f?f.length<p.length?(_=r[c-1],m[g++]=_,++v[_],s(p,0)):s(f,-1):p.length<E?f=p:s(p,0)):f?s(f,-1):(_=r[c],m[g++]=_,++v[_])}h.push(c)}return m[g++]=256,v[256]++,n.L=v,n.K=S,o?m.subarray(0,g):m}function R(e,t,i){var n,r,o,s,c,a,l=0,d=e.length;s=0,a=i.length;e:for(;s<a;s++){if(n=i[a-s-1],o=3,3<l){for(c=l;3<c;c--)if(e[n+c-1]!==e[t+c-1])continue e;o=l}for(;258>o&&t+o<d&&e[n+o]===e[t+o];)++o;if(o>l&&(r=n,l=o),258===o)break}return new function(e,t){this.length=e,this.G=t}(l,t-r)}function E(e,t){var i,n,r,s,c,a=e.length,l=new p(572),d=new(o?Uint8Array:Array)(a);if(!o)for(s=0;s<a;s++)d[s]=0;for(s=0;s<a;++s)0<e[s]&&l.push(s,e[s]);if(i=Array(l.length/2),n=new(o?Uint32Array:Array)(l.length/2),1===i.length)return d[l.pop().index]=1,d;for(s=0,c=l.length/2;s<c;++s)i[s]=l.pop(),n[s]=i[s].value;for(r=function(e,t,i){function n(e){var i=f[e][_[e]];i===t?(n(e+1),n(e+1)):--h[i],++_[e]}var r,s,c,a,l,d=new(o?Uint16Array:Array)(i),u=new(o?Uint8Array:Array)(i),h=new(o?Uint8Array:Array)(t),p=Array(i),f=Array(i),_=Array(i),C=(1<<i)-t,m=1<<i-1;for(d[i-1]=t,s=0;s<i;++s)C<m?u[s]=0:(u[s]=1,C-=m),C<<=1,d[i-2-s]=(d[i-1-s]/2|0)+t;for(d[0]=u[0],p[0]=Array(d[0]),f[0]=Array(d[0]),s=1;s<i;++s)d[s]>2*d[s-1]+u[s]&&(d[s]=2*d[s-1]+u[s]),p[s]=Array(d[s]),f[s]=Array(d[s]);for(r=0;r<t;++r)h[r]=i;for(c=0;c<d[i-1];++c)p[i-1][c]=e[c],f[i-1][c]=c;for(r=0;r<i;++r)_[r]=0;for(1===u[i-1]&&(--h[0],++_[i-1]),s=i-2;0<=s;--s){for(a=r=0,l=_[s+1],c=0;c<d[s];c++)(a=p[s+1][l]+p[s+1][l+1])>e[r]?(p[s][c]=a,f[s][c]=t,l+=2):(p[s][c]=e[r],f[s][c]=r,++r);_[s]=0,1===u[s]&&n(s)}return h}(n,n.length,t),s=0,c=i.length;s<c;++s)d[i[s].index]=r[s];return d}function w(e){var t,i,n,r,s=new(o?Uint16Array:Array)(e.length),c=[],a=[],l=0;for(t=0,i=e.length;t<i;t++)c[e[t]]=1+(0|c[e[t]]);for(t=1,i=16;t<=i;t++)a[t]=l,l+=0|c[t],l<<=1;for(t=0,i=e.length;t<i;t++)for(l=a[e[t]],a[e[t]]+=1,n=s[t]=0,r=e[t];n<r;n++)s[t]=s[t]<<1|1&l,l>>>=1;return s}function b(t,i){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=o?new Uint8Array(t):t,this.s=!1,this.n=P,this.B=!1,!i&&(i={})||(i.index&&(this.c=i.index),i.bufferSize&&(this.m=i.bufferSize),i.bufferType&&(this.n=i.bufferType),i.resize&&(this.B=i.resize)),this.n){case x:this.b=32768,this.a=new(o?Uint8Array:Array)(32768+this.m+258);break;case P:this.b=0,this.a=new(o?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}var x=0,P=1,O={D:x,C:P};b.prototype.p=function(){for(;!this.s;){var n=X(this,3);switch(1&n&&(this.s=i),n>>>=1){case 0:var r=this.input,s=this.c,c=this.a,a=this.b,l=r.length,d=t,u=c.length,h=t;switch(this.e=this.g=0,s+1>=l&&e(Error("invalid uncompressed block header: LEN")),d=r[s++]|r[s++]<<8,s+1>=l&&e(Error("invalid uncompressed block header: NLEN")),d===~(r[s++]|r[s++]<<8)&&e(Error("invalid uncompressed block header: length verify")),s+d>r.length&&e(Error("input buffer is broken")),this.n){case x:for(;a+d>c.length;){if(d-=h=u-a,o)c.set(r.subarray(s,s+h),a),a+=h,s+=h;else for(;h--;)c[a++]=r[s++];this.b=a,c=this.f(),a=this.b}break;case P:for(;a+d>c.length;)c=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(o)c.set(r.subarray(s,s+d),a),a+=d,s+=d;else for(;d--;)c[a++]=r[s++];this.c=s,this.b=a,this.a=c;break;case 1:this.o(W,Q);break;case 2:var p,_,C,m,g=X(this,5)+257,y=X(this,5)+1,v=X(this,4)+4,I=new(o?Uint8Array:Array)(k.length),S=t,R=t,E=t,w=t,b=t;for(b=0;b<v;++b)I[k[b]]=X(this,3);if(!o)for(b=v,v=I.length;b<v;++b)I[k[b]]=0;for(p=f(I),S=new(o?Uint8Array:Array)(g+y),b=0,m=g+y;b<m;)switch(R=K(this,p),R){case 16:for(w=3+X(this,2);w--;)S[b++]=E;break;case 17:for(w=3+X(this,3);w--;)S[b++]=0;E=0;break;case 18:for(w=11+X(this,7);w--;)S[b++]=0;E=0;break;default:E=S[b++]=R}_=f(o?S.subarray(0,g):S.slice(0,g)),C=f(o?S.subarray(g):S.slice(g)),this.o(_,C);break;default:e(Error("unknown BTYPE: "+n))}}return this.t()};var T,A,M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=o?new Uint16Array(M):M,N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],D=o?new Uint16Array(N):N,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],L=o?new Uint8Array(V):V,U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],F=o?new Uint16Array(U):U,j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=o?new Uint8Array(j):j,H=new(o?Uint8Array:Array)(288);for(T=0,A=H.length;T<A;++T)H[T]=143>=T?8:255>=T?9:279>=T?7:8;var q,z,W=f(H),G=new(o?Uint8Array:Array)(30);for(q=0,z=G.length;q<z;++q)G[q]=5;var Q=f(G);function X(t,i){for(var n,r=t.g,o=t.e,s=t.input,c=t.c,a=s.length;o<i;)c>=a&&e(Error("input buffer is broken")),r|=s[c++]<<o,o+=8;return n=r&(1<<i)-1,t.g=r>>>i,t.e=o-i,t.c=c,n}function K(t,i){for(var n,r,o=t.g,s=t.e,c=t.input,a=t.c,l=c.length,d=i[0],u=i[1];s<u&&!(a>=l);)o|=c[a++]<<s,s+=8;return(r=(n=d[o&(1<<u)-1])>>>16)>s&&e(Error("invalid code length: "+r)),t.g=o>>r,t.e=s-r,t.c=a,65535&n}function Y(e){if("string"==typeof e){var t,i,n=e.split("");for(t=0,i=n.length;t<i;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;e=n}for(var r,o=1,s=0,c=e.length,a=0;0<c;){c-=r=1024<c?1024:c;do{s+=o+=e[a++]}while(--r);o%=65521,s%=65521}return(s<<16|o)>>>0}function J(t,i){var n,r;switch(this.input=t,this.c=0,!i&&(i={})||(i.index&&(this.c=i.index),i.verify&&(this.M=i.verify)),n=t[this.c++],r=t[this.c++],15&n){case Z:this.method=Z;break;default:e(Error("unsupported compression method"))}0!=((n<<8)+r)%31&&e(Error("invalid fcheck flag:"+((n<<8)+r)%31)),32&r&&e(Error("fdict flag is not supported")),this.A=new b(t,{index:this.c,bufferSize:i.bufferSize,bufferType:i.bufferType,resize:i.resize})}b.prototype.o=function(e,t){var i=this.a,n=this.b;this.u=e;for(var r,o,s,c,a=i.length-258;256!==(r=K(this,e));)if(256>r)n>=a&&(this.b=n,i=this.f(),n=this.b),i[n++]=r;else for(c=D[o=r-257],0<L[o]&&(c+=X(this,L[o])),r=K(this,t),s=F[r],0<B[r]&&(s+=X(this,B[r])),n>=a&&(this.b=n,i=this.f(),n=this.b);c--;)i[n]=i[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},b.prototype.I=function(e,t){var i=this.a,n=this.b;this.u=e;for(var r,o,s,c,a=i.length;256!==(r=K(this,e));)if(256>r)n>=a&&(a=(i=this.f()).length),i[n++]=r;else for(c=D[o=r-257],0<L[o]&&(c+=X(this,L[o])),r=K(this,t),s=F[r],0<B[r]&&(s+=X(this,B[r])),n+c>a&&(a=(i=this.f()).length);c--;)i[n]=i[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},b.prototype.f=function(){var e,t,i=new(o?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.a;if(o)i.set(r.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=r[e+32768];if(this.l.push(i),this.q+=i.length,o)r.set(r.subarray(n,n+32768));else for(e=0;32768>e;++e)r[e]=r[n+e];return this.b=32768,r},b.prototype.J=function(e){var t,i,n,r=this.input.length/this.c+1|0,s=this.input,c=this.a;return e&&("number"==typeof e.v&&(r=e.v),"number"==typeof e.F&&(r+=e.F)),2>r?i=(n=(s.length-this.c)/this.u[2]/2*258|0)<c.length?c.length+n:c.length<<1:i=c.length*r,o?(t=new Uint8Array(i)).set(c):t=c,this.a=t},b.prototype.t=function(){var e,t,i,n,r,s=0,c=this.a,a=this.l,l=new(o?Uint8Array:Array)(this.q+(this.b-32768));if(0===a.length)return o?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,i=a.length;t<i;++t)for(n=0,r=(e=a[t]).length;n<r;++n)l[s++]=e[n];for(t=32768,i=this.b;t<i;++t)l[s++]=c[t];return this.l=[],this.buffer=l},b.prototype.H=function(){var e,t=this.b;return o?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},J.prototype.p=function(){var t,i=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&((i[this.c++]<<24|i[this.c++]<<16|i[this.c++]<<8|i[this.c++])>>>0!==Y(t)&&e(Error("invalid adler-32 checksum"))),t};var Z=8;function $(e,t){this.input=e,this.a=new(o?Uint8Array:Array)(32768),this.h=ee.k;var i,n={};for(i in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)n[i]=t[i];n.outputBuffer=this.a,this.z=new _(this.input,n)}var ee=g;function te(e,t){var i,n,o,s;if(Object.keys)i=Object.keys(t);else for(n in i=[],o=0,t)i[o++]=n;for(o=0,s=i.length;o<s;++o)r(e+"."+(n=i[o]),t[n])}$.prototype.j=function(){var t,i,n,r,s,c,a,l=0;switch(a=this.a,t=Z){case Z:i=Math.LOG2E*Math.log(32768)-8;break;default:e(Error("invalid compression method"))}switch(n=i<<4|t,a[l++]=n,t){case Z:switch(this.h){case ee.NONE:s=0;break;case ee.r:s=1;break;case ee.k:s=2;break;default:e(Error("unsupported compression type"))}break;default:e(Error("invalid compression method"))}return r=s<<6|0,a[l++]=r|31-(256*n+r)%31,c=Y(this.input),this.z.b=l,l=(a=this.z.j()).length,o&&((a=new Uint8Array(a.buffer)).length<=l+4&&(this.a=new Uint8Array(a.length+4),this.a.set(a),a=this.a),a=a.subarray(0,l+4)),a[l++]=c>>24&255,a[l++]=c>>16&255,a[l++]=c>>8&255,a[l++]=255&c,a},r("Zlib.Inflate",J),r("Zlib.Inflate.prototype.decompress",J.prototype.p),te("Zlib.Inflate.BufferType",{ADAPTIVE:O.C,BLOCK:O.D}),r("Zlib.Deflate",$),r("Zlib.Deflate.compress",function(e,t){return new $(e,t).j()}),r("Zlib.Deflate.prototype.compress",$.prototype.j),te("Zlib.Deflate.CompressionType",{NONE:ee.NONE,FIXED:ee.r,DYNAMIC:ee.k})}.call(this);